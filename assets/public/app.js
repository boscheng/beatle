webpackJsonp([0],{101:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),s=r(c),l=n(158),f=r(l),p=n(23),d=r(p),y=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={logs:{}},n}return i(t,e),u(t,[{key:"log",value:function(e,t,n,r){if(1===arguments.length){var o=Object.keys(this.state.logs)[0]||"文档说明";if(e=e.trim(),"#"===e[0]){var a=e.split("\n");o=a.shift().split(/^#+/)[1].trim(),e=a.join("\n")}this.state.logs[o]||(this.state.logs[o]=[]);var i=(0,d.default)(e.replace(/\s{9}(\S)/g,function(e,t){return"\n"+t}));this.state.logs[o].push({summary:i})}else this.state.logs[e]||(this.state.logs[e]=[]),this.state.logs[e].push({title:t,summary:n,code:r});this.forceUpdate()}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.logs);return s.default.createElement("div",null,t.map(function(t){var n=e.state.logs[t];return s.default.createElement(f.default,{key:t,title:s.default.createElement("h2",{style:{marginBottom:0}},t),bordered:!1},n.map(function(e,t){return e.title?s.default.createElement("div",{key:t},s.default.createElement("h5",null,t+1+". "+e.title),s.default.createElement("p",null,e.summary),e.code?s.default.createElement("pre",null,e.code):null):s.default.createElement("div",{key:t,dangerouslySetInnerHTML:{__html:e.summary}})}))}))}}]),t}(s.default.Component);t.default=y,e.exports=t.default},1025:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(12),d=r(p),y=n(40),m=r(y),h=n(17),b=r(h),v=n(158),g=r(v),_=n(81),x=(c=u=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,c=Array(u),s=0;s<u;s++)c[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={visible:!1},i=n,a(r,i)}return i(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props.route,n=this.getComponent("Footer");return f.default.createElement("div",{className:"j-layout-demo "+this.props.className,style:{margin:100}},f.default.createElement("div",{className:"j-content"},f.default.createElement("i",{className:"j-doc-trigger"}),f.default.createElement("p",{className:"j-doc",dangerouslySetInnerHTML:{__html:t.doc}}),f.default.createElement(g.default,{title:f.default.createElement("h3",null,t.title,f.default.createElement("small",{style:{marginLeft:10}},t.summary)),style:{marginTop:50},extra:f.default.createElement(m.default,{type:"ghost",size:"small",onClick:function(){return e.setState({visible:!e.state.visible})}},f.default.createElement(b.default,{type:"eye"}),"wiki")},this.state.visible?f.default.createElement("iframe",{style:{textAlign:"left",marginTop:20,border:"1px solid #ddd",width:"100%"},onLoad:function(e){e.target.style.height=e.target.contentDocument.documentElement.scrollHeight+10+"px"},src:t?window.CONFIG.prefix+"/assets/static/"+t.fpath.slice(2,-4).replace(/[\\\/]/g,"_").replace("_index","_demo")+".html":"about:blank"}):null,this.props.viewContent||this.props.children)),f.default.createElement(n,{className:"j-footer"}))}}]),t}(_.BasicLayout),u.displayName="DemoLayout",u.getLayoutProps=function(e,t){var n=[];if(e.route){var r=e.route;for(n.push({text:r.title}),r.navKey&&e.subRoutes[r.navKey]&&n.unshift({text:e.subRoutes[r.navKey].title||r.navKey});(r=r.parent)&&r.title;)n.unshift({link:r.resolvePath,text:r.title})}return _.BasicLayout.getLayoutProps.call(this,e,t,{BreadCrumb:!1===e.BreadCrumb?e.BreadCrumb:Object.assign({navs:n},e.BreadCrumb)})},u.layoutBlocks={Footer:_.GlobalFooter},u.propTypes={route:d.default.object},c);t.default=x,e.exports=t.default},114:function(e,t,n){"use strict";function r(e){var t=void 0,n=void 0;return!(!e||"[object Object]"!==a.call(e))&&(!(t=Object.getPrototypeOf(e))||"function"==typeof(n=i.call(t,"constructor")&&t.constructor)&&u.call(n)===c)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o={},a=o.toString,i=o.hasOwnProperty,u=i.toString,c=u.call(Object);e.exports=t.default},138:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.action=t.computed=t.observable=t.exec=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(139),c=r(u),s=n(694),l=r(s),f=n(114),p=r(f),d=n(377),y=(t.exec=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r,o,i){var u=i.initializer?i.initializer():i.value;return i.initializer=void 0,i.value=function(){var r=this,i=void 0;if((0,p.default)(u)){i={};for(var c in u)!function(e){i[e]=function(t,o,a,i,c){return u[e].call(r,t,o,a,i,n||c)}}(c)}else i=function(e,t,o,a,i){return u.call(r,e,t,o,a,n||i)};for(var s=arguments.length,l=Array(s),f=0;f<s;f++)l[f]=arguments[f];if("string"==typeof e)return t&&l.push(t),this.setState.apply(this,[a({},e,{exec:n.exec||o,callback:i})].concat(l));var d=n;d.exec?d.callback=i:d=i;var y=this.execute.apply(this,[o,d,!1===e].concat(l));return y.then(function(e){return t&&t(null,e),e},function(e){return t&&t(e),e}),this.fromPromise(y)},i}},t.observable=function(e,t,n){return e.state=e.state||{},e.state[t]=n.initializer.call(e),{set:function(e){this.state[t]=e},enumerable:!1}},t.computed=function(e,t,n){e.state=e.state||{};var r=n.get;return Object.defineProperty(e.state,t,{get:function(){return r.call(e)},enumerable:!0,configuration:!0}),n},t.action=function(e,t,n){var r=n.value;return n.value=function(){for(var e=this,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var a=r.apply(this,n);a&&a.then?a.then(function(){e.dispatch({type:e.ACTION_TYPE_IMMEDIATE,payload:e.state})}):this.dispatch({type:this.ACTION_TYPE_IMMEDIATE,payload:this.state})},n},function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this._name=t.name,this.ajax=t.ajax||new c.default,this._isImmutable=t.isImmutable,this._defaultActions=t.actions||{},this._saga=t.saga}return i(e,[{key:"_wrapperReducer",value:function(e,t,n){var r=this;if((0,p.default)(t)){var o={};for(var a in t)!function(a){o[a]=function(o,i){o[e]=t[a](o,i,r._initialState[e],r.state[e],n)}}(a);return o}return t=n.callback||t,function(o,a){o[e]=t(o,a,r._initialState[e],r.state[e],n)}}},{key:"setState",value:function(e){for(var t=void 0,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];"function"==typeof r[r.length-1]&&(t=r[r.length-1],r.pop());var a=[],i=function(e,t){return t.data};for(var u in e){switch(!0){case void 0!==e[u]&&e[u].asMutable:e[u]={data:this._isImmutable?e[u]:e[u].asMutable({deep:!0}),callback:this._wrapperReducer(u,i,{})};break;case!(!e[u]||!e[u].then):e[u]={exec:e[u],callback:this._wrapperReducer(u,i,{})};break;default:if("function"==typeof e[u]){var c=e[u];c.name===u?e[u]={callback:this._wrapperReducer(u,c,e[u])}:this._defaultActions[c.name]?(e[u]=(0,l.default)(this._defaultActions[c.name]),e[u].callback=this._wrapperReducer(u,c||i,e[u])):(e[u]={callback:c},e[u].callback=this._wrapperReducer(u,c,e[u]))}else if(e[u].exec){var s=e[u].callback;"string"==typeof e[u].exec&&(this._defaultActions[e[u].exec]&&(e[u]=(0,l.default)(this._defaultActions[e[u].exec])),s=s||e[u].callback,delete e[u].callback),e[u].callback=this._wrapperReducer(u,s||i,e[u])}else e[u]={data:e[u],callback:this._wrapperReducer(u,i,{})}}e[u].cid=this.id||"id",r.unshift(!1),r.unshift(e[u]),r.unshift(e[u].name||u),a.push(this.execute.apply(this,r))}var f=Promise.all(a);return f=f.then(function(n){var r=Object.keys(e),o=void 0,a=0;return r.length>1?(o={},r.forEach(function(e){o[e]=n[a++]})):o=n[a],t&&t(null,o),o},function(e){return t&&t(e),e}),this.fromPromise(f)}},{key:"fromPromise",value:function(e){return e.subscribe=function(t){return t&&e.then(function(e){t(null,e)},t),e},e}},{key:"execute",value:function(e,t,n){var r=this;if(this._initialState||(this._initialState=(0,l.default)(this.state)),this._defaultActions[e]&&void 0===this.state[e]&&!t.exec){var o=t;t=(0,l.default)(this._defaultActions[e]),t.callback=o||t.callback}var a=void 0,i=void 0;t.exec?(a=(0,d.getProcessorByExec)(this,this._initialState,this._name,e,t.exec,this.ajax,n),i=!0):a=t.isGenerator?(0,d.getProcessorByGenerator)(this,this._initialState,this._name,e,this._saga,n):(0,d.getProcessor)(this,this._initialState,this._name,e,t,function(){return r.state},n),n||(0,d.setReducers)(this,this._name,e,t,i);for(var u=arguments.length,c=Array(u>3?u-3:0),s=3;s<u;s++)c[s-3]=arguments[s];return a.apply(this,c)(this.dispatch)}}]),e}());t.default=y},139:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i,u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(682),l=r(s),f=n(12),p=r(f),d=n(11),y=r(d),m=n(684),h=r(m),b=n(355),v=r(b),g=n(209),_=r(g),x=n(687),j=r(x),O=n(54),w=r(O),k=n(114),P=r(k),E=n(688),R=r(E),M=function(e){return e},T=(i=a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this._setting={},t.origin&&(this._uri=R.default.parse(t.origin),delete t.origin);for(var n in t)this.set(n,t[n])}return c(e,[{key:"setHeader",value:function(e){this._setting.headers&&(0,y.default)(!1,w.default.duplicateProp,"setHeader",void 0===e?"undefined":u(e),"headers","Beatle.Ajax"),this._setting.headers=e}},{key:"beforeRequest",value:function(e){this._setting.beforeRequest&&(0,y.default)(!1,w.default.duplicateProp,"beforeRequest",void 0===e?"undefined":u(e),"beforeRequest","Beatle.Ajax"),this._setting.beforeRequest=e}},{key:"beforeResponse",value:function(e){this._setting.beforeResponse&&(0,y.default)(!1,w.default.duplicateProp,"beforeResponse",void 0===e?"undefined":u(e),"beforeResponse","Beatle.Ajax"),this._setting.beforeResponse=e}},{key:"afterResponse",value:function(e){this._setting.afterResponse&&(0,y.default)(!1,w.default.duplicateProp,"afterResponse",void 0===e?"undefined":u(e),"afterResponse","Beatle.Ajax"),this._setting.afterResponse=e}},{key:"set",value:function(t,n){if(void 0===e[t])(0,y.default)(!1,w.default.invalidProp,"set",t,"headers, delimeter, normalize, stringify, beforeRequest, beforeResponse, afterResponse","Beatle.Ajax");else{if(void 0===n||null===n)return this._setting[t]||e[t];this._setting[t]&&(0,y.default)(!1,w.default.duplicateProp,"set",t,"headers, delimeter, normalize, stringify, beforeRequest, beforeResponse, afterResponse","Beatle.Ajax"),this._setting[t]=n}}},{key:"_substitute",value:function(e,t){var n=this.set("delimeter"),r=e.normalize||this.set("normalize");if(e.originUrl=e.url,t&&r){var o=(0,P.default)(e.data)?Object.assign({},e.data):e.data;e.url=(0,j.default)(e.url,o,!0,n)}else(e.params||e.data)&&(e.url=(0,j.default)(e.url,e.params||e.data,!1,n))}},{key:"_formatQuery",value:function(e,t){var n=this,r=R.default.parse(e.url,!0);if(this._uri&&!r.host){["protocol","hostname","port"].forEach(function(e){return r[e]=n._uri[e]});var o="/"===this._uri.pathname?"":this._uri.pathname||"";r.pathname=o+r.pathname}if(t){r.query=Object.assign(r.query||{},e.data);var a=h.default.stringify(r.query,e.qsOption);r.search=a&&"?"+a||"",delete r.query}return R.default.format(r)}},{key:"_prepareOption",value:function(e){e.method?e.method=e.method.toUpperCase():e.method="GET";var t={},n=!1!==e.mutable&&(void 0===e.data||(0,P.default)(e.data)||Array.isArray(e.data));this._substitute(e,n);var r=t["Content-Type"]&&t["Content-Type"].indexOf("application/json")>-1;e.headers||Object.assign(t,this.set("headers"));var o=e.credential||"same-origin",a={},i=e.stringify||this.set("stringify");return r||"GET"!==e.method&&"DELETE"!==e.method?(n?(a.body=i?h.default.stringify(e.data,e.qsOption):JSON.stringify(e.data),e.headers||(t["Content-Type"]=i?"application/x-www-form-urlencoded":"application/json; charset=utf-8")):a.body=e.data,a.url=this._formatQuery(e)):a.url=this._formatQuery(e,!0),delete e.data,delete e.params,delete e.stringify,delete e.normalize,delete e.mutable,Object.assign(e,{credentials:o,headers:Object.assign({},e.headers,t)},a)}},{key:"request",value:function(e){var t=this;p.default.checkPropTypes(v.default,e,"request","Beatle.Ajax"),e=this._prepareOption(e);var n=e.beforeRequest,r=e.beforeResponse,o=e.afterResponse;delete e.beforeRequest,delete e.beforeResponse,delete e.afterResponse,n=n||this.set("beforeRequest");var a=n(e);if(!1===a)return Promise.reject(!1);var i=void 0;i=a&&"function"==typeof a.then?a:(0,l.default)(e.url,e).then(function(n){return(r=r||t.set("beforeResponse"))(n,e,i)}).catch(function(e){u&&u(e,null,i)});var u=e.callback;return i=i.then(function(n){o=o||t.set("afterResponse");var r=o(n,e,i);if(r instanceof Error)throw r;return!1===r?r:(void 0===r&&(r=n),u&&u(null,r,i),r)},function(e){u&&u(e,null,i)})}},{key:"poller",value:function(e){return new _.default(e)}}]),e}(),a.headers=window.ajaxHeader||null,a.delimeter=/:(\w+)/g,a.normalize=!1,a.stringify=!1,a.beforeRequest=M,a.afterResponse=M,a.beforeResponse=function(e,t){if(e.ok||304===e.status)try{e=void 0===t.dataType?e.json():t.dataType&&"function"==typeof e[t.dataType]?e[t.dataType]():e.text()}catch(t){e=t}else{var n=new Error(e.statusText);n.response=e,e=n}return e},a.request=function(e){return(new T).request(e)},i);t.default=T,["get","delete","post","put","patch"].forEach(function(e){T.prototype[e]=function(t,n,r,o){var a={method:e,url:t,data:n};return(0,P.default)(r)?(Object.assign(a,r),"function"==typeof o&&(r=o,o=null)):r&&(a.callback=r,a.dataType=o),this.request(a)}}),e.exports=t.default},1394:function(e,t){e.exports="# Beatle\n\n  Beatle是一套完整前端开发框架，用来构建客户端应用。[Beatle Api文档](http://web.npm.alibaba-inc.com/package/beatle)\n\n## 特性\n\n  1. 简单化Api，快速掌握开发技巧，页面开发全流程。\n  2. 轻量概念，React-like-Model 构建数据模型，只需掌握React框架。\n  3. 数据调用，鉴权认证、数据模拟 以及 错误统一处理。\n  4. 多应用，应用作为子路由前套，实现业务模块组装发布。\n  5. 服务化，通用业务逻辑代码按需加载。\n  6. 响应式，响应式数据序列，实现组件异步渲染。"},1395:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(23),d=r(p),y=n(1396),m=r(y),h=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){(0,m.default)(this._dom)}},{key:"render",value:function(){var e=this;return f.default.createElement("div",{ref:function(t){return e._dom=t}})}}]),t}(l.Component),u.routeOptions={doc:(0,d.default)(n(1462)),getIcon:function(e){return'<svg style="width: '+e+"px; height: "+e+'px;" viewBox="0 0 32 32" preserveAspectRatio="xMidYMid meet" focusable="false"><g viewBox="0 0 32 32"><polyline points="26.11 26.03 16.13 5.97 5.89 26.03" fill="none" stroke="#2d3033" stroke-miterlimit="10"></polyline><line x1="9.4" y1="19.19" x2="22.71" y2="19.19" fill="none" stroke="#2d3033" stroke-miterlimit="10"></line><circle cx="26.11" cy="26.03" r="2" fill="#ff3a49"></circle><circle cx="5.89" cy="26.03" r="2" fill="#ff3a49"></circle><circle cx="16.15" cy="5.97" r="2" fill="#00b4f0"></circle></g></svg>'},title:"响应式组件",summary:"组件异步渲染，数据序列化",layout:["consoleLayout","demoLayout"],value:5},c);t.default=h,e.exports=t.default},1396:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t,n,r=(n=t=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={name:"baqian"},r}return i(t,e),c(t,[{key:"componentDidMount",value:function(){this.context.app.model("user").getUserInfo(this.state.name)}},{key:"render",value:function(){var e=this;return l.default.createElement("div",null,l.default.createElement("h1",null,"Beatle版本：",this.context.app.version),l.default.createElement("br",null),l.default.createElement(_.default,{style:{width:"50%"},value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},prefix:l.default.createElement(j.default,{type:"user",style:{color:"#999"}}),addonAfter:l.default.createElement(j.default,{type:"search",onClick:function(){return e.context.app.model("user").getUserInfo(e.state.name)}})}),this.context.app.observer(function(e){return e.user.profile}).render(function(e){return l.default.createElement(h.default,{rowKey:"id",columns:[{dataIndex:"id",title:"ID"},{dataIndex:"name",title:"名称",render:function(e,t){return l.default.createElement("a",{href:t.html_url,target:"_blank"},e)}},{dataIndex:"created_at",title:"创建时间"},{dataIndex:"updated_at",title:"更新时间"}],dataSource:[e]})}),l.default.createElement("h3",null,"参与模块"),this.context.app.observer("user.repos").render(function(e){return l.default.createElement(v.default,{itemLayout:"horizontal",dataSource:e,renderItem:function(e){return l.default.createElement(v.default.Item,null,l.default.createElement(v.default.Item.Meta,{title:l.default.createElement("a",{href:e.url,target:"_blank"},e.name),description:e.description}))}})}))}}]),t}(l.default.PureComponent),t.contextTypes={app:p.default.object},n),u=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,c=Array(u),s=0;s<u;s++)c[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={profile:{},repos:[]},i=n,a(r,i)}return i(t,e),c(t,[{key:"getUserInfo",value:function(e){var t=this;this.setState({profile:{exec:this.ajax.get("https://api.github.com/users/"+e),callback:function(n,r){return t.getRepos(e),r.data}}})}},{key:"getRepos",value:function(e){var t=this;this.ajax.get("https://api.github.com/users/"+e+"/repos").then(function(e){t.setState({repos:e})})}}]),t}(y.default.BaseModel),s=new y.default;s.model("user",u),s.run(e,r)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=u;var s=n(0),l=r(s),f=n(12),p=r(f),d=n(29),y=r(d),m=n(60),h=r(m),b=n(67),v=r(b),g=n(46),_=r(g),x=n(17),j=r(x);e.exports=t.default},1462:function(e,t){e.exports="# 响应式组件\n\n> 示例Demo都应该从简到繁的顺序来阅读，如果本章节不了解，请先看上一个章节的示例。\n\n响应式编程是当下流行的开发模式，响应式编程核心是通过把同步和异步数据转变为可观察的数据序列，实现代码链式开发。\n\n+ `app.observer(data)`生成数据序列，通过链式来消费数据\n```javascript\n  import {from} from 'rxjs/observable/from';\n  import {delay} from 'rxjs/operators/delay';\n  \n  const a = 1;\n  const b = new Promise((resolve) => {\n    setTimeout(() => {\n      resolve(2);\n    }, 1000);\n  });\n  const c = from(Promise.resolve(3)).pipe(delay(500));\n  app.observer(a).subscribe((ret) => {\n    console.log(ret);\n  });\n  app.observer(b).subscribe((ret) => {\n    console.log(ret);\n  });\n  app.observer(c).subscribe((ret) => {\n    console.log(ret);\n  });\n// 打印顺序：1, 3, 2\n```\n+ `app.observer(data)`延伸，创建响应式组件，没次数据序列发生变更时，组件都会自动刷新为最新值。\n\n```javascript\n  const element = app.observer(b).render(count => (<h1>{count}</h1>));\n  ReactDOM.render(element, document.body);\n```\n\n> 可以发现数据序列的消费，是分别通过2个函数来实现, `subscribe`和`render`，`subscribe`用于非组件的消费，`render`用于组件的消费。"},1463:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(23),d=r(p),y=n(1464),m=r(y),h=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){(0,m.default)(this._dom)}},{key:"render",value:function(){var e=this;return f.default.createElement("div",{ref:function(t){return e._dom=t}})}}]),t}(l.Component),u.routeOptions={doc:(0,d.default)(n(1465)),getIcon:function(e){return'<svg style="width: '+e+"px; height: "+e+'px;" viewBox="0 0 32 32" preserveAspectRatio="xMidYMid meet" focusable="false"><g viewBox="0 0 32 32"><polyline points="5.89 5.97 15.87 26.03 26.11 5.97" fill="none" stroke="#2d3033" stroke-miterlimit="10"></polyline><circle cx="5.72" cy="6.13" r="2" fill="#ff3a49"></circle><circle cx="16" cy="26.57" r="2" fill="#00b4f0"></circle><circle cx="26.11" cy="5.97" r="2" fill="#ff3a49"></circle></g></svg>'},title:"插件与数据通信",summary:"插件调用接口数据做更新",layout:["consoleLayout","demoLayout"],value:2},c);t.default=h,e.exports=t.default},1464:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t,n,r=(n=t=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={name:"baqian"},r}return i(t,e),c(t,[{key:"componentDidMount",value:function(){this.props.getUserInfo(this.state.name)}},{key:"render",value:function(){var e=this;return l.default.createElement("div",null,l.default.createElement("h1",null,"Beatle版本：",this.context.app.version),l.default.createElement("br",null),l.default.createElement(_.default,{style:{width:"50%"},value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},prefix:l.default.createElement(j.default,{type:"user",style:{color:"#999"}}),addonAfter:l.default.createElement(j.default,{type:"search",onClick:function(){return e.props.getUserInfo(e.state.name)}})}),l.default.createElement(h.default,{rowKey:"id",columns:[{dataIndex:"id",title:"ID"},{dataIndex:"name",title:"名称",render:function(e,t){return l.default.createElement("a",{href:t.html_url,target:"_blank"},e)}},{dataIndex:"created_at",title:"创建时间"},{dataIndex:"updated_at",title:"更新时间"}],dataSource:[this.props.profile]}),l.default.createElement("h3",null,"参与模块"),l.default.createElement(v.default,{itemLayout:"horizontal",dataSource:this.props.repos,renderItem:function(e){return l.default.createElement(v.default.Item,null,l.default.createElement(v.default.Item.Meta,{title:l.default.createElement("a",{href:e.url,target:"_blank"},e.name),description:e.description}))}}))}}]),t}(l.default.PureComponent),t.contextTypes={app:p.default.object},t.propTypes={profile:p.default.object,repos:p.default.array,getUserInfo:p.default.func},n),u=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,c=Array(u),s=0;s<u;s++)c[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={profile:{},repos:[]},i=n,a(r,i)}return i(t,e),c(t,[{key:"getUserInfo",value:function(e){var t=this;this.setState({profile:{exec:this.ajax.get("https://api.github.com/users/"+e),callback:function(n,r){return t.getRepos(e),r.data}}})}},{key:"getRepos",value:function(e){var t=this;this.ajax.get("https://api.github.com/users/"+e+"/repos").then(function(e){t.setState({repos:e})})}}]),t}(y.default.BaseModel),s=new y.default;s.model("user",u);var f=s.connect("user",r,!0);s.run(e,f)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=u;var s=n(0),l=r(s),f=n(12),p=r(f),d=n(29),y=r(d),m=n(60),h=r(m),b=n(67),v=r(b),g=n(46),_=r(g),x=n(17),j=r(x);e.exports=t.default},1465:function(e,t){e.exports="# 插件与数据通信\n\n> 示例Demo都应该从简到繁的顺序来阅读，如果本章节不了解，请先看上一个章节的示例。\n\n先来了解数据模型的概念，[百度百科](https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/1305623?fr=aladdin) 描述至少包含3个要素：`数据状态`、`数据行为` 和 `约束条件`。在Beatle中保留前者2个要素。\n\n有了数据模型，组件和外部数据的通信，即我们理解的业务层逻辑，不在组件中写死，而是写到数据模型中。\n\n> 业务层逻辑，除了数据逻辑 还有 计算逻辑，计算逻辑封装则会在[插件与服务](/beatle-projects/single/service)示例中介绍。\n\n### 数据模型 和 路由视图的关系\n\n+ 数据模型有2个要素：数据状态`state` 和 数据行为`action`, 以下是一个简单的model代码\n```javascript\n  const model = {\n    state: {\n      name: 'a'\n    },\n    actions: {\n      setName(name) {\n        return {\n          name: name\n        };\n      }\n    }\n  }\n  // 注册数据模型\n  app.model('test', model);\n  // 获取数据模型实例\n  const model = app.model('test');\n  // 打印a\n  console.log(model.state.name);\n  // 调用数据行为方法\n  model.actions.setName('b');\n  // 打印b\n  console.log(model.state.name);\n```\n+ 视图，通过`app.connect`数据模型和组件连接，产生的Hoc组件。\n\n简单场景，我们会考虑在组件内部，通过app.model获取到数据模型实例，通过实例来改变组件的state，从而达到组件更新的目的，这样依赖数据模型和组件强绑定，组件复用性极低。\n\n在React组件世界里，为了提高组件复用，会通过Hoc高阶组件的封装，Beatle也推崇这样的思路，这样我们把数据模型和组件封装成Hoc，在Hoc中把数据模型的state和actions都注入到组件的props中，通过组件props来访问。\n\n```javascript\nclass Component extends React.PureComponent {\n  static propTypes = {\n    test: React.PropTypes.object\n  }\n  componentWillMount() {\n    this.props.test.setName('b');\n  }\n  render() {\n    return (<h1>{this.props.test.name}</h1>)\n  }\n}\nconst HocComponent = app.connect('test', Component);\n```\n\n> 关于数据模型的使用，参考Beatle核心模块[数据模型](/beatle-projects/core/model)"},1466:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(23),d=r(p),y=n(1467),m=r(y),h=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){(0,m.default)(this._dom)}},{key:"render",value:function(){var e=this;return f.default.createElement("div",{ref:function(t){return e._dom=t}})}}]),t}(l.Component),u.routeOptions={doc:(0,d.default)(n(1468)),getIcon:function(e){return'<svg style="width: '+e+"px; height: "+e+'px;" viewBox="0 0 32 32" preserveAspectRatio="xMidYMid meet" focusable="false"><g viewBox="0 0 32 32"><line x1="4.99" y1="24.7" x2="26.93" y2="24.7" fill="none" stroke="#2d3033" stroke-linecap="round" stroke-linejoin="round"></line><line x1="4.99" y1="15.7" x2="26.93" y2="15.7" fill="none" stroke="#2d3033" stroke-linecap="round" stroke-linejoin="round"></line><line x1="4.99" y1="6.7" x2="26.93" y2="6.7" fill="none" stroke="#2d3033" stroke-linecap="round" stroke-linejoin="round"></line><circle cx="4.99" cy="6.7" r="2" fill="#00b4f0"></circle><circle cx="26.93" cy="6.7" r="2" fill="#ff3a49"></circle><circle cx="4.99" cy="15.62" r="2" fill="#00b4f0"></circle><circle cx="26.93" cy="15.62" r="2" fill="#ff3a49"></circle><circle cx="4.99" cy="24.72" r="2" fill="#00b4f0"></circle><circle cx="26.93" cy="24.72" r="2" fill="#ff3a49"></circle></g></svg>'},title:"简单插件",summary:"驱动单个应用",layout:["consoleLayout","demoLayout"],value:1},c);t.default=h,e.exports=t.default},1467:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t,n,r=(n=t=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={name:"baqian",repos:{}},r}return i(t,e),c(t,[{key:"getUserInfo",value:function(){var e=this;this.context.ajax.get("https://api.github.com/users/"+this.state.name).then(function(t){e.context.seed.dispatch({name:"profile",payload:{data:t}}),e.getRepos()})}},{key:"getRepos",value:function(){var e=this;this.context.ajax.get("https://api.github.com/users/"+this.state.name+"/repos").then(function(t){e.setState({repos:t})})}},{key:"componentDidMount",value:function(){this.getUserInfo()}},{key:"render",value:function(){var e=this;return l.default.createElement("div",null,l.default.createElement("h1",null,"Beatle版本：",this.context.app.version),l.default.createElement("br",null),l.default.createElement(_.default,{style:{width:"50%"},value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},prefix:l.default.createElement(j.default,{type:"user",style:{color:"#999"}}),addonAfter:l.default.createElement(j.default,{type:"search",onClick:function(){return e.getUserInfo()}})}),l.default.createElement(h.default,{rowKey:"id",columns:[{dataIndex:"id",title:"ID"},{dataIndex:"name",title:"名称",render:function(e,t){return l.default.createElement("a",{href:t.html_url,target:"_blank"},e)}},{dataIndex:"created_at",title:"创建时间"},{dataIndex:"updated_at",title:"更新时间"}],dataSource:[this.props.profile]}),l.default.createElement("h3",null,"参与模块"),l.default.createElement(v.default,{itemLayout:"horizontal",dataSource:this.state.repos,renderItem:function(e){return l.default.createElement(v.default.Item,null,l.default.createElement(v.default.Item.Meta,{title:l.default.createElement("a",{href:e.url,target:"_blank"},e.name),description:e.description}))}}))}}]),t}(l.default.PureComponent),t.contextTypes={app:p.default.object,ajax:p.default.object,seed:p.default.object},t.getState=function(e){return{profile:e.profile}},t.propTypes={profile:p.default.object},n),u=new y.default;u.seed.register("profile",function(e,t){return{profile:t.data}},{});var s=u.connect(r);u.run(e,s)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=u;var s=n(0),l=r(s),f=n(12),p=r(f),d=n(29),y=r(d),m=n(60),h=r(m),b=n(67),v=r(b),g=n(46),_=r(g),x=n(17),j=r(x);e.exports=t.default},1468:function(e,t){e.exports="# 简单插件\n\n> 示例Demo都应该从简到繁的顺序来阅读，如果本章节不了解，请先看上一个章节的示例。\n\n简单插件的基本要素：接口调用、组件更新。\n\n初始化Beatle实例app，在app环境中的所有组件，都可以通过context来访问app的核心模块，分别有app本身、seed 和 ajax。\n1. `app`，访问Beatle的API方法。\n2. `seed`，seed在应用外部维护一个数据作用域store，通过store可以实现app下组件之间的数据通信问题。\n3. `ajax`，统一的接口调用对象，提供`get`、`post`、`patch`、`put`、`delete`等多个方法\n \n+  纯组件, 通过state来管理数据状态\n\n```javascript\n  class Component extends React.Component {\n    state = {\n      profile: {}\n    }\n    componentDidMount() {\n      this.setState({\n        profile: {...}\n      })\n    }\n    render () {...}\n  }\n```\n\n+ Hoc组件，把数据状态通过props，传递给组件\n```javascript\n  class Component extends React.Component {\n    static propTypes = {\n      profile: React.PropTypes.object\n    }\n    render () {...}\n  }\n  // Hoc的原理\n  class HocComponent extends React.Component {\n    state = {\n      profile: {}\n    }\n    componentDidMount() {\n      this.setState({\n        profile: {...}\n      })\n    }\n    render () {\n      // 传递state作为组件的props\n      return (<Component {...this.state} />);\n    }\n  }\n```\n\n+ 视图, 有数据绑定的组件(后续统称为视图)，\n```javascript\n  // seed往store（数据作用域）中注册数据状态profile，seed.register(name, action, defaultValue);\n  app.seed.register(\n    'profile', \n    (prevStore, payload) => {\n      return payload.data\n    },\n    {}\n  );\n  function setProfile(data) {\n    // 通过seed.dispatch发起对store的更新，name为要更新的数据状态名称\n    app.seed.dispatch({\n      name: 'profile',\n      payload: {\n        data: data\n      }\n    })\n  }\n\n  // ！重要，用于连接组件和store，非装饰器方式为app.connect(View);\n  @connect\n  class View extends React.Component {\n    // ! 同样重要，当store每次有变更的时候，通过getState获取最新数据，注入到组件props中\n    static getState = state => {\n      return {\n        profile: state.profile\n      }\n    };\n    static propTypes = {\n      profile: React.PropTypes.object\n    }\n    componentDidMount() {\n      // 对于seed，组件内部也可以通过this.context.seed获取。\n      setProfile({...});\n    }\n    render () {...}\n  }\n```\n\n> 从视图中看，组件并不是完全干净，多了`static getState`和`setProfile`等步骤，这些要抽象到组件外部，通过数据模型可以做到，示例请参考[插件和数据通信](/beatle-projects/single/model)\n\n> 如果您以掌握以下示例用法，可以继续深入了解插件通过路由切换来实现局部模块刷新，请参考[路由插件](/beatle-projects/single/route)"},1469:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(1470),d=r(p),y=n(23),m=r(y),h=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){(0,d.default)(this._dom)}},{key:"render",value:function(){var e=this;return f.default.createElement("div",{ref:function(t){return e._dom=t}})}}]),t}(l.Component),u.routeOptions={doc:(0,m.default)(n(1471)),getIcon:function(e){return'<svg style="width: '+e+"px; height: "+e+'px;" viewBox="0 0 32 32" preserveAspectRatio="xMidYMid meet" focusable="false"><g viewBox="0 0 32 32"><ellipse cx="16" cy="15.21" rx="13.48" ry="5.26" fill="none" stroke="#2d3033" stroke-miterlimit="10"></ellipse><ellipse cx="16" cy="15.36" rx="5.26" ry="13.48" transform="translate(-5.54 10.06) rotate(-30)" fill="none" stroke="#2d3033" stroke-miterlimit="10"></ellipse><ellipse cx="15.96" cy="15.36" rx="13.48" ry="5.26" transform="translate(-5.32 21.5) rotate(-60)" fill="none" stroke="#2d3033" stroke-miterlimit="10"></ellipse><circle cx="16.08" cy="15.46" r="2" fill="#ff3a49"></circle></g></svg>'},title:"路由插件",summary:"插件多模块切换",layout:["consoleLayout","demoLayout"],value:3},c);t.default=h,e.exports=t.default},1470:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t,n,r,u,s=(n=t=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={name:"baqian"},r}return i(t,e),c(t,[{key:"componentDidMount",value:function(){this.props.getUserInfo(this.state.name)}},{key:"render",value:function(){var e=this;return l.default.createElement("div",null,l.default.createElement("h1",null,"Beatle版本：",this.context.app.version,l.default.createElement(w.default.Group,{style:{marginLeft:20}},l.default.createElement(w.default,{type:"primary"},"个人信息"),l.default.createElement(w.default,{onClick:function(){e.context.router.push(e.context.router.createLocation({pathname:"/repos",search:"?name="+e.state.name}))}},"参与模块"))),l.default.createElement("br",null),l.default.createElement(_.default,{style:{width:"50%"},value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},prefix:l.default.createElement(j.default,{type:"user",style:{color:"#999"}}),addonAfter:l.default.createElement(j.default,{type:"search",onClick:function(){return e.getUserInfo()}})}),l.default.createElement(h.default,{rowKey:"id",columns:[{dataIndex:"id",title:"ID"},{dataIndex:"name",title:"名称",render:function(e,t){return l.default.createElement("a",{href:t.html_url,target:"_blank"},e)}},{dataIndex:"created_at",title:"创建时间"},{dataIndex:"updated_at",title:"更新时间"}],dataSource:[this.props.profile]}))}}]),t}(l.default.PureComponent),t.contextTypes={app:p.default.object,router:p.default.object},t.propTypes={profile:p.default.object,getUserInfo:p.default.func},n),f=(u=r=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"componentDidMount",value:function(){this.props.getRepos(this.props.location.query.name||"baqian")}},{key:"render",value:function(){var e=this;return l.default.createElement("div",null,l.default.createElement("h1",null,"Beatle版本：",this.context.app.version,l.default.createElement(w.default.Group,{style:{marginLeft:20}},l.default.createElement(w.default,{onClick:function(){e.context.router.replace("/")}},"个人信息"),l.default.createElement(w.default,{type:"primary"},"参与模块"))),l.default.createElement("br",null),l.default.createElement(v.default,{itemLayout:"horizontal",dataSource:this.props.repos,renderItem:function(e){return l.default.createElement(v.default.Item,null,l.default.createElement(v.default.Item.Meta,{title:l.default.createElement("a",{href:e.url,target:"_blank"},e.name),description:e.description}))}}))}}]),t}(l.default.PureComponent),r.contextTypes={app:p.default.object,router:p.default.object},r.propTypes={location:p.default.object,repos:p.default.array,getRepos:p.default.func},u),d=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,c=Array(u),s=0;s<u;s++)c[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={profile:{},repos:[]},i=n,a(r,i)}return i(t,e),c(t,[{key:"getUserInfo",value:function(e){this.setState({profile:{exec:this.ajax.get("https://api.github.com/users/"+e),callback:function(e,t){return t.data}}})}},{key:"getRepos",value:function(e){var t=this;this.ajax.get("https://api.github.com/users/"+e+"/repos").then(function(e){t.setState({repos:e})})}}]),t}(y.default.BaseModel),m=new y.default({routeType:"localHistory"});m.model("user",d);var b=y.default.connect([function(e){return{profile:e.user.profile}},function(e,t,n){return{getUserInfo:n.user.getUserInfo}}],s),g=y.default.connect([{repos:"user.state.repos"},{getRepos:"user.actions.getRepos"}],f,!0);m.route("/",b),m.route("/repos",g),m.run(e)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=u;var s=n(0),l=r(s),f=n(12),p=r(f),d=n(29),y=r(d),m=n(60),h=r(m),b=n(67),v=r(b),g=n(46),_=r(g),x=n(17),j=r(x),O=n(40),w=r(O);e.exports=t.default},1471:function(e,t){e.exports="# 路由插件\n\n> 示例Demo都应该从简到繁的顺序来阅读，如果本章节不了解，请先看上一个章节的示例。\n\n每个路由对应一个完整的react组件。通过`app.route(path, Component)`注册成路由，路由切换可以通过npm包`history`提供的方法进行跳转，或者通过组件内部的`this.context.router`实例提供的方法来操作。\n\nBeatle封装`react-router`，保留路由配置的所有特性，`app.route(routeConfig)`注册路由，其中`routeConfig`为动态路由的配置。\n\n```javascript\n  class Component extends React.Component {\n    render() {...}\n  }\n  app.route({\n    path: '/',\n    component: Component\n  });\n  app.run();\n```\n\n> 关于路由的使用，参考Beatle核心模块[路由](/beatle-projects/core/route)"},1472:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(1473),d=r(p),y=n(23),m=r(y),h=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){(0,d.default)(this._dom)}},{key:"render",value:function(){var e=this;return f.default.createElement("div",{ref:function(t){return e._dom=t}})}}]),t}(l.Component),u.routeOptions={doc:(0,m.default)(n(1474)),getIcon:function(e){return'<svg style="width: '+e+"px; height: "+e+'px;" viewBox="0 0 32 32" preserveAspectRatio="xMidYMid meet" focusable="false"><g viewBox="0 0 32 32"><path d="M2.52,21.15a13.58,13.58,0,0,1,27.16,0" fill="none" stroke="#2d3033" stroke-linejoin="round"></path><circle cx="2.42" cy="21.19" r="2.09" fill="#ff3a49"></circle><circle cx="16" cy="21.19" r="2.09" fill="#2d3033"></circle><circle cx="25.4" cy="11.79" r="2.09" fill="#2d3033"></circle><circle cx="29.58" cy="21.19" r="2.09" fill="#00b4f0"></circle><line x1="16.1" y1="21.33" x2="25.35" y2="12.07" fill="none" stroke="#2d3033" stroke-linejoin="round"></line></g></svg>'},title:"插件与服务",summary:"插件复用业务逻辑",layout:["consoleLayout","demoLayout"],value:4},c);t.default=h,e.exports=t.default},1473:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){function t(){var e=this;return{getRepos:function(t,n){e.context.ajax.get("https://api.github.com/users/"+t+"/repos").then(function(e){n({repos:e})})}}}var n,r,u,s,f=(r=n=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={profile:{},name:"baqian",repos:{}},r}return i(t,e),c(t,[{key:"getUserInfo",value:function(){var e=this;this.context.user.getUserInfo(this.state.name,function(t){e.setState(t)})}},{key:"componentDidMount",value:function(){this.getUserInfo()}},{key:"render",value:function(){var e=this;return l.default.createElement("div",null,l.default.createElement("h1",null,"Beatle版本：",this.context.app.version),l.default.createElement("br",null),l.default.createElement(_.default,{style:{width:"50%"},value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},prefix:l.default.createElement(j.default,{type:"user",style:{color:"#999"}}),addonAfter:l.default.createElement(j.default,{type:"search",onClick:function(){return e.getUserInfo()}})}),l.default.createElement(h.default,{rowKey:"id",columns:[{dataIndex:"id",title:"ID"},{dataIndex:"name",title:"名称",render:function(e,t){return l.default.createElement("a",{href:t.html_url,target:"_blank"},e)}},{dataIndex:"created_at",title:"创建时间"},{dataIndex:"updated_at",title:"更新时间"}],dataSource:[this.state.profile]}),l.default.createElement("h3",null,"参与模块"),l.default.createElement(v.default,{itemLayout:"horizontal",dataSource:this.state.repos,renderItem:function(e){return l.default.createElement(v.default.Item,null,l.default.createElement(v.default.Item.Meta,{title:l.default.createElement("a",{href:e.url,target:"_blank"},e.name),description:e.description}))}}))}}]),t}(l.default.PureComponent),n.contextTypes={app:p.default.object,user:p.default.object},r);t.contextTypes={ajax:p.default.object};var d=(s=u=function(){function e(){o(this,e)}return c(e,[{key:"getUserInfo",value:function(e,t){var n=this;this.context.ajax.get("https://api.github.com/users/"+e).then(function(r){t({profile:r}),n.context.repos.getRepos(e,t)})}}]),e}(),u.contextTypes={ajax:p.default.object,repos:p.default.object},s),m=new y.default;m.service("repos",t),m.service("user",d),m.run(e,f)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=u;var s=n(0),l=r(s),f=n(12),p=r(f),d=n(29),y=r(d),m=n(60),h=r(m),b=n(67),v=r(b),g=n(46),_=r(g),x=n(17),j=r(x);e.exports=t.default},1474:function(e,t){e.exports="# 插件与服务\n\n> 示例Demo都应该从简到繁的顺序来阅读，如果本章节不了解，请先看上一个章节的示例。\n\n在[插件与数据通信](/beatle-projects/single/model) 中提到业务层逻辑，为了保证组件可复用，需要把业务层逻辑剥离到组件之外，包括 数据逻辑 和 计算逻辑。Beatle中的服务就是用于定义通用的计算逻辑。\n\n### 简单的服务定义\n1. `app.service(name, Service)`，注册服务\n2. `app.service(name)`，获取服务实例\n\n```javascript\n  class A {\n    data = {a: 1}\n  }\n  const b = (a) => {\n    return {\n      getValue(v) {\n        // a.data.a为a服务中的值\n        return a.data.a + v;\n      }\n    }\n  }\n  // 声明b服务依赖于a服务\n  b.contextTypes = {\n    a: React.PropTypes.object\n  }\n  app.service('a', A);\n  app.service('b', b);\n  const bService = app.service('b');\n  // 打印 3\n  console.log(bService.getValue(2));\n```\n\n### 服务的作用域\n\n服务的作用域分为3层，全局服务、应用级服务 和 组件级服务，通过组件的contextTypes注入服务时，优先级是 组件级 > 应用级 > 全局\n\n1. 全局服务，跨应用可共享。\n2. 应用级，只在应用内部可用。\n3. 组件级，可以传递到组件内部或者子组件，组件外部不可用。\n\n```javascript\n  app.service('a', () => 1, true); // 第三个参数表示注册到全局服务\n  app.service('a', () => 2);\n  class Component extends React.Component {\n    static contextTypes = {\n      // app是应用级服务\n      app: React.PropTypes.object,\n      // a全局和应用级都存在，应用优先级最高。\n      a: React.PropTypes.number,\n      // 组件级服务，组件外部不可用。\n      b: React.PropTypes.object\n    }\n  }\n  class B {\n    constructor() {\n      this.b = 3;\n    }\n  }\n  // 注入组件级的服务\n  app.view(Component, {b: B});\n```\n\n> 事实上，`app.view`是`app.connect`的加强版，可以在连接数据作用域的同时，可以注入组件级服务，同样是产出视图。"},1475:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(23),d=r(p),y=n(1476),m=r(y),h=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){(0,m.default)(this._dom)}},{key:"render",value:function(){var e=this;return f.default.createElement("div",{ref:function(t){return e._dom=t}})}}]),t}(l.Component),u.routeOptions={doc:(0,d.default)(n(1490)),getIcon:function(e){return'<svg style="width: '+e+"px; height: "+e+'px;" viewBox="0 0 32 32" preserveAspectRatio="xMidYMid meet" focusable="false"><g viewBox="0 0 32 32"><polyline points="5.53 20.36 5.53 5.5 20.39 5.5" fill="none" stroke="#2d3033" stroke-miterlimit="10"></polyline><polyline points="26.47 11.3 26.47 26.15 11.61 26.15" fill="none" stroke="#2d3033" stroke-miterlimit="10"></polyline><circle cx="5.53" cy="20.36" r="2" fill="#ff3a49"></circle><circle cx="11.61" cy="26.15" r="2" fill="#ff3a49"></circle><circle cx="26.47" cy="11.3" r="2" fill="#ff3a49"></circle><circle cx="26.47" cy="26.15" r="2" fill="#00b4f0"></circle><circle cx="5.53" cy="5.5" r="2" fill="#00b4f0"></circle><circle cx="20.39" cy="5.5" r="2" fill="#ff3a49"></circle></g></svg>'},title:"迁移dva应用",summary:"dva",layout:["consoleLayout","demoLayout"],value:6},c);t.default=h,e.exports=t.default},1476:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=new d.default({name:"dva",routeType:"hashHistory"});t.use(y.LoadingBar.create());var r=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"render",value:function(){return l.default.createElement(f.Router,{history:this.props.history},l.default.createElement(f.Route,{path:"/",component:n(1477)},l.default.createElement(f.Route,{path:"/home",component:n(1480)}),l.default.createElement(f.Route,{path:"/users",component:n(1482)})))}}]),t}(l.default.PureComponent);t.run(e,r)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=u;var s=n(0),l=r(s),f=n(98),p=n(29),d=r(p),y=n(81);e.exports=t.default},1477:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.children,n=e.location;return i.default.createElement("div",{className:c.default.normal},i.default.createElement(f.LoadingBar,{style:{position:"fixed",height:2,top:0,zIndex:999,backgroundColor:"#20C1EA"},updateTime:100,maxProgress:95,progressIncrease:10}),i.default.createElement("h1",null,"From Dva to Beatle Refactor in Demo"),i.default.createElement(l.default,{location:n}),i.default.createElement("div",{className:c.default.content},i.default.createElement("div",{className:c.default.main},t)))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=r(a),u=n(1478),c=r(u),s=n(1479),l=r(s),f=n(81);t.default=o,e.exports=t.default},1478:function(e,t){},1479:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.location;return i.default.createElement(c.default,{selectedKeys:[t.pathname],mode:"horizontal",theme:"dark"},i.default.createElement(c.default.Item,{key:"/users"},i.default.createElement(f.Link,{to:"/users"},i.default.createElement(l.default,{type:"bars"}),"Users")),i.default.createElement(c.default.Item,{key:"/home"},i.default.createElement(f.Link,{to:"/home"},i.default.createElement(l.default,{type:"home"}),"Home")),i.default.createElement(c.default.Item,{key:"/404"},i.default.createElement(f.Link,{to:"/page-you-dont-know"},i.default.createElement(l.default,{type:"frown-circle"}),"404")),i.default.createElement(c.default.Item,{key:"/antd"},i.default.createElement("a",{href:"https://github.com/dvajs/dva"},"dva")))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=r(a),u=n(275),c=r(u),s=n(17),l=r(s),f=n(98);t.default=(0,f.withRouter)(o),e.exports=t.default},1480:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){return i.default.createElement("div",{className:c.default.normal},i.default.createElement("h1",{className:c.default.title},"Yay! Welcome to dva!"),i.default.createElement("div",{className:c.default.welcome}),i.default.createElement("ul",{className:c.default.list},i.default.createElement("li",null,i.default.createElement("a",{href:"https://github.com/dvajs/dva-docs/blob/master/v1/en-us/getting-started.md"},"Getting Started"))))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=r(a),u=n(1481),c=r(u);t.default=o,e.exports=t.default},1481:function(e,t){},1482:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){return i.default.createElement("div",{className:c.default.normal},i.default.createElement(l.default,null))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=r(a),u=n(1483),c=r(u),s=n(1484),l=r(s);t.default=o,e.exports=t.default},1483:function(e,t){},1484:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.users;return{list:t.list,total:t.total,page:t.page}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),l=r(s),f=n(29),p=r(f),d=n(60),y=r(d),m=n(187),h=r(m),b=n(1485),v=r(b),g=n(40),_=r(g),x=n(1486),j=r(x),O=n(1487),w=r(O),k=n(1488),P=r(k),E=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"componentDidMount",value:function(){this.props.dispatch({name:"users.fetch",payload:{page:1}})}},{key:"render",value:function(){function e(e){a({name:"users.remove",payload:e})}function t(e){a(f.push({pathname:"/users",query:{page:e}}))}function n(e,t){a({name:"users.patch",payload:{id:e,values:t}})}function r(e){a({name:"users.create",payload:e})}var o=this.props,a=o.dispatch,i=o.list,u=o.loading,c=o.total,s=o.page,f=o.router,p=[{title:"Name",dataIndex:"name",key:"name",render:function(e){return l.default.createElement("a",{href:""},e)}},{title:"Email",dataIndex:"email",key:"email"},{title:"Website",dataIndex:"website",key:"website"},{title:"Operation",key:"operation",render:function(t,r){return l.default.createElement("span",{className:j.default.operation},l.default.createElement(w.default,{record:r,onOk:n.bind(null,r.id)},l.default.createElement("a",null,"Edit")),l.default.createElement(v.default,{title:"Confirm to delete?",onConfirm:e.bind(null,r.id)},l.default.createElement("a",{href:""},"Delete")))}}];return l.default.createElement("div",{className:j.default.normal},l.default.createElement("div",null,l.default.createElement("div",{className:j.default.create},l.default.createElement(w.default,{record:{},onOk:r},l.default.createElement(_.default,{type:"primary"},"Create User"))),l.default.createElement(y.default,{columns:p,dataSource:i,loading:u,rowKey:function(e){return e.id},pagination:!1}),l.default.createElement(h.default,{className:"ant-table-pagination",total:c,current:s,pageSize:30,onChange:t})))}}]),t}(l.default.PureComponent),R=p.default.getApp("dva");R.model("users",P.default),t.default=R.view({bindings:[u],hookActions:[{name:"fetch",getParams:function(e){return e.location.query}}]},E),e.exports=t.default},1486:function(e,t){},1487:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u,c,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),p=r(f),d=n(12),y=r(d),m=n(269),h=r(m),b=n(481),v=r(b),g=n(46),_=r(g),x=v.default.Item,j=(c=u=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.showModelHandler=function(e){e&&e.stopPropagation(),n.setState({visible:!0})},n.hideModelHandler=function(){n.setState({visible:!1})},n.okHandler=function(){var e=n.props.onOk;n.props.form.validateFields(function(t,r){t||(e(r),n.hideModelHandler())})},n.state={visible:!1},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.children,t=this.props.form.getFieldDecorator,n=this.props.record,r=n.name,o=n.email,a=n.website,i={labelCol:{span:6},wrapperCol:{span:14}};return p.default.createElement("span",null,p.default.createElement("span",{onClick:this.showModelHandler},e),p.default.createElement(h.default,{title:"Edit User",visible:this.state.visible,onOk:this.okHandler,onCancel:this.hideModelHandler},p.default.createElement(v.default,{layout:"horizontal",onSubmit:this.okHandler},p.default.createElement(x,s({},i,{label:"Name"}),t("name",{initialValue:r})(p.default.createElement(_.default,null))),p.default.createElement(x,s({},i,{label:"Email"}),t("email",{initialValue:o})(p.default.createElement(_.default,null))),p.default.createElement(x,s({},i,{label:"Website"}),t("website",{initialValue:a})(p.default.createElement(_.default,null))))))}}]),t}(f.Component),u.propTypes={onOk:y.default.fun,form:y.default.object,record:y.default.object,children:y.default.node},c);t.default=v.default.create()(j),e.exports=t.default},1488:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1489),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o);t.default={namespace:"users",state:{list:[],total:null,page:null},reducers:{save:function(e,t){var n=t.data,o=t.total,a=t.page;return r({},e,{list:n,total:o,page:a})}},effects:{fetch:regeneratorRuntime.mark(function e(t,n){var r,o,i=t.payload.page,u=void 0===i?1:i,c=n.call,s=n.put;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(a.fetch,{page:u});case 2:return r=e.sent,o=r.data,e.next=6,s({type:"save",payload:{data:o,total:o.length,page:parseInt(u,10)}});case 6:case"end":return e.stop()}},e,this)}),remove:regeneratorRuntime.mark(function e(t,n){var r=t.payload,o=n.call,i=n.put;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(a.remove,r);case 2:return e.next=4,i({name:"reload"});case 4:case"end":return e.stop()}},e,this)}),patch:regeneratorRuntime.mark(function e(t,n){var r=t.payload,o=r.id,i=r.values,u=n.call,c=n.put;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(a.patch,o,i);case 2:return e.next=4,c({name:"reload"});case 4:case"end":return e.stop()}},e,this)}),create:regeneratorRuntime.mark(function e(t,n){var r=t.payload,o=n.call,i=n.put;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(a.create,r);case 2:return e.next=4,i({name:"reload"});case 4:case"end":return e.stop()}},e,this)}),reload:regeneratorRuntime.mark(function e(t,n){var r,o=n.put,a=n.select;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(function(e){return e.users.page});case 2:return r=e.sent,e.next=5,o({name:"fetch",payload:{page:r}});case 5:case"end":return e.stop()}},e,this)})}},e.exports=t.default},1489:function(e,t,n){"use strict";function r(){return new Promise(function(e){setTimeout(function(){e({data:u})},300)})}function o(e){return new Promise(function(t){setTimeout(function(){var n=u.findIndex(function(t){return t.id===e});n>-1&&u.splice(n-1,1),t({data:u})},300)})}function a(e,t){return new Promise(function(n){setTimeout(function(){var r=u.findIndex(function(t){return t.id===e});r>-1&&Object.assign(u[r],t),n({data:u})},300)})}function i(e){return new Promise(function(t){setTimeout(function(){e.id=u[u.length-1].id+1,u.push(e),t({data:u})},300)})}Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=r,t.remove=o,t.patch=a,t.create=i;var u=[{id:0,name:"baqian",email:"st403471258@gmail.com",website:"https://api.github.com/users/baqian"}]},1490:function(e,t){e.exports="# 迁移dva\n\n> 示例Demo都应该从简到繁的顺序来阅读，如果本章节不了解，请先看上一个章节的示例。\n\nDva 同 Beatle初衷一样，集成React的最佳解决方案，帮助实现前端全流程开发。\n\n### Dva问题分析\n1. 对于数据状态管理，沿用redux编码思路，仍保留state、action、reducer的概念，而state和reducer按照目的，组合到各个对象model中。\n2. 新增effect用于处理异步的逻辑，最终触发reducer来变更数据，`store.dispatch`可以跳转到，所以在同一个model 中effect和reducer不能重名。\n3. dva提供多种脚手架组合类库，但没有封装为标准的API输出。\n\n目前Beatle基本兼容Dva对于model的封装，如下举例：\n\n```javascript\n  const model = {\n    namespace: 'test', // Beatle中改为displayName\n    state: {\n      name: 'a'\n    },\n    reducers: {\n      save: (state, action) => {\n        // 在Beatle中，第二个参数action.payload\n        return action.payload.name;\n      }\n    },\n    effects: {\n      * setName({name}, {put}) {\n        yield put({\n          type: 'save',\n          payload: {\n            name: name\n          }\n        })\n      }\n    }\n  }\n  store.dispatch({\n    type: 'test/setName', // Beatle中type为'test.setName'\n    name: 'a'\n  });\n```\n\n> Dva Real World Example\nsee: https://github.com/dvajs/dva/blob/master/examples/user-dashboard/"},1491:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(23),d=r(p),y=n(1492),m=r(y);m.default.routeOptions={title:"应用集成",summary:"数据模拟，加载进度条"};var h=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this;return f.default.createElement("div",{ref:function(t){return e._dom=t}})}}]),t}(l.Component),u.routeOptions={doc:(0,d.default)(n(1493)),getIcon:function(e){return'<svg style="width: '+e+"px; height: "+e+'px;" viewBox="0 0 32 32" preserveAspectRatio="xMidYMid meet" focusable="false"><g viewBox="0 0 32 32"><path d="M2.52,21.15a13.58,13.58,0,0,1,27.16,0" fill="none" stroke="#2d3033" stroke-linejoin="round"></path><circle cx="2.42" cy="21.19" r="2.09" fill="#ff3a49"></circle><circle cx="16" cy="21.19" r="2.09" fill="#2d3033"></circle><circle cx="25.4" cy="11.79" r="2.09" fill="#2d3033"></circle><circle cx="29.58" cy="21.19" r="2.09" fill="#00b4f0"></circle><line x1="16.1" y1="21.33" x2="25.35" y2="12.07" fill="none" stroke="#2d3033" stroke-linejoin="round"></line></g></svg>'},title:"应用集成",summary:"数据模拟，加载进度条",layout:["consoleLayout","demoLayout"],value:2,component:m.default},c);t.default=h,e.exports=t.default},1492:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u,c,s,l,f,p,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=n(0),m=r(y),h=n(12),b=r(h),v=n(29),g=r(v),_=n(81),x=n(60),j=r(x),O=n(67),w=r(O),k=n(46),P=r(k),E=n(17),R=r(E),M=n(40),T=r(M),C=(c=u=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={name:"baqian"},r}return i(t,e),d(t,[{key:"getUserInfo",value:function(){var e=this;this.context.ajax.get("https://api.github.com/users/"+this.state.name).then(function(t){e.context.seed.dispatch({name:"profile",payload:{data:t}})})}},{key:"componentDidMount",value:function(){this.getUserInfo()}},{key:"render",value:function(){var e=this;return m.default.createElement("div",null,m.default.createElement("h1",null,"Beatle版本：",this.context.app.version,m.default.createElement(T.default.Group,{style:{marginLeft:20}},m.default.createElement(T.default,{type:"primary"},"个人信息"),m.default.createElement(T.default,{onClick:function(){var t=e.context.app.route("/repos");e.context.router.push(e.context.router.createLocation({pathname:e.context.app.getResolvePath(t),search:"?name="+e.state.name}))}},"参与模块"))),m.default.createElement("br",null),m.default.createElement(P.default,{style:{width:"50%"},value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},prefix:m.default.createElement(R.default,{type:"user",style:{color:"#999"}}),addonAfter:m.default.createElement(R.default,{type:"search",onClick:function(){return e.getUserInfo()}})}),m.default.createElement(j.default,{rowKey:"id",columns:[{dataIndex:"id",title:"ID"},{dataIndex:"name",title:"名称",render:function(e,t){return m.default.createElement("a",{href:t.html_url,target:"_blank"},e)}},{dataIndex:"created_at",title:"创建时间"},{dataIndex:"updated_at",title:"更新时间"}],dataSource:[this.props.profile]}))}}]),t}(m.default.PureComponent),u.contextTypes={app:b.default.object,seed:b.default.object,ajax:b.default.object,router:b.default.object},u.getState=function(e){return{profile:e.profile}},u.propTypes={profile:b.default.object},u.defaultProps={profile:{}},c),S=(l=s=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,c=Array(u),s=0;s<u;s++)c[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={repos:{}},i=n,a(r,i)}return i(t,e),d(t,[{key:"getRepos",value:function(){var e=this,t=this.props.location,n=t.query.name||"baqian";this.context.ajax.get("https://api.github.com/users/"+n+"/repos").then(function(t){e.setState({repos:t})})}},{key:"componentDidMount",value:function(){this.getRepos()}},{key:"render",value:function(){var e=this;return m.default.createElement("div",null,m.default.createElement("h1",null,"Beatle版本：",this.context.app.version,m.default.createElement(T.default.Group,{style:{marginLeft:20}},m.default.createElement(T.default,{onClick:function(){e.context.router.replace(e.context.app.getResolvePath(e.context.app.route("/profile")))}},"个人信息"),m.default.createElement(T.default,{type:"primary"},"参与模块"))),m.default.createElement("br",null),m.default.createElement(w.default,{itemLayout:"horizontal",dataSource:this.state.repos,renderItem:function(e){return m.default.createElement(w.default.Item,null,m.default.createElement(w.default.Item.Meta,{title:m.default.createElement("a",{href:e.url,target:"_blank"},e.name),description:e.description}))}}))}}]),t}(m.default.PureComponent),s.contextTypes={app:b.default.object,ajax:b.default.object,router:b.default.object},s.propTypes={location:b.default.object},l),A=(p=f=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),d(t,[{key:"render",value:function(){var e=this.props.children,t=this.props.children&&this.props.children.props.route,n=(0,_.getLayout)({layoutOption:this.layoutOption,layout:"ConsoleLayout",route:t},e);return m.default.createElement("div",null,n)}},{key:"layoutOption",get:function(){var e=this.context.app.getRoutes()[0];return{routes:e.childRoutes,subRoutes:{},Link:g.default.Link,Sider:{getResolvePath:g.default.getResolvePath,brand:{path:this.context.app.getResolvePath(e),title:"Demo",logo:"//img.alicdn.com/tfs/TB14dINRpXXXXcyXXXXXXXXXXXX-64-64.png?t=1517212583908"}},BreadCrumb:!1,Header:!1,Footer:!1}}}]),t}(m.default.PureComponent),f.contextTypes={app:b.default.object},f.propTypes={children:b.default.element},p),B=new g.default;B.seed.register("profile",function(e,t){return{profile:t.data}},{});var I=g.default.connect(C),N=g.default.connect(S);B.route("/",A,{childRoutes:[{title:"个人信息",path:"/profile",component:I},{title:"参与模块",path:"/repos",component:N}]}),t.default=B,e.exports=t.default},1493:function(e,t){e.exports="# 应用集成\n\n> 示例Demo都应该从简到繁的顺序来阅读，如果本章节不了解，请先看上一个章节的示例。\n\n未完待续..."},1494:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(23),d=r(p),y=n(1495),m=r(y);m.default.routeOptions={title:"高级应用",summary:"MVVM最佳方案"};var h=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this;return f.default.createElement("div",{ref:function(t){return e._dom=t}})}}]),t}(l.Component),u.routeOptions={doc:(0,d.default)(n(1496)),getIcon:function(e){return'<svg style="width: '+e+"px; height: "+e+'px;" viewBox="0 0 32 32" preserveAspectRatio="xMidYMid meet" focusable="false"><g viewBox="0 0 32 32"><rect x="7.19" y="7.19" width="17.62" height="17.62" transform="translate(16 -6.63) rotate(45)" fill="none" stroke="#2d3033" stroke-linecap="round" stroke-linejoin="round"></rect><circle cx="16.06" cy="3.09" r="2" fill="#ff3a49"></circle><circle cx="3.77" cy="16" r="2" fill="#00b4f0"></circle><circle cx="16.06" cy="28.77" r="2" fill="#ff3a49"></circle><circle cx="28.68" cy="16" r="2" fill="#00b4f0"></circle><circle cx="16.23" cy="16" r="2" fill="#2d3033"></circle></g></svg>'},title:"高级应用",summary:"MVVM最佳方案",layout:["consoleLayout","demoLayout"],value:3,component:m.default},c);t.default=h,e.exports=t.default},1495:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),s=r(c),l=n(29),f=r(l),p=new f.default,d=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return s.default.createElement("h1",null,"Hello World!")}}]),t}(s.default.PureComponent);p.route("/",d),t.default=p,e.exports=t.default},1496:function(e,t){e.exports="# 高级应用\n\n> 示例Demo都应该从简到繁的顺序来阅读，如果本章节不了解，请先看上一个章节的示例。\n\n未完待续..."},1497:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(23),d=r(p),y=n(1498),m=r(y);m.default.routeOptions={title:"迁移mobx应用",summary:"mobx"};var h=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this;return f.default.createElement("div",{ref:function(t){return e._dom=t}})}}]),t}(l.Component),u.routeOptions={doc:(0,d.default)(n(1499)),getIcon:function(e){return'<svg style="width: '+e+"px; height: "+e+'px;" viewBox="0 0 32 32" preserveAspectRatio="xMidYMid meet" focusable="false"><g viewBox="0 0 32 32"><polyline points="5.53 20.36 5.53 5.5 20.39 5.5" fill="none" stroke="#2d3033" stroke-miterlimit="10"></polyline><polyline points="26.47 11.3 26.47 26.15 11.61 26.15" fill="none" stroke="#2d3033" stroke-miterlimit="10"></polyline><circle cx="5.53" cy="20.36" r="2" fill="#ff3a49"></circle><circle cx="11.61" cy="26.15" r="2" fill="#ff3a49"></circle><circle cx="26.47" cy="11.3" r="2" fill="#ff3a49"></circle><circle cx="26.47" cy="26.15" r="2" fill="#00b4f0"></circle><circle cx="5.53" cy="5.5" r="2" fill="#00b4f0"></circle><circle cx="20.39" cy="5.5" r="2" fill="#ff3a49"></circle></g></svg>'},title:"迁移mobx应用",summary:"mobx",layout:["consoleLayout","demoLayout"],value:6,component:m.default},c);t.default=h,e.exports=t.default},1498:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t,n,r,o){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0});var s,l,f,p,d,y,m,h,b,v,g,_,x,j=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),O=n(0),w=r(O),k=n(12),P=r(k),E=n(29),R=r(E),M=n(81),T=n(274),C=r(T),S=n(60),A=r(S),B=n(67),I=r(B),N=n(46),L=r(N),D=n(17),q=r(D),X=n(40),z=r(X),H=(s=function(e){function t(){var e,n,r,u;a(this,t);for(var c=arguments.length,s=Array(c),p=0;p<c;p++)s[p]=arguments[p];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),o(r,"profile",l,r),o(r,"repos",f,r),u=n,i(r,u)}return u(t,e),j(t,[{key:"getUserInfo",value:function(e){var t=this;return this.ajax.get("https://api.github.com/users/"+e).then(function(e){t.profile=e})}},{key:"getRepos",value:function(e){var t=this;return this.ajax.get("https://api.github.com/users/"+e+"/repos").then(function(e){t.repos=e})}},{key:"reposList",get:function(){return this.repos}}]),t}(R.default.BaseModel),l=c(s.prototype,"profile",[E.observable],{enumerable:!0,initializer:function(){return{}}}),f=c(s.prototype,"repos",[E.observable],{enumerable:!0,initializer:function(){return[]}}),c(s.prototype,"reposList",[E.computed],Object.getOwnPropertyDescriptor(s.prototype,"reposList"),s.prototype),c(s.prototype,"getUserInfo",[E.action],Object.getOwnPropertyDescriptor(s.prototype,"getUserInfo"),s.prototype),c(s.prototype,"getRepos",[E.action],Object.getOwnPropertyDescriptor(s.prototype,"getRepos"),s.prototype),s),F=(p=(0,E.observer)({app:"mobx",inject:["user"]}))((m=y=function(e){function t(e,n){a(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={name:"baqian"},r}return u(t,e),j(t,[{key:"componentDidMount",value:function(){this.props.user.getUserInfo(this.state.name)}},{key:"render",value:function(){var e=this;return w.default.createElement("div",null,w.default.createElement("h1",null,"From Mobx to Beatle Refactor in Demo",w.default.createElement(z.default.Group,{style:{marginLeft:20}},w.default.createElement(z.default,{type:"primary"},"个人信息"),w.default.createElement(z.default,{onClick:function(){var t=e.context.app.route("/repos");e.context.router.push(e.context.router.createLocation({pathname:e.context.app.getResolvePath(t),search:"?name="+e.state.name}))}},"参与模块"))),w.default.createElement("br",null),w.default.createElement(L.default,{style:{width:"50%"},value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},prefix:w.default.createElement(q.default,{type:"user",style:{color:"#999"}}),addonAfter:w.default.createElement(q.default,{type:"search",onClick:function(){return e.props.user.getUserInfo(e.state.name)}})}),w.default.createElement(A.default,{rowKey:"id",columns:[{dataIndex:"id",title:"ID"},{dataIndex:"name",title:"名称",render:function(e,t){return w.default.createElement("a",{href:t.html_url,target:"_blank"},e)}},{dataIndex:"created_at",title:"创建时间"},{dataIndex:"updated_at",title:"更新时间"}],dataSource:[this.props.user.profile]}))}}]),t}(w.default.PureComponent),y.contextTypes={app:P.default.object,router:P.default.object},y.propTypes={user:P.default.object},d=m))||d,U=(h=(0,E.observer)({app:"mobx",inject:{repos:"user.state.repos",getRepos:"user.actions.getRepos"}}))((g=v=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),j(t,[{key:"componentDidMount",value:function(){var e=this.props.location,t=e.query.name||"baqian";this.props.getRepos(t)}},{key:"render",value:function(){var e=this;return w.default.createElement("div",null,w.default.createElement("h1",null,"From Mobx to Beatle Refactor in Demo",w.default.createElement(z.default.Group,{style:{marginLeft:20}},w.default.createElement(z.default,{onClick:function(){e.context.router.replace(e.context.app.getResolvePath(e.context.app.route("/profile")))}},"个人信息"),w.default.createElement(z.default,{type:"primary"},"参与模块"))),w.default.createElement("br",null),w.default.createElement(I.default,{itemLayout:"horizontal",dataSource:this.props.repos,renderItem:function(e){return w.default.createElement(I.default.Item,null,w.default.createElement(I.default.Item.Meta,{title:w.default.createElement("a",{href:e.url,target:"_blank"},e.name),description:e.description}))}}))}}]),t}(w.default.PureComponent),v.contextTypes={app:P.default.object,router:P.default.object},v.propTypes={location:P.default.object,repos:P.default.array,getRepos:P.default.func},b=g))||b,W=(x=_=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),j(t,[{key:"render",value:function(){var e=this.context.app.getRoutes()[0],t={routes:e.childRoutes,menusMap:{},Link:R.default.Link,getResolvePath:R.default.getResolvePath,brand:{path:this.context.app.getResolvePath(e),title:"Demo",logo:"//img.alicdn.com/tfs/TB14dINRpXXXXcyXXXXXXXXXXXX-64-64.png?t=1517212583908"}};return w.default.createElement(C.default,{className:"ant-layout-has-sider"},w.default.createElement(C.default.Sider,{width:256},w.default.createElement(M.Sider,t)),w.default.createElement(C.default,null,w.default.createElement(C.default.Content,null,this.props.children)))}}]),t}(w.default.PureComponent),_.contextTypes={app:P.default.object},_.propTypes={children:P.default.element},x),V=new R.default({name:"mobx"});V.model("user",H),V.route("/",W,{childRoutes:[{title:"个人信息",path:"/profile",component:F},{title:"参与模块",path:"/repos",component:U}]}),t.default=V,e.exports=t.default},1499:function(e,t){e.exports="# 迁移Mobx\n\n> 示例Demo都应该从简到繁的顺序来阅读，如果本章节不了解，请先看上一个章节的示例。\n\n虽然Mobx和Beatle有很大区别，但从响应式的特性上2个框架都是支持的，基于这一点，Beatle实现了Mobx的核心的几个装饰器，迁移Mobx应用需要有少量代码改造，而使用Beatle将带来更多的便利。\n\n始终需要记得，Beatle是实现`前端全流程开发`的框架。换句话说，是基于React开发的全家桶。\n\n### 支持Mobox的装饰器\n+ 响应式数据\n 1. observable，转变数据状态为可观察序列\n 2. computed，转变返回的数据状态的函数为可观察序列\n 3. action，观察函数调用后，其可观察的数据状态是否发生了变更，变更则通知已订阅的观察者。\n+ 响应式组件\n 1. observer + inject，订阅观察序列，当接收到通知时，驱动组件重新渲染。\n\n ```javascript\n  import React from 'react';\n  import {BaseModel, observable, computed, action} from 'beatle';\n  class Model extends BaseModel {\n    static displayName = 'model';\n    @observable\n    name = '';\n    @computed\n    get time() {\n      // 每次获取最新\n      return new Date().getTime();\n    }\n    @action\n    setName() {\n      // 可接收promise或者同步数据\n      return this.ajax.get('https://api.github.com/users/baqian').then(res => {\n        this.name = res.name;\n      });\n    }\n  }\n\n  @observer({\n    inject: ['model']\n  })\n  export class Component extends React.Component {\n    static propTypes = {\n      model: React.PropTypes.object\n    }\n    ...\n  }\n```"},1500:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(23),d=r(p),y=n(1501),m=r(y);m.default.routeOptions={title:"简单应用",summary:"应用实现路由切换和数据通信"};var h=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this;return f.default.createElement("div",{ref:function(t){return e._dom=t}})}}]),t}(l.Component),u.routeOptions={doc:(0,d.default)(n(1502)),getIcon:function(e){return'<svg style="width: '+e+"px; height: "+e+'px;" viewBox="0 0 32 32" preserveAspectRatio="xMidYMid meet" focusable="false"><g viewBox="0 0 32 32"><polyline points="5.53 20.36 5.53 5.5 20.39 5.5" fill="none" stroke="#2d3033" stroke-miterlimit="10"></polyline><polyline points="26.47 11.3 26.47 26.15 11.61 26.15" fill="none" stroke="#2d3033" stroke-miterlimit="10"></polyline><circle cx="5.53" cy="20.36" r="2" fill="#ff3a49"></circle><circle cx="11.61" cy="26.15" r="2" fill="#ff3a49"></circle><circle cx="26.47" cy="11.3" r="2" fill="#ff3a49"></circle><circle cx="26.47" cy="26.15" r="2" fill="#00b4f0"></circle><circle cx="5.53" cy="5.5" r="2" fill="#00b4f0"></circle><circle cx="20.39" cy="5.5" r="2" fill="#ff3a49"></circle></g></svg>'},title:"简单应用",summary:"应用实现路由切换和数据通信",layout:["consoleLayout","demoLayout"],value:1,component:m.default},c);t.default=h,e.exports=t.default},1501:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u,c,s,l,f,p,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=n(0),m=r(y),h=n(12),b=r(h),v=n(29),g=r(v),_=n(81),x=n(274),j=r(x),O=n(60),w=r(O),k=n(67),P=r(k),E=n(46),R=r(E),M=n(17),T=r(M),C=n(40),S=r(C),A=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,c=Array(u),s=0;s<u;s++)c[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={profile:{},repos:[]},i=n,a(r,i)}return i(t,e),d(t,[{key:"getUserInfo",value:function(e){this.setState({profile:{exec:this.ajax.get("https://api.github.com/users/"+e),callback:function(e,t){return t.data}}})}},{key:"getRepos",value:function(e){var t=this;this.ajax.get("https://api.github.com/users/"+e+"/repos").then(function(e){t.setState({repos:e})})}}]),t}(g.default.BaseModel),B=(c=u=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={name:"baqian"},r}return i(t,e),d(t,[{key:"componentDidMount",value:function(){this.props.getUserInfo(this.state.name)}},{key:"render",value:function(){var e=this;return m.default.createElement("div",null,m.default.createElement("h1",null,"Beatle版本：",this.context.app.version,m.default.createElement(S.default.Group,{style:{marginLeft:20}},m.default.createElement(S.default,{type:"primary"},"个人信息"),m.default.createElement(S.default,{onClick:function(){var t=e.context.app.route("/repos");e.context.router.push(e.context.router.createLocation({pathname:e.context.app.getResolvePath(t),search:"?name="+e.state.name}))}},"参与模块"))),m.default.createElement("br",null),m.default.createElement(R.default,{style:{width:"50%"},value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},prefix:m.default.createElement(T.default,{type:"user",style:{color:"#999"}}),addonAfter:m.default.createElement(T.default,{type:"search",onClick:function(){return e.props.getUserInfo(e.state.name)}})}),m.default.createElement(w.default,{rowKey:"id",columns:[{dataIndex:"id",title:"ID"},{dataIndex:"name",title:"名称",render:function(e,t){return m.default.createElement("a",{href:t.html_url,target:"_blank"},e)}},{dataIndex:"created_at",title:"创建时间"},{dataIndex:"updated_at",title:"更新时间"}],dataSource:[this.props.profile]}))}}]),t}(m.default.PureComponent),u.contextTypes={app:b.default.object,router:b.default.object},u.propTypes={profile:b.default.object,getUserInfo:b.default.func},c),I=(l=s=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),d(t,[{key:"componentDidMount",value:function(){var e=this.props.location,t=e.query.name||"baqian";this.props.getRepos(t)}},{key:"render",value:function(){var e=this;return m.default.createElement("div",null,m.default.createElement("h1",null,"Beatle版本：",this.context.app.version,m.default.createElement(S.default.Group,{style:{marginLeft:20}},m.default.createElement(S.default,{onClick:function(){e.context.router.replace(e.context.app.getResolvePath(e.context.app.route("/profile")))}},"个人信息"),m.default.createElement(S.default,{type:"primary"},"参与模块"))),m.default.createElement("br",null),m.default.createElement(P.default,{itemLayout:"horizontal",dataSource:this.props.repos,renderItem:function(e){return m.default.createElement(P.default.Item,null,m.default.createElement(P.default.Item.Meta,{title:m.default.createElement("a",{href:e.url,target:"_blank"},e.name),description:e.description}))}}))}}]),t}(m.default.PureComponent),s.contextTypes={app:b.default.object,router:b.default.object},s.propTypes={location:b.default.object,repos:b.default.array,getRepos:b.default.func},l),N=(p=f=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),d(t,[{key:"render",value:function(){var e=this.context.app.getRoutes()[0],t={routes:e.childRoutes,menusMap:{},Link:g.default.Link,getResolvePath:g.default.getResolvePath,brand:{path:this.context.app.getResolvePath(e),title:"Demo",logo:"//img.alicdn.com/tfs/TB14dINRpXXXXcyXXXXXXXXXXXX-64-64.png?t=1517212583908"}};return m.default.createElement(j.default,{className:"ant-layout-has-sider"},m.default.createElement(j.default.Sider,{width:256},m.default.createElement(_.Sider,t)),m.default.createElement(j.default,null,m.default.createElement(j.default.Content,null,this.props.children)))}}]),t}(m.default.PureComponent),f.contextTypes={app:b.default.object},f.propTypes={children:b.default.element},p),L=new g.default;L.model("user",A);var D=g.default.connect("user",B,!0),q=g.default.connect("user",I,!0);L.route("/",N,{childRoutes:[{title:"个人信息",path:"/profile",component:D},{title:"参与模块",path:"/repos",component:q}]}),t.default=L,e.exports=t.default},1502:function(e,t){e.exports="# 简单应用\n\n> 示例Demo都应该从简到繁的顺序来阅读，如果本章节不了解，请先看上一个章节的示例。\n\nSpa应用基本要素包括，路由视图、接口调用 和 数据通信。\n1. `app.connect(modelName, ReactComponent): routeView`，创建路由试图，`app.model`注册的数据模型，通过`app.connect`注入到组件中，通过props来访问。\n2. `app.route(path, routeView): void`，注册路由, 也可以通过`app.route([routeConfig])`注册，其中`routeConfig`参考[react-router](https://react-guide.github.io/react-router-cn/docs/guides/basics/RouteConfiguration.html)动态路由配置\n3. `app.ajax.[get|post|put|delete](url, data): Promise`，发起接口调用\n4. `app.model(modelName, Model): void`，注册数据模型，通过数据模型管理 数据状态和数据行为。\n5. `app.run(dom)`，启动应用\n\n### 数据模型 和 路由视图的关系\n\n+ 数据模型有2个要素：数据状态`state` 和 数据行为`action`, 以下是一个简单的model代码\n```javascript\n  const model = {\n    state: {\n      name: 'a'\n    },\n    actions: {\n      setName(name) {\n        return {\n          name: name\n        };\n      }\n    }\n  }\n  // 注册数据模型\n  app.model('test', model);\n  // 获取数据模型实例\n  const model = app.model('test');\n  // 打印a\n  console.log(model.state.name);\n  // 调用数据行为方法\n  model.actions.setName('b');\n  // 打印b\n  console.log(model.state.name);\n```\n+ 数据模型和组件结合\n\n简单场景，我们会考虑在组件内部，通过app.model获取到数据模型实例，通过实例来改变组件的state，从而达到组件更新的目的，这样依赖数据模型和组件强绑定，组件复用性极低。\n\n在React组件世界里，为了提高组件复用，会通过Hoc高阶组件的封装，Beatle也推崇这样的思路，这样我们把数据模型和组件封装成Hoc，在Hoc中把数据模型的state和actions都注入到组件的props中，通过组件props来访问。\n\n```javascript\nclass Component extends React.PureComponent {\n  static propTypes = {\n    test: React.PropTypes.object\n  }\n  componentWillMount() {\n    this.props.test.setName('b');\n  }\n  render() {\n    return (<h1>{this.props.test.name}</h1>)\n  }\n}\nconst HocComponent = app.connect('test', Component);\n```"},1503:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(23),d=r(p),y=n(1504),m=r(y),h=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){(0,m.default)(this._dom)}},{key:"render",value:function(){var e=this;return f.default.createElement("div",{ref:function(t){return e._dom=t}})}}]),t}(l.Component),u.routeOptions={doc:(0,d.default)(n(1510)),getIcon:function(e){return'<svg style="width: '+e+"px; height: "+e+'px;" viewBox="0 0 32 32" preserveAspectRatio="xMidYMid meet" focusable="false"><g viewBox="0 0 32 32"><polyline points="5.53 20.36 5.53 5.5 20.39 5.5" fill="none" stroke="#2d3033" stroke-miterlimit="10"></polyline><polyline points="26.47 11.3 26.47 26.15 11.61 26.15" fill="none" stroke="#2d3033" stroke-miterlimit="10"></polyline><circle cx="5.53" cy="20.36" r="2" fill="#ff3a49"></circle><circle cx="11.61" cy="26.15" r="2" fill="#ff3a49"></circle><circle cx="26.47" cy="11.3" r="2" fill="#ff3a49"></circle><circle cx="26.47" cy="26.15" r="2" fill="#00b4f0"></circle><circle cx="5.53" cy="5.5" r="2" fill="#00b4f0"></circle><circle cx="20.39" cy="5.5" r="2" fill="#ff3a49"></circle></g></svg>'},title:"迁移redux应用",summary:"redux",layout:["consoleLayout","demoLayout"],value:4},c);t.default=h,e.exports=t.default},1504:function(e,t,n){"use strict";function r(e){var t=n(1506),r=n(1507),o=n(1508),i=[{path:"/",component:t,indexRoute:{component:r},childRoutes:[{path:"counter",getComponent:function(e,t){var r=a.default.getApp("starter"),i=n(1509);r.model("counter",i),t(null,r.connect("counter",o,!0))}}]}];new a.default({name:"starter",routeType:"hashHistory",routes:i}).run(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(29),a=function(e){return e&&e.__esModule?e:{default:e}}(o);n(1505),e.exports=t.default},1505:function(e,t){},1506:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=r(o),i=n(12),u=r(i),c=n(98),s=function(e){var t=e.children;return a.default.createElement("div",{className:"container text-center"},a.default.createElement("h1",null,"From Redux to Beatle Refactor in Demo"),a.default.createElement(c.IndexLink,{to:"/",activeClassName:"page-layout__nav-item--active"},"Home")," · ",a.default.createElement(c.Link,{to:"/counter",activeClassName:"page-layout__nav-item--active"},"Counter"),a.default.createElement("div",{className:"page-layout__viewport"},t))};s.propTypes={children:u.default.node},t.default=s,e.exports=t.default},1507:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){return o.default.createElement("div",null,o.default.createElement("h4",null,"Welcome!"),o.default.createElement("img",{alt:"This is a duck, because Redux!",className:"duck",src:"//img.alicdn.com/tfs/TB14dINRpXXXXcyXXXXXXXXXXXX-64-64.png?t=1517212583908"}))};t.default=a,e.exports=t.default},1508:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=r(o),i=n(12),u=r(i),c=function(e){var t=e.counter,n=e.increment,r=e.doubleAsync;return a.default.createElement("div",{style:{margin:"0 auto"}},a.default.createElement("h2",null,"Counter: ",t),a.default.createElement("button",{className:"btn btn-primary",onClick:n},"Increment")," ",a.default.createElement("button",{className:"btn btn-secondary",onClick:r},"Double (Async)"))};c.propTypes={counter:u.default.number.isRequired,increment:u.default.func.isRequired,doubleAsync:u.default.func.isRequired},t.default=c,e.exports=t.default},1509:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(29),c=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){var e,n,a,i;r(this,t);for(var u=arguments.length,c=Array(u),s=0;s<u;s++)c[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.state={counter:0},i=n,o(a,i)}return a(t,e),i(t,[{key:"increment",value:function(){this.setState({counter:function(e){return e.counter+1}})}},{key:"doubleAsync",value:function(){var e=this;setTimeout(function(){e.setState({counter:function(e){return 2*e.counter}})},200)}}]),t}(c.default.BaseModel);t.default=s,e.exports=t.default},1510:function(e,t){e.exports="# 迁移redux项目\n\n> 示例Demo都应该从简到繁的顺序来阅读，如果本章节不了解，请先看上一个章节的示例。\n\nRedux有3大原则：单一数据源、只读state 和 纯函数变更state，2和3概括起来是数据单向流动。\n\n### Redux问题分析（优点也很多，不赘述）\n1. createStore一次性动作，中间件可配置需求不明显\n2. 数据状态`state`、数据行为描述`action` 和 数据行为变更逻辑`reducer`太多分散，开发维护成本高。\n3. 只解决数据状态管理\n\n```javascript\n// 1. 数据状态\nconst counterState = {\n  count: 1\n}\n// 2. 数据行为描述\nconst addCountAction = {\n  type: 'counter',\n  payload: {\n    count: 2\n  }\n}\n// 3. 数据行为变更调度\nconst addCountReducer = (state, action) => {\n  return state.counter.count + action.payload.count;\n}\n// 从面向对象的思想，1，2，3都是为了完成counter计数器的事情\nconst counter = {\n  state: counterState,\n  actionDescriptor: addCountAction,\n  actionReducer: addCountReducer\n}\n// 简化redux初始化逻辑，传入计数器的初始数据状态 和 计数器的 数据变更调度\nconst store = createStore({counter: counter.state}, {counter: counter.addCountReducer});\n// 通过dispatch发布 数据行为描述\nstore.dispatch(addCountAction);\n// 其redux内部会 根据action -> 找到reducer（通过type属性）-> 执行reducer返回结果更新state（根据type属性）\n```\n\n+ 通过Beatle来描述，体现OOP的编程思想\n\n```javascript\n  class Model extends Beatle.BaseModel {\n    state = {\n      count: 1\n    }\n    // 数据行为描述 和 数据行为变更逻辑 合为一个函数\n    addCountReducer(count) {\n      this.setState({\n        count: this.state.counter.count + count\n      })\n    }\n  }\n  app.model('counter', Model);\n  const counter = app.model('counter');\n  // 等同于store.dispatch\n  counter.addCountReducer(2);\n```\n\n> Redux Starter Kit\nsee: https://github.com/davezuko/react-redux-starter-kit/tree/master/src"},194:function(e,t,n){"use strict";function r(e,t){t=t||function(e,t){return e.displayName?e.displayName:t?(e.displayName=a.default.basename(t,a.default.extname(t)),e.displayName):void 0};var n={},r=void 0;if(Array.isArray(e))e.forEach(function(e){r=t(e)||e.name,n[r]=e});else if("function"==typeof e.keys){var o=e;o.keys().forEach(function(e){var a=o(e);a&&(r=t(a,e),n[r]=a)})}else{var i=void 0;for(var u in e)i=e[u].default?e[u].default:e[u],n[t(i,u)]=i}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(573),a=function(e){return e&&e.__esModule?e:{default:e}}(o);e.exports=t.default},209:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(681),u=r(i),c=n(12),s=r(c),l=function(){function e(t){o(this,e),s.default.checkPropTypes(u.default,t,"pollerOptions","Beatle.Poller"),this._option=Object.assign({delay:5e3,smart:!1,action:null,checkResult:function(){return!0},catchError:null},t),this._option.delay||(this._option.delay=5e3),this._current=null,this._interval=null,this._stopTimestamp=null,this._watchers=[]}return a(e,[{key:"then",value:function(e,t){var n=function(n,r){n?t&&t(n):e&&e(r)};this._watchers.push(n)}},{key:"subscribe",value:function(e){this._watchers.push(e),this.start()}},{key:"tick",value:function(e){var t=this,n=new Date;return this._current=e||this._option.action(),this._current.then(function(e){t._current._resolved=!0,t._current._result=e,(!t._stopTimestamp||n>=t._stopTimestamp)&&t._watchers.forEach(function(t){t(null,e)})},function(e){(!t._stopTimestamp||n>=t._stopTimestamp)&&(t._watchers.forEach(function(t){t(e)}),t._option.catchError&&t._option.catchError(e))})}},{key:"hasTick",value:function(e){return!(this._current&&(!this._current._resolved||!1===this._option.checkResult(e)))||(this.remove(),!1)}},{key:"start",value:function(e){var t=this;this.stop(),this._stopTimestamp=null,this.tick(e),this._interval=setInterval(function(){t._option.smart?t._current.then(function(){t.hasTick(t._current._result)&&t.start()}):t.hasTick(t._current._result)&&t.tick()},this._option.delay)}},{key:"stop",value:function(){clearInterval(this._interval),this._stopTimestamp=new Date}},{key:"unsubscribe",value:function(){this.stop(),this._watchers=[]}},{key:"remove",value:function(){this.stop(),this._watchers=[]}}]),e}();t.default=l,e.exports=t.default},220:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i,u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(192),l=n(765),f=n(190),p=r(f),d=n(12),y=r(d),m=n(11),h=r(m),b=n(54),v=r(b),g=n(377),_=n(768),x=r(_),j=n(770),O=r(j),w=n(194),k=r(w),P=n(779),E=r(P),R=n(138),M=r(R),T=n(379),C=r(T),S={ajax:y.default.object,initialState:y.default.object,middlewares:y.default.array,name:y.default.string,Models:y.default.oneOfType([y.default.object,y.default.func])},A=1,B=(i=a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),y.default.checkPropTypes(S,t,"ReduxSeedOptoins","Beatle.ReduxSeed"),this._instanceName=t.name||e.defaultApp,this._ajax=t.ajax,this._saga=new E.default,this._isImmutable=void 0===t.initialState||p.default.isImmutable(t.initialState),this._pureReducers=[],this._pureReducers.state={},this._incrementReducerState={__uuid__:A},this._init(this._instanceName);var n=this._isImmutable&&t.initialState?t.initialState.asMutable({deep:!0}):t.initialState;this._initStore(n,t.middlewares.concat(this._saga.getMiddleware(this.getModel.bind(this))),t.Models)}return c(e,null,[{key:"createModel",value:function(e,t){e.actions=e.actions||{};for(var n in t)e.actions[n]?e.actions[n].exec=t[n]:e.actions[n]={exec:t[n],callback:function(e,t){return t.data}};return e}},{key:"getRedux",value:function(t){if(e.multiCfgs[t])return e.multiCfgs[t];(0,h.default)(!1,v.default.invalidValue,"arguments","name",t,"Beatle.ReduxSeed.getRedux",Object.keys(e.multiCfgs))}}]),c(e,[{key:"increment",value:function(){this._incrementReducerState.__uuid__=++A}},{key:"_init",value:function(){e.multiCfgs[this._instanceName]?(0,h.default)(!1,v.default.duplicate,"initRedux","Beatle.ReduxSeed"):e.multiCfgs[this._instanceName]={models:{},resources:{},store:null,rootReducer:{routing:l.routerReducer},actions:{}}}},{key:"_initStore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this,r=arguments[1],o=arguments[2];t.__pure_reducer__=this._pureReducers.state,t.__increment_reducer__=this._incrementReducerState,(0,O.default)(t,r,function(){return n.reducerBuilder(o)},function(t){var r=n._saga.effect();for(var o in r)t.runSaga(r[o]);e.getRedux(n._instanceName).store=t})}},{key:"_setModel",value:function(e,t,n,r){var o=this;if(!e.models[t]){n.displayName||(n.displayName=t),n.prototype instanceof M.default&&(n=new n({name:n.displayName,ajax:this._ajax,actions:n.actions,isImmutable:this._isImmutable,saga:this._saga}),n.actions={}),Object.defineProperty(n,"dispatch",{get:function(){return o.getStore().dispatch},enumerable:!1});var a=n.state=n.state||n.store||{},i=this._isImmutable?(0,p.default)(a):a;return e.models[t]=n,e.actions[t]=(0,g.getActions)({modelName:t,model:n,resource:r,initialState:i},this),n.getAction||(n.getAction=function(e){if(e)return function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return n._actions[e].apply(n,r)(o.getStore().dispatch)};var t={};for(var r in n._actions)!function(e){t[e]=function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return n._actions[e].apply(n,r)(o.getStore().dispatch)}}(r);return t}),e.rootReducer[t]=(0,x.default)(n,i,this._isImmutable),a}}},{key:"get",value:function(t){return e.getRedux(this._instanceName)[t]}},{key:"subscribe",value:function(t){var n=e.getRedux(this._instanceName);return n.store.subscribe(function(){return t(n.store.getState())})}},{key:"dispatch",value:function(t){var n=e.getRedux(this._instanceName);return Object(t)!==t||t.type||(t.type="__pure_reducer__"),n.store.dispatch(t)}},{key:"reducerBuilder",value:function(t){var n=this,r=e.getRedux(this._instanceName);t=t&&(0,k.default)(t);for(var o in t)this._setModel(r,o,t[o]);return r.rootReducer.__increment_reducer__=function(){return{__uuid__:n._incrementReducerState.__uuid__}},r.rootReducer.__pure_reducer__=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n._pureReducers.state,t=arguments[1];if(n._pureReducers.length){var r={};return n._pureReducers.forEach(function(n){n.name?n.name===t.name&&Object.assign(r,n.reducer(e,t.payload)):Object.assign(r,n.reducer(e,t.payload))}),(0,C.default)(e,r,"")}return e},(0,s.combineReducers)(r.rootReducer)}},{key:"getStore",value:function(){return e.getRedux(this._instanceName).store}},{key:"getModel",value:function(t){return e.getRedux(this._instanceName).models[t]}},{key:"register",value:function(t,n){var r=e.getRedux(this._instanceName);if("object"===(void 0===t?"undefined":u(t))||t.prototype instanceof M.default){var o=t.displayName,a=this._setModel(r,o,t,n);if(a){var i=(0,s.combineReducers)(r.rootReducer);r.store.replaceReducer(i);var c=this._saga.effect(o);c&&r.store.runSaga(c);r.store.getState()[o]=a}}else"function"==typeof t?this._pureReducers.push({reducer:t}):"string"==typeof t&&"function"==typeof n&&(this._pureReducers.push({name:t,reducer:n}),void 0!==arguments[2]&&(this._pureReducers.state[t]=arguments[2]))}},{key:"getActions",value:function(t){var n=e.getRedux(this._instanceName);return t?n.actions[t]:n.actions}}]),e}(),a.defaultApp="main",a.multiCfgs={},i);t.default=B,e.exports=t.default},29:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){return["getStore","getRoutes","use","getResolvePath","route","mount","routesFactory","model","connect","route","toBindings","run","observer","view"].forEach(function(n){e[n]=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];if(N[n]&&void 0===this)return N[n].call(L,r[0]);var a=void 0,i=void 0;if(t?(a=L.instances[t],i=t):(a=L.defaultApp,i=a?a._setting.appName:"__anonymous__"),a)return a[n].apply(a,r);var u=L.toLazy(function(e){return e[n].apply(e,r)});return L.fireCallbacks[i]=L.fireCallbacks[i]||[],L.fireCallbacks[i].push(u),u}}),e}function c(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){var r="string"==typeof t.app?g.default.getApp(t.app):t.app||g.default.defaultApp;return e(r,t,n)}}}Object.defineProperty(t,"__esModule",{value:!0});var s,l,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(0),d=r(p),y=n(12),m=r(y),h=n(555),b=r(h),v=n(786),g=r(v),_=n(98),x=n(139),j=r(x),O=n(209),w=r(O),k=n(220),P=r(k),E=n(420),R=r(E),M=n(909),T=r(M),C=n(11),S=r(C),A=n(54),B=r(A),I=(l=s=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=this.context.app,n="string"==typeof e.to?t.route(e.to):null,r=n&&t.getResolvePath(n,!0)||e.to,o=Object.assign(e.query||{},t._setting.query),a=t.parent?t.parent._setting.basePath:t._setting.basePath,i=a.length;i&&r.substr(0,i)===a&&(r=r.slice(i));var u={to:{pathname:r,query:o,hash:e.hash,state:e.state}};return["activeStyle","activeClassName","onlyActiveOnIndex","onClick","target","className","style"].forEach(function(t){return u[t]=e[t]}),d.default.createElement(_.Link,u,e.children)}}]),t}(d.default.PureComponent),s.contextTypes={app:m.default.object},l);Object.assign(g.default,{getApp:function(e){return g.default.instances[e]?g.default.instances[e]:u({},e)},createModel:function(e,t){return this!==L?N.createModel.call(g.default,e):e?((0,R.default)(e,"model"),t?((0,T.default)(t,"resource"),P.default.createModel(e,t)):e):void(0,S.default)(!1,B.default.invalidValue,"arguments","Model",e,"Beatle.createModel","ModelShape")},toLazy:function(e){var t=function t(n){return t._result=e(n)};return t._lazy=!0,t},fromLazy:function(e,t){return e._lazy?e._result?e._result:e(t):e},Ajax:j.default,Poller:w.default,ReduxSeed:P.default,Link:I}),u(g.default);var N={connect:c(function(e,t,n){return"string"==typeof e&&(e=g.default.getApp(e)),e.connect(t.bindings,n,t.flattern)}),model:c(function(e,t,n){return"string"==typeof e&&(e=g.default.getApp(e)),e.model(n,t.Resource)}),createModel:function(e){return function(t){return L.createModel(t,e)}},route:c(function(e,t,n){return"string"==typeof e&&(e=g.default.getApp(e)),t.routeOptions&&(n.routeOptions=Object.assign(n.routeOptions||{},t.routeOptions)),e.route(t.path,n)}),observer:c(function(e,t,n){return"string"==typeof e&&(e=g.default.getApp(e)),e.observer(t.inject,n)}),view:c(function(e,t,n){return"string"==typeof e&&(e=g.default.getApp(e)),e.view(t.selector,n,t.providers,t.bindings,t.hookActions,t.props,t.getProps)})},L=(0,b.default)(g.default);["push","replace","go","goBack","goForward"].forEach(function(e){L.prototype[e]=function(t,n){if(this._activeHistory){if("string"==typeof t){var r=this.route(t);r&&(t=this.getResolvePath(r))}this._activeHistory[e](t,n)}}}),L.prototype.version="1.2.29",e.exports=L,t.default=L,e.exports=t.default},312:function(e,t,n){"use strict";function r(e,t,n,r){e=Object.assign({},e);for(var o in t)Object(t[o])===t[o]&&Object(n[o])===n[o]?e[o]=Object.assign({},t[o],n[o]):void 0===n[o]?e[o]=t[o]:e[o]=n[o];for(var a in n)void 0===e[a]&&(e[a]=n[a]);for(var i in r)e[i]=r[i];return e}function o(e,t){function n(n,a,u){var c=void 0;return c=e.flattern?Object.assign({},o,n,a,u):r(o,n,a,u),i&&Object.assign(c,i(c)),c.dispatch=t,c}var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3];return function(t){var r=void 0,o=void 0;return r="function"==typeof e.dataBindings?e.dataBindings:function(t,n){var r={};for(var o in e.dataBindings)"function"==typeof e.dataBindings[o]?r[o]=e.dataBindings[o].call(e,t,n):r[o]=e.dataBindings[o];return r},o="function"==typeof e.eventBindings?e.eventBindings:function(t){var n={};for(var r in e.eventBindings)!function(r){n[r]=function(){for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var i=e.eventBindings[r].apply(e,o);"function"==typeof i?i(t):t(i)}}(r);return n},(0,a.connect)(r,o,n,{withRef:!0})(t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(313);e.exports=t.default},355:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={url:o.default.string.isRequired,method:o.default.string,dataType:o.default.string,params:o.default.object,data:o.default.oneOfType([o.default.object,o.default.array]),headers:o.default.object,callback:o.default.func},e.exports=t.default},377:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n,r,o){var a="function"==typeof r?r:r.reducer||r.callback||u,i=void 0;if("function"==typeof a)i=o?(0,d.encodeActionType)(t,n,"success"):(0,d.encodeActionType)(t,n),e._reducers[i]=a;else for(var c in a)"function"==typeof a[c]&&(i=(0,d.encodeActionType)(t,n,c),e._reducers[i]=a[c])}function i(e,t){var n=e.modelName,r=e.model,i=e.resource,u=e.initialState,f=t._saga,y=t._ajax||new m.default;if(r.ACTION_TYPE_IMMEDIATE=(0,d.encodeActionType)(n,"@@UPDATE_STATE"),r._reducers=o({},r.ACTION_TYPE_IMMEDIATE,function(e,t){return(0,E.default)(e,t,n)}),r.reducers)for(var h in r.reducers)r._reducers[(0,d.encodeActionType)(n,h)]=r.reducers[h];for(var b in r.reducers)a(r,n,b,{reducer:r.reducers[b]});var v=r.subscriptions||r.externalReducers;Object.keys(v||{}).forEach(function(e){var t=e.split("."),n=t[0],o=t[1],a=void 0,i=3===t.length;i&&(a=t[2]);var u="";if(i){if("function"==typeof v[e])u=(0,d.encodeActionType)(n,o,a),r._reducers[u]=v[e];else if("object"===p(v[e])){var c=v[e];for(var s in c)"function"==typeof c[s]&&(u=(0,d.encodeActionType)(n,o,s),r._reducers[u]=c[s])}}else u=(0,d.encodeActionType)(n,o),r._reducers[u]=v[e]});var _=r.actions?r.actions:r.actions={};if(r._actions=r._actions,!r._actions&&(r._actions={},r instanceof k.default))for(var x=Object.getOwnPropertyNames(r.__proto__),j=1,O=x.length;j<O;j++)"function"==typeof r[x[j]]&&(r._actions[x[j]]=r[x[j]].bind(r));return r.__setIncrement=function(){t.increment()},r.effects=r.effects||{},Object.keys(_).forEach(function(e){if(Object.prototype.hasOwnProperty.call(_,e)){var o=_[e];if(o._processor)return o._processor;var p=o.exec||i&&i[e];p?(a(r,n,e,o,!0),o._processor=r._actions[e]=c(r,u,n,e,p,y)):(a(r,n,e,o),(0,g.default)(o)?(r.effects[e]=o,o._processor=r._actions[e]=s(r,u,n,e,f)):o._processor=r._actions[e]=l(r,u,n,e,o,function(){return t.getStore().getState()[n]})),Object.defineProperty(_,e,{get:function(){return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return r._actions[e].apply(r,n)(r.dispatch)}},enumerable:!1})}}),Object.keys(r.effects).length&&f.effect(r),r._actions}function u(){}function c(e,t,n,r,o,a,i){return function(){for(var u=arguments.length,c=Array(u),s=0;s<u;s++)c[s]=arguments[s];return function(u){!1===c[c.length-1]&&(i=!0,c.pop());var s={start:(0,d.encodeActionType)(n,r,"start"),success:(0,d.encodeActionType)(n,r,"success"),error:(0,d.encodeActionType)(n,r,"error")},l=new Promise(function(n,r){var l=function(e){i||u({type:s.error,error:!0,payload:{data:void 0,store:t,arguments:c,message:e.message,exec:o}}),r(e)},f=function(e){i||u({type:s.success,payload:{data:e,store:t,arguments:c,exec:o}}),n(e)},p=void 0;if("function"==typeof o)p=o.apply(e,c);else if((0,b.default)(o)){var d=Object.assign({data:o.data?Object.assign({},o.data,c[0]):c[0]},c[1]||{});for(var y in d)void 0===d[y]&&delete d[y];p=a.request(Object.assign({},o,d))}else p=o;return p&&p.then?p.then(f,l):f(p),p});return i||u({type:s.start,payload:{data:void 0,store:t,arguments:c,exec:o,promise:l}}),l}}}function s(e,t,n,r,o,a){return function(){for(var i=arguments.length,u=Array(i),c=0;c<i;c++)u[c]=arguments[c];return function(i){if(!1===u[u.length-1]&&(a=!0,u.pop()),a){var c;return(c=e._actions[r]).apply.apply(c,[e].concat(u))}i({action:(0,d.typeToAction)(n,r),payload:{arguments:u,store:t}});var s=(0,d.encodeActionType)(n,r);return o._getWatchPromise(s)}}}function l(e,t,n,r,o,a,i){return function(){for(var u=arguments.length,c=Array(u),s=0;s<u;s++)c[s]=arguments[s];return function(u){if(!1===c[c.length-1]&&(i=!0,c.pop()),"function"==typeof o){var s=!0,l=function(e){i||(u(e),i=!0)},p=function(t){if(s=!1,t.type){var r=(0,d.decodeActionType)(t.type),o=f(r,2),a=o[0];o[1]&&e.actions[a]||(t.type=(0,d.encodeActionType)(a,t.type))}else t.name?-1===t.name.indexOf(".")&&(t.name=(0,d.typeToAction)(n,t.name)):t={type:e.ACTION_TYPE_IMMEDIATE,payload:t};return l(t),Promise.resolve(t.payload)};i||(c=c.concat({put:p,select:function(e,t){s=!1;var r=a();return(0,O.default)(!r.hasOwnProperty||r.hasOwnProperty(e),x.default.mergeWarning,"select",e,n,"Beatle.ReduxSeed"),Promise.resolve(r[e]&&r[e].asMutable({deep:t}))}}));var y=o.apply(e,c);return s&&void 0===y?(u({type:(0,d.encodeActionType)(n,r),payload:{data:null,arguments:c,store:t}}),Promise.resolve(void 0)):y&&y.then?(y.then(function(t){return l({type:e.ACTION_TYPE_IMMEDIATE,payload:t})}),y):(y&&l({type:e.ACTION_TYPE_IMMEDIATE,payload:y}),Promise.resolve(y))}return i?Promise.resolve(o&&o.data):(u({type:(0,d.encodeActionType)(n,r),payload:{data:o&&o.data,arguments:c,store:t}}),Promise.resolve(void 0))}}}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.setReducers=a,t.getActions=i,t.getProcessorByExec=c,t.getProcessorByGenerator=s,t.getProcessor=l;var d=n(378),y=n(139),m=r(y),h=n(114),b=r(h),v=n(753),g=r(v),_=n(54),x=r(_),j=n(11),O=r(j),w=n(138),k=r(w),P=n(379),E=r(P)},378:function(e,t,n){"use strict";function r(e,t,n){return n?"@@"+e+"/"+t+"/"+n:"@@"+e+"/"+t}function o(e){var t=e.split("/"),n=u(t,3),r=n[0],o=n[1],a=n[2];return[r.substr(2),o,a]}function a(e){return"@@"+e.replace(/\./g,"/")}function i(e,t,n){return n?e+"."+t+"."+n:e+"."+t}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.encodeActionType=r,t.decodeActionType=o,t.actionToType=a,t.typeToAction=i},379:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e=e.asMutable?e.merge(t):Object.assign({},e,t)},e.exports=t.default},420:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return e.prototype instanceof c.default||i.default.checkPropTypes(s,e,t,"Beatle")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(12),i=r(a),u=n(138),c=r(u),s={displayName:i.default.string,store:i.default.object,state:i.default.object,actions:i.default.object.isRequired,effects:i.default.object,subscriptions:i.default.object};e.exports=t.default},538:function(e,t,n){"use strict";var r=n(29),o=function(e){return e&&e.__esModule?e:{default:e}}(r);n(910),new o.default({name:"main",root:document.getElementById("container"),base:window.CONFIG.prefix,routes:n(912)}).run()},54:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={displayName:"Warning: Failed %s value: Check the value of `displayName` in `%s`. `%s`",invalidValue:"Warning: Failed %s value: `%s` of value `%s` supplied to `%s`, expected `%s`",appoint:"Warning: %s(...) can only to be called by a Beatle instance, default by mainApp: `%s`",duplicate:"Warning: %s(...) can only to be called once: `%s`",duplicateProp:"Warning: Overlay %s property: assign `%s` to `%s` more than once. `%s`",invalidProp:"Warning: %s(...) `%s` is not a prop, expected `%s`. `%s`",throttle:"Warning: %s should be defined if type is `%s`. `%s`",worker:"Warning: saga worker type should be `%s`. `%s`",dispatchType:"Warning: `%s` action should be a plain Object with type. `%s`",mergeWarning:"Warning: `%s` state but `%s` is not declarede in `%s`. `%s`",selectError:"Error: `%s` state key `%s` is invaliable in `%s`. `%s`"},e.exports=t.default},555:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return e+ ++z}function s(e,t){var n=void 0,r=t.length;try{if(r){var o=e[t[0]];if(o)if(n=o.state,1===r){var a=Object.assign(n,o._actions);n=u({},t[0],a)}else for(var i=1;i<r;i++)n=n[t[i]]||o._actions[t[i]]}else n=e.__pure_reducer__.state}catch(e){(0,b.default)(!1,x.default.selectError,"select",t.join("."),"damo","Beatle"),window.console.error(e)}return n}function l(e){var t,n;return n=t=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,t),e.injector=new O.default(e&&e.providers),e.globalInjector=H,a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),f(t,[{key:"serialize",value:function(e){return(0,d.default)(e)}},{key:"deserialize",value:function(e,t){return void 0!==e&&e.asMutable?e.asMutable({deep:t}):e}},{key:"observer",value:function(e,t){var n=this;if(t)return this.connect(e,t,(0,m.default)(e));if(e||(e=""),"function"==typeof e||"string"==typeof e){var r=this.seed.get("store"),o=e,a=this.select(o),i=c("event"),u=void 0;return function e(){u&&u(),u=r.subscribe(function(){var t=n.select(o);(Array.isArray(a)&&a.filter(function(e,n){return!(0,B.default)(e,t[n])}).length||!(0,B.default)(t,a))&&(a=t,X.emit(i,t&&t.asMutable?t.asMutable({deep:!0}):t),e())})}(),e=(0,I.fromEvent)(X,i),k.default.observable(e)}return k.default.observable(e)}},{key:"select",value:function(e){var t=q.default.getRedux(this._setting.seedName),n=t.models;return Array.isArray(e)?e.map(function(e){return s(n,e.split("."))}):"function"==typeof e?e(t.store.getState()):s(n,e.split("."))}},{key:"service",value:function(e,t){var n=void 0;if("string"==typeof e){if("function"!=typeof t)return n=t?H:this.injector,n.getService(e);t.displayName=e,e=t,t=arguments[2]}n=t?H:this.injector,(0,m.default)(e)||(e=[].concat(e||[])),this.injector.setServices(e)}},{key:"view",value:function(e,t,n,r,o,a,i){var u=this;return!1!==e&&(e&&e.prototype&&e.prototype.isReactComponent&&(i=a,a=o,o=r,r=n,n=t,t=e,e=null),e&&e.prototype instanceof M.default?(e.displayName=e.displayName||c("selector"),e=this.injector.instantiate(e),e.bindings=e.bindings||r,e.hookActions=e.hookActions||o):(Object(e)!==e&&(r=r||e,e=new M.default,e.bindings=[].concat(r||"")),e.hookActions=o),e.bindings&&Object.assign(e,this.toBindings(e.bindings,e.flattern,e)),t=(0,g.default)(e,this.dispatch.bind(this),a,i)(t),e.getModel=function(e){return u.model(e)}),(0,E.default)(n,t,{injector:this.injector,globalInjector:H,selector:e})}}]),t}(e),t.crud=L.default,t.exec=T.exec,t.action=T.action,t.observable=T.observable,t.computed=T.computed,t.BaseModel=C.default,t.BaseSelector=M.default,t.Injector=O.default,t.AsyncComponent=k.default,n}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=l;var p=n(190),d=r(p),y=n(131),m=r(y),h=n(11),b=r(h),v=n(312),g=r(v),_=n(54),x=r(_),j=n(572),O=r(j),w=n(574),k=r(w),P=n(678),E=r(P),R=n(679),M=r(R),T=n(138),C=r(T),S=n(351),A=n(754),B=r(A),I=n(352),N=n(764),L=r(N),D=n(220),q=r(D),X=new S.EventEmitter,z=0,H=new O.default;e.exports=t.default},572:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){var t=e.toString().replace(w,"");return t.match(_)||t.match(x)}function i(e){var t=a(e);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function u(e,t,n){return n&&Array.isArray(e)&&(e=e[e.length-1]),e}function c(e){if("function"==typeof e){var t=Function.prototype.toString.call(e);return/^class\s/.test(t)||/_classCallCheck/.test(t)||/^function (\w+)[\s\S]*?\w\(this,\1\);/.test(t)}}function s(e,t){var n=k.getDependencies(e),r=void 0,o=void 0;return n?Array.isArray(e)?(o=e.length-1,u(e[o],"fn"),n=e.slice(0,o)):u(e,"fn",!0):(n=[],"string"==typeof t&&t||(t=e.name||i(e)),r=a(e),r[1].split(j).forEach(function(e){e.replace(O,function(e,t,r){n.push(r)})})),n}function l(e,t,n,r){var o=s(e,t)||[],a=[],i={},u=void 0,l=void 0,f=void 0,p=void 0;for(f=0,l=o.length;f<l;f++){if("string"!=typeof(p=o[f]))throw new Error("Incorrect injection token! Expected service name as string");u=n(p),i[p]=u,a.push(u)}if(Array.isArray(e)&&(e=e[l]),c(e)){var d=new(Function.prototype.bind.apply(e,[null].concat(a)));return d.context=i,d}return r.context=i,e.apply(r,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(131),d=r(p),y=n(11),m=r(y),h=n(54),b=r(h),v=n(194),g=r(v),_=/^([^\(]+?)=>/,x=/^[^\(]*\(\s*([^\)]*)\)/m,j=/,/,O=/^\s*(_?)(\S+?)\1\s*$/,w=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,k=function(){function e(t){o(this,e),this._services={},t&&this.setServices(t)}return f(e,null,[{key:"getDependencies",value:function(e){return e.contextTypes?Object.keys(e.contextTypes):e.$inject}}]),f(e,[{key:"instantiate",value:function(e,t,n){var r=this,o=Object.create(e.prototype||null),a=l(e,t||e.displayName,function(e){var t=n&&n(e);return t||r.getService(e)},o);return Object(a)===a||"function"==typeof a?a:o}},{key:"setServices",value:function(e){e=(0,g.default)(e);for(var t in e)this.setService(e[t])}},{key:"setService",value:function(e){var t=e.displayName;t?this._services[t]=this.instantiate(e,t):Array.isArray(e)||(0,d.default)(e)?this.setServices(e):(0,m.default)(!1,b.default.displayName,"setService","injector","Beatle")}},{key:"getService",value:function(e){return this._services[e]}}]),e}();t.default=k,e.exports=t.default},574:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){Object.assign(e,{render:function(t){return e=e.pipe((0,h.map)(t)),p.default.createElement(g,{observable:e})}});var t=e.lift;return e.lift=function(e){var n=t.call(this,e);return u(n),n},e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c,s,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),p=r(f),d=n(12),y=r(d),m=n(196),h=n(329),b=n(114),v=r(b),g=(s=c=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,c=Array(u),s=0;s<u;s++)c[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={children:null},i=n,a(r,i)}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,this._subscription=this.props.observable.subscribe(function(t){e.mounted&&e.setState({children:t})})}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.observable!==this.props.observable&&(this._subscription.unsubscribe(),this._subscription=e.observable.subscribe(function(e){t.mounted&&t.setState({children:e})}))}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this._subscription.unsubscribe()}},{key:"render",value:function(){return this.state.children}}]),t}(p.default.PureComponent),c.propTypes={observable:y.default.object.isRequired},c.observable=function(e){return u(Object(e)!==e||(0,v.default)(e)?(0,m.from)(Promise.resolve(e)):(0,m.from)(e))},s);t.default=g,e.exports=t.default},678:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,n){function r(e){return this._reactInternalInstance?this._reactInternalInstance._context[e]:null}function u(e){return this._services&&this._services[e]||this.context[e]||r.call(this,e)||l.getService(e)||p.getService(e)}var l=n.injector,p=n.globalInjector,y=n.selector,h=function(t){function n(t,r){o(this,n);var i=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,r)),c=i._services={};if(n.childContextTypes=n.childContextTypes||{},y&&(c.selector=y,n.childContextTypes.selector=f.default.object),Array.isArray(e))e.forEach(function(e){(0,d.default)(e.displayName,m.default.displayName,"contructor","service","Beatle"),n.childContextTypes[e.displayName]=f.default.object,c[e.displayName]=l.instantiate(e,e.displayName,u.bind(i))});else for(var s in e)n.childContextTypes[s]=f.default.object,c[s]=l.instantiate(e[s],s,u.bind(i));r.selector&&(c.parentSelector=r.selector,r.selector=y);for(var p in r)void 0!==c[p]&&(r[p]=c[p]);if(y){for(var h in y.context)"props"===h?Object.defineProperty(y.context,"props",{get:function(){return i.props},enumerable:!0,configurable:!0}):y.context[h]=u.call(i,h);try{y.hookActions&&y.hookActions.forEach(function(e){var t=void 0;if("string"==typeof e){t=y.getModel(y.bindings[0]);e={name:e}}else t="string"==typeof e.model?y.getModel(e.model):e.model||y.getModel(y.bindings[0]);if(t&&t[e.name]){var n=e.getParams?e.getParams(i.props,i.context):e.params;!1!==n&&t[e.name](n)}}),y.initialize&&y.initialize(i.props)}catch(e){window.console.error(e)}}return i}return i(n,t),c(n,[{key:"getChildContext",value:function(){if(s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getChildContext",this)){var e=s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getChildContext",this).call(this);return Object.assign(e,this._services)}return this._services}},{key:"componentWillUnmount",value:function(){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentWillUnmount",this)&&s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentWillUnmount",this).call(this);var e=this._services;for(var t in e)e[t].destroy&&e[t].destroy(),e[t].dispose&&e[t].dispose()}}]),n}(t);return h.contextTypes=Object.assign(h.contextTypes,{router:f.default.object,location:f.default.object}),h}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)};t.default=u;var l=n(12),f=r(l),p=n(11),d=r(p),y=n(54),m=r(y);e.exports=t.default},679:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(351),c=n(352),s=n(25),l=n(335),f=n(196),p=n(329),d=n(209),y=function(e){return e&&e.__esModule?e:{default:e}}(d),m=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._eventsMap={},e.setMaxListeners(Number.MAX_VALUE),e.dataBindings=e.inputs,e.eventBindings=e.outputs,e}return a(t,e),i(t,[{key:"_getEmitter",value:function(e){var t=arguments,n=this,r=this._eventsMap[e],o="subscribe."+e;return r?r.remove():(this._eventsMap[e]=r={eventName:e},r.trigger=function(){var a=t[t.length-1];if("function"==typeof a)if(t.pop(),r.source.polling){var i=function t(){!1===a.apply(void 0,arguments)&&n.removeListener(e,t)};n.on(e,i)}else n.once(e,a);n.emit.apply(n,[o].concat(Array.prototype.slice.call(t)))},r.stream=(0,c.fromEvent)(this,o)),r}},{key:"_subscribe",value:function(e){var t=this,n=e.source.pipe((0,p.catchError)(function(r){return t.emit(e.eventName,r),n}));e.subscription=n.subscribe(function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];t.emit.apply(t,[e.eventName,null].concat(r))},function(n){t.emit(e.eventName,n)}),e.remove=function(){e.subscription.unsubscribe()}}},{key:"_getPoller",value:function(e){var t=e.action(e.start),n=(0,f.from)(t).pipe((0,p.expand)(function(n){return t=e.action(n),!1!==t?t instanceof s.Observable?t:(0,f.from)(t).pipe((0,p.delay)(e.delay)):e.end&&e.end.then?(0,l.of)(e.end):(0,l.of)(Promise.resolve(e.end))})).pipe((0,p.takeWhile)(function(t){return e.hasTick(t)}));return n.polling=!0,n}},{key:"fromPoller",value:function(e){if(e instanceof y.default){var t=e;return t.stop(),e={start:{},end:{},delay:t._option.delay,action:function(n){return n===e.start?t._current||t.tick():e.hasTick(n)?t.tick():void 0},hasTick:function(n){return n!==e.end&&t.hasTick(n)}},this._getPoller(e)}var n={start:{},end:{},delay:e._delay,action:function(t){if(t===e.start&&t!==e.end)return e.action(t)},hasTick:function(t){return t===e.start&&t!==e.end}};return this._getPoller(n)}},{key:"fromEvent",value:function(e,t){var n=this._getEmitter(e);return t(n.stream)&&this._subscribe(n),n}},{key:"destroy",value:function(){this.removeAllListeners();for(var e in this._eventsMap)this._eventsMap[e].subscription&&this._eventsMap[e].subscription.unsubscribe()}}]),t}(u.EventEmitter);t.default=m,e.exports=t.default},681:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={delay:o.default.number,smart:o.default.bool,action:o.default.func.isRequired,catchError:o.default.func},e.exports=t.default},687:function(e,t,n){"use strict";function r(e,t,n,r){if("string"!=typeof e||!t)return e;var a=[],i=e.replace(r,function(e,n){return"\\"===e.charAt(0)?e.slice(1):void 0===t[n]?o:(a.push(n),t[n])});return n&&a.forEach(function(e){return delete t[e]}),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o="";e.exports=t.default},753:function(e,t,n){"use strict";function r(e){if("function"!=typeof e)return!1;if(u.test(i.call(e)))return!0;if(!c){return"[object GeneratorFunction]"===a.call(e)}var t=s(e);return t===f||"GeneratorFunctionPrototype"===(t.displayName||t.name)}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r;var a=Object.prototype.toString,i=Function.prototype.toString,u=/^\s*(?:function)?\*/,c="function"==typeof Symbol&&"symbol"===o(Symbol.toStringTag),s=Object.getPrototypeOf,l=function(){if(!c)return!1;try{return Function("return function*() {}")()}catch(e){}}(),f=l?s(l):{};e.exports=t.default},764:function(e,t,n){"use strict";function r(e){if(e.data&&void 0!==e.total)return e}function o(e,t){if(e.total=e.total+t,e.loading=!1,t&&e.data.length>e.pageSize){for(e.data.pop();e.data.length>e.pageSize;)e.data.pop();e.page=e.page+1}}function a(e,t,n,a){var i=r(e);if(i&&(e=e.data),Array.isArray(e))if(a&&n.cid){var u={};Array.isArray(t)?t.forEach(function(e){return u[e[n.cid]]=e}):u[t[n.cid]]=t,e=e.map(function(e){return u[e[n.cid]]?(e=Object.assign(e,u[e[n.cid]]),delete u[e[n.cid]],e):e})}else Array.isArray(t)?t.forEach(function(t){i?(e.unshift(t),o(i,1)):e.push(t)}):i?(e.unshift(t),o(i,1)):e.push(t);else a&&n.cid&&(e=Object.assign(e,t));return i||e}function i(e,t,n){var r=t?t(e.data):e.data;if(n)return r;var o=void 0;return Object(r)===r?o=r:r&&(o=e.arguments[0]),o}Object.defineProperty(t,"__esModule",{value:!0});var u={console:{success:window.console.info,error:window.console.error},message:function(e,t){return function(n){n?t&&u.console.error(t,n):e&&u.console.success(e)}},item:{},itemsEntry:{data:[],loading:!1,total:0,pageSize:10,page:1},list:[],noop:function(){},reset:function(e,t,n){return n},create:function(e,t,n,r,o){var u=i(t,o.processData);return u?(parseInt(t.data,10)&&(u[o.cid||"id"]=t.data),a(r,u,o)):r},update:function(e,t,n,r,o){var u=i(t,o.processData);return u?a(r,u,o,!0):r},delete:function(e,t,n,a,u){var c=i(t,u.processData),s=r(a);if(s&&(a=a.data),u.cid){var l=c[u.cid]+"";if(Array.isArray(a)){var f=0;a=a.filter(function(e){return!(l.indexOf(e[u.cid])>-1)||(f++,!1)}),s&&f&&(s.data=a,o(s,-f))}else l.indexOf(a[u.cid])>-1&&(a=n)}return s||a},get:function(e,t,n,r,o){return i(t,o.processData,!0)},query:function(e,t,n,r,o){var a=o.processData?o.processData(t.data):t.data;return Array.isArray(a)?{data:a,total:a.length,pageSize:10,page:1,loading:!1}:a}};t.default=u,e.exports=t.default},768:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,o=arguments[1],a=e._reducers[o.type],u=r;if(a){e.__setIncrement();var s=new c.default(r,e.state);u=a.call(e,s,o.payload),void 0===u||u instanceof c.default?u=s.getStore():e.state=u.asMutable?u.asMutable({deep:!0}):u}return n?(0,i.default)(u):u}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(190),i=r(a),u=n(769),c=r(u);e.exports=t.default},769:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){var o=this;r(this,e),this._store=t;for(var a in n)!function(r){n.hasOwnProperty(r)&&(o[r]=n[r],Object.defineProperty(o,r,{get:function(){return Object(n.key)===n.key?new e(t[r],n[r]):n[r]},set:function(e){t.asMutable?this._store=t=t.set(r,e):this._store[r]=t[r]=e,n[r]=e},enumerable:!1}))}(a)}return o(e,[{key:"getStore",value:function(){for(var e in this)"_store"!==e&&(this._store.asMutable?this._store=this._store.set(e,this[e]):this._store[e]=this[e]);return this._store}}]),e}();t.default=a,e.exports=t.default},770:function(e,t,n){"use strict";e.exports=n(771)},771:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return{}},r=arguments[3],a=n(),u=(0,l.default)(),s=(0,i.compose)(i.applyMiddleware.apply(void 0,[c.default,u].concat(o(t)))),f=(0,i.createStore)(a,e,s);return f.runSage=u.run,r&&r(f),f}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=n(192),u=n(772),c=r(u),s=n(773),l=r(s);e.exports=t.default},779:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(73),l=r(s),f=n(780),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),d=n(384),y=n(54),m=r(y),h=n(378),b=function(){function e(){a(this,e),this._watchersMap={},this._effects={}}return c(e,[{key:"_wrapped",value:function(e,t,n){this._watchersMap[e]&&delete this._watchersMap[e],t(n)}},{key:"_watch",value:function(e,t,n){this._watchersMap[e].resolve=this._wrapped.bind(this,e,t),this._watchersMap[e].reject=this._wrapped.bind(this,e,n)}},{key:"_getWatchPromise",value:function(e){return this._watchersMap[e]?this._watchersMap[e].promise:(this._watchersMap[e]={},this._watchersMap[e].promise=new Promise(this._watch.bind(this,e)))}},{key:"getMiddleware",value:function(e){var t=this;return function(){return function(n){return function(r){if(r.name&&(r.type=(0,h.actionToType)(r.name)),r.type){var o=(0,h.decodeActionType)(r.type),a=u(o,2),i=a[0],c=a[1],s=e(i);return s&&c?s.effects[c]?t._getWatchPromise(r.type):r.name&&s._actions[c]?s._actions[c].apply(s,r.payload&&r.payload.arguments)(s.dispatch):n(r):n(r)}return n(r)}}}}},{key:"resolve",value:function(e,t){this._watchersMap[e]&&this._watchersMap[e].resolve(t)}},{key:"reject",value:function(e,t){this._watchersMap[e]&&this._watchersMap[e].reject(t)}},{key:"effect",value:function(e){if(!arguments.length)return this._effects;if("string"==typeof e)return this._effects[e];if(e.effects){var t=this;e._emitter=this._createEffects(e);var n=regeneratorRuntime.mark(function n(){var r,o,a=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=regeneratorRuntime.mark(function n(r){var o,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=t._getWatcher(e,r,e.effects[r]),n.next=3,p.fork(o);case 3:return i=n.sent,n.next=6,p.fork(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.take((0,h.encodeActionType)(e.displayName,"@@CANCEL_EFFECTS"));case 2:return t.next=4,p.cancel(i);case 4:case"end":return t.stop()}},t,this)}));case 6:case"end":return n.stop()}},n,a)}),n.t0=regeneratorRuntime.keys(e.effects);case 2:if((n.t1=n.t0()).done){n.next=7;break}return o=n.t1.value,n.delegateYield(r(o),"t2",5);case 5:n.next=2;break;case 7:case"end":return n.stop()}},n,this)});return this._effects[e.displayName]=n,n}}},{key:"_createEffects",value:function(e){function t(t){if(t.type){var n=(0,h.decodeActionType)(t.type),r=u(n,2),o=r[0];r[1]||e.actions[o]||(t.type=(0,h.encodeActionType)(e.displayName,t.type))}else t.name?-1===t.name.indexOf(".")&&(t.name=(0,h.typeToAction)(e.displayName,t.name)):(e._emitter.data=t,t={type:e.ACTION_TYPE_IMMEDIATE,payload:t});return p.put(t)}function n(t){if((0,l.default)(!t,m.default.dispatchType,"take(...)","Beatle.saga"),t){var n=(0,h.decodeActionType)(t),r=u(n,2),o=r[0];r[1]||e.actions[o]||(t=(0,h.encodeActionType)(e.displayName,t))}return p.take(t)}return i({},p,{put:t,take:n})}},{key:"_getWatcher",value:function(e,t,n){var r=this,a="takeEvery",i=void 0;if(Array.isArray(n)){var u=n[1];n=n[0],u&&u.type&&"throttle"===(a=u.type)&&(i=u.ms,(0,l.default)(!i,m.default.throttle,"interval","throttle","Beatle.Saga"))}var c=(0,h.encodeActionType)(e.displayName,t),s=regeneratorRuntime.mark(function t(a){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=a.payload&&(a.payload.store||a.payload.arguments)?a.payload.arguments||[]:[a],t.next=4,p.put({type:(0,h.encodeActionType)(c,"start")});case 4:return t.next=6,n.apply(void 0,o(i.concat(e._emitter)));case 6:return t.next=8,p.put({type:(0,h.encodeActionType)(c,"success")});case 8:r.resolve(c,e._emitter.data),t.next=17;break;case 11:return t.prev=11,t.t0=t.catch(0),t.next=15,p.put({type:(0,h.encodeActionType)(c,"error")});case 15:r.reject(c,t.t0),window.console.error(t.t0);case 17:case"end":return t.stop()}},t,this,[[0,11]])}),f={takeEvery:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.takeEveryHelper)(c,s);case 2:case"end":return e.stop()}},e,this)}),takeLatest:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.takeLatestHelper)(i,c,s);case 2:case"end":return e.stop()}},e,this)}),throttle:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.throttleHelper)(c,s);case 2:case"end":return e.stop()}},e,this)})};return(0,l.default)(!!f[a],m.default.worker,Object.keys(f),"Beatle.Saga"),f[a]}}]),e}();t.default=b,e.exports=t.default},786:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(13),d=r(p),y=n(12),m=r(y),h=n(98),b=n(249),v=r(b),g=n(248),_=r(g),x=n(250),j=r(x),O=n(897),w=r(O),k=n(11),P=r(k),E=n(54),R=r(E),M=n(114),T=r(M),C=n(194),S=r(C),A=n(220),B=r(A),I=n(312),N=r(I),L=n(907),D=r(L),q=n(420),X=r(q),z=n(908),H=r(z),F=n(139),U=r(F),W={name:m.default.string,store:m.default.object,middlewares:m.default.array,ajax:m.default.object,root:m.default.object,base:m.default.string,env:m.default.object,autoLoadModel:m.default.bool,autoLoadRoute:m.default.bool,models:m.default.oneOfType([m.default.object,m.default.func,m.default.array]),routes:m.default.oneOfType([m.default.object,m.default.func,m.default.array]),routeType:m.default.oneOfType([m.default.object,m.default.string])},V={localHistory:function(e){var t=!("undefined"==typeof window||!window.document||!window.document.createElement),n=void 0;return t&&(n=(0,j.default)(e)({entries:[{pathname:window.location.pathname,search:window.location.search}]})),n}(_.default),hashHistory:h.hashHistory,browserHistory:h.browserHistory},G=(c=u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),m.default.checkPropTypes(W,t,"BeatleOptions","Beatle");var n=t.name||"app";this._setting={basePath:t.base||"",query:t.env,appName:n,seedName:n+(new Date).getTime(),rootDom:t.root||document.body,routes:[],routesMap:{},history:Object(t.routeType)===t.routeType?t.routeType:V[t.routeType]||V.browserHistory},this._middlewares=[],this.seed=null,this.ajax=null,this._hasRendered=!1,this.injector=t.injector,this.globalInjector=t.globalInjector,e.instances[this._setting.appName]=this,t.subApp||(e.defaultApp=this,e.fireCallbacks[this._setting.appName]=(e.fireCallbacks.__anonymous__||[]).concat(e.fireCallbacks[this._setting.appName]||[]),delete e.fireCallbacks.__anonymous__),this._init(t),this._fireReady()}return s(e,[{key:"_fireReady",value:function(){var t=e.fireCallbacks[this._setting.appName];if(t)for(var n=0,r=t.length;n<r;n++)t[n](this)}},{key:"_init",value:function(t){var n=void 0;if(t.models)n=t.models;else if(t.autoLoadModel&&e.autoLoad.loadModels)try{n=e.autoLoad.loadModels()}catch(e){window.console.error(e)}!t.ajax||(0,T.default)(t.ajax)?this.ajax=new U.default(t.ajax):t.ajax&&(this.ajax=t.ajax);var r=t.middlewares||[];if(r.push(this._getMiddleWareFactory()),this.seed=new B.default({name:this._setting.seedName,initialState:t.store,middlewares:r,Models:n,ajax:this.ajax}),t.autoLoadRoute&&e.autoLoad.loadRoutes)try{this.routesFactory(e.autoLoad.loadRoutes(),t)}catch(e){window.console.error(e)}t.routes&&this.setRoutes(t.routes,!1,null,t),Object.assign(this.injector._services,{ajax:this.ajax,app:this,seed:this.seed})}},{key:"_getMiddleWareFactory",value:function(){var e=this;return function(t){return function(n){return function(r){var o=function r(o){if(o instanceof Error)throw o;var a=e._middlewares[r.pos++];a?a(o,r,t.dispatch):n(o)};o.pos=0,o(r)}}}}},{key:"_withBasename",value:function(e){var t=this;return e?("/"!==e[0]&&(e="/"+e),(0,v.default)(function(){return t._setting.history})({basename:e})):this._setting.history}},{key:"_parsePath",value:function(e,t){return e=e?e.replace("/:name","/"+t):t}},{key:"_convertAppToComponent",value:function(e,t,n){var r,u,c=this;if(!e.parent){e.parent=c;var l="/"===t[0]?t:c._setting.basePath+"/"+t;e._setting.history=Object(n)===n?n:V[n]||e._setting.history;var p=void 0,d=void 0;if(c._setting.history===e._setting.history){e._setting.basePath="",e.parent=c;for(p in e._setting.routesMap)d=e._setting.routesMap[p],d.path&&0!==d.path.indexOf("http")&&("/"===d.path?(d.path=t,d.resolvePath=l):"/"===d.path[0]?(d.path=t+d.path,d.resolvePath=l+d.resolvePath,"/"!==d.path[0]&&(d.path="/"+d.path)):(d.path=l+"/"+d.path,d.resolvePath=l+"/"+d.resolvePath))}else e._activeHistory=e._setting.history=e._withBasename(l)}var y=(0,H.default)(e.injector,e.globalInjector),m=e._setting.history;return u=r=function(t){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),s(n,[{key:"render",value:function(){return e._activeHistory||(e._activeHistory=c._activeHistory),f.default.createElement(y,{store:e.getStore()},f.default.createElement(h.Router,{history:m,routes:e._setting.routes}))}}]),n}(f.default.PureComponent),r.routeOptions=e.routeOptions||{},u}},{key:"parseRoute",value:function(t,n){for(var r=this,o=t,a=[];o;)a.unshift(o.path),o=o.parent;var i=a.join("/");if(t.component)t.component=e.fromLazy(t.component,this),t.component instanceof e&&(t.path=t.path+"(/**)",t.component=this._convertAppToComponent(t.component,i,t.routeType));else if(t.getComponent&&t.app){t.path=t.path+"(/**)";var u=t.getComponent;t.getComponent=function(e,n){u(e,function(e,o){e?n(e,o):n(null,r._convertAppToComponent(o,i,t.routeType))})}}else n&&!t.component.routeOptions&&(t=!1);return t&&(this._setting.routesMap[this.getResolvePath(t,!0)]=t),t}},{key:"getStore",value:function(){return B.default.getRedux(this._setting.seedName).store}},{key:"getRoutes",value:function(){return this._setting.routes}},{key:"setRoutes",value:function(e,t,n,r){var o=this;Array.isArray(e)?(t&&(this._setting.routes=e),e.forEach(function(e){e.parent=n,!1===t&&o._pushRoute(o._setting.routes,e,n),e=o.parseRoute(e),e.component&&e.component.routeOptions&&Object.assign(e,e.component.routeOptions),e.childRoutes&&o.setRoutes(e.childRoutes,null,e)})):this.routesFactory(e,r)}},{key:"use",value:function(e){this._middlewares.push(e)}},{key:"getResolvePath",value:function(e,t){var n=void 0;if("string"==typeof e)n=e;else if(e.resolvePath)n=e.resolvePath;else if(!e.path||"/"!==e.path[0]&&0!==e.path.indexOf("http")){for(var r=e,o=[],a=void 0;r;)a=r.path||r.name,r.parent?o.unshift(a):o.unshift(r.navKey?r.navKey+"/"+a:a),r=r.parent;n=o.join("/").replace(/\/+/g,"/"),e.resolvePath=n}else n=e.resolvePath=e.path;return t?n:0===n.indexOf("http")?n:this._setting.basePath?"/"===n[0]?this._setting.basePath+n:this._setting.basePath+"/"+n:n}},{key:"_pushRoute",value:function(e,t,n){var r=this;e.push(t),t.aliasRoutes&&(t.aliasRoutes.forEach(function(o){var a=o.path;o=Object.assign({parent:n},t,o),delete o.resolvePath,a||(o.path=r._parsePath(o.path,o.name));var i=r.getResolvePath(o,!0);r._setting.routesMap[i]||(r._setting.routesMap[i]=o,e.push(o))}),delete this._setting.routesMap[t.resolvePath],delete t.resolvePath,t.path=this._parsePath(t.path,t.name),this._setting.routesMap[this.getResolvePath(t,!0)]=t)}},{key:"route",value:function(t,n,r){var o=this;if(1===arguments.length&&"string"==typeof t)return this._setting.routesMap[t];if(n){n=e.fromLazy(n,this),r&&(n.routeOptions=Object.assign(n.routeOptions||{},r),r.childRoutes&&this.setRoutes(r.childRoutes,null,r));var a=(0,D.default)(t,n,{callback:this.parseRoute.bind(this),fromLazy:function(t){return e.fromLazy(t,o)}});a&&this._pushRoute(this._setting.routes,a)}else{var i=void 0===n||!!n;this.setRoutes(t,i)}}},{key:"routesFactory",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=(0,S.default)(n,function(e,t){return t}),"function"==typeof r&&(r={callback:r});var o=r.callback||this.parseRoute.bind(this),a=r.leave||1;void 0===r.strict&&(r.strict=!0);var i=r.append?this._setting.routes.slice(0):[];return Object.keys(n).sort(function(e,t){var n=e.split(/[\\\/]/).length-t.split(/[\\\/]/).length;return 0===n?[-1,1][(e>t)-0]:n}).forEach(function(u){var c=u.slice(2,-10).split(/[\\\/]/);""===c[0]&&c.shift();var s=e.fromLazy(n[u],t),l=void 0,f=void 0,p=void 0,d=void 0,y=void 0;if(c.length<a)(y=(0,D.default)(c[0]||"/",s,{name:c[0]||"/",strict:r.strict,callback:o,fpath:u,fromLazy:function(n){return e.fromLazy(n,t)}}))&&(t._pushRoute(i,y),t._pushRoute(t._setting.routes,y));else{p=c.pop(),d=i;var m=void 0,h=c[c.length-1]||"";if(c.length)for(;(l=c.shift())&&(f=d.find(function(e){return e.name===l}));)m=f,d=m.childRoutes||[];m||(m=d.find(function(e){return"/"===e.name}),d=m.childRoutes||[]),m?(m.childRoutes=m.childRoutes||[],(y=(0,D.default)(m.path===h?null:h+"/"+p,s,{name:p,navKey:h,strict:r.strict,callback:o,fpath:u,fromLazy:function(n){return e.fromLazy(n,t)}}))&&(y.parent=m,t._pushRoute(m.childRoutes,y))):(y=(0,D.default)(null,s,{name:p,navKey:h,strict:r.strict,callback:o,fpath:u,fromLazy:function(n){return e.fromLazy(n,t)}}))&&(t._pushRoute(i,y),t._pushRoute(t._setting.routes,y))}}),i}},{key:"model",value:function(t,n){if("string"==typeof t){if(1===arguments.length)return this.seed.getModel(t);n.displayName=t,t=n,n=null}if(t){if(t=e.fromLazy(t,this),t=t.default||t,!t.displayName)return void(0,P.default)(!1,R.default.displayName,"Model","arguments","beatleInstance.model");(0,X.default)(t,"model"),n?this.seed.register(t,n):this.seed.register(t)}else(0,P.default)(!1,R.default.invalidValue,"arguments","Model",t,"beatleInstance.model","ModelShape")}},{key:"mount",value:function(){}},{key:"connect",value:function(e,t,n,r){return e.prototype&&e.prototype.isReactComponent&&(t=e,t.getState?(e=function(e,n){return t.getState(e.__pure_reducer__,n)},n=!0):e=[]),(0,N.default)(this.toBindings([].concat(e),n),this.dispatch.bind(this),r)(t)}},{key:"toBindings",value:function(e,t,n){var r=B.default.getRedux(this._setting.seedName),o=r.models,a=r.actions;return{flattern:t,dataBindings:"function"==typeof e[0]?e[0].bind(n):function(n){var r={};return e.forEach(function(e){if("string"==typeof e){var a={};if(o[e]){var i=o[e].state||o[e].store;for(var u in i)a[u]=n[e][u]}t?Object.assign(r,a):r[e]=a}else for(var c in e)if(Object(e[c])===e[c])r[c]=e[c];else if("string"==typeof e[c]){var s=e[c].split("."),l={};!o[s[0]]||"store"!==s[1]&&"state"!==s[1]||(l[c]=(0,w.default)(n[s[0]],s.slice(2))),t?Object.assign(r,l):r[s[0]]=l}}),r},eventBindings:"function"==typeof e[1]?function(t,r){return e[1].call(n,t,r,a)}:function(n){var r={};return e.forEach(function(e){if("string"==typeof e&&a[e]){var o={};for(var i in a[e])!function(t){o[t]=function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];var u=a[e][t].apply(null,o);return u&&u.then?u:"function"==typeof u?u(n):void 0!==u?n(u):void 0}}(i);t?Object.assign(r,o):r[e]=o}else for(var i in e)"function"==typeof e[i]?r[i]=e[i].bind(null,n):"string"==typeof e[i]&&function(){var o=e[i].split("."),u={};a[o[0]]&&"actions"===o[1]&&(u[i]=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=a[o[0]][o[2]].apply(null,t);return i&&i.then?i:"function"==typeof i?i(n):void 0!==i?n(i):void 0}),t?Object.assign(r,u):r[o[0]]=u}()}),r}}}},{key:"getActions",value:function(e){var t=this.seed.getActions(e),n=this.getStore(),r={};for(var o in t)!function(e){r[e]=function(){return t[e].apply(t,arguments)(n.dispatch)}}(o);return r}},{key:"run",value:function(e,t,n){if(!this._hasRendered){this._hasRendered=!0;var r=h.Router;"string"!=typeof e&&e&&e.nodeType||(n=t,t=e,e=null),"function"==typeof t&&(t.prototype&&t.prototype.isReactComponent?(r=t,t=null):(n=t,t=null));var o=this._setting.routes;e=e||this._setting.rootDom,this._setting.basePath=t||this._setting.basePath,this._activeHistory=this._withBasename(this._setting.basePath);var a=(0,H.default)(this.injector,this.globalInjector),i=f.default.createElement(a,{store:this.getStore()},f.default.createElement(r,{history:this._activeHistory,routes:o}));n?n(i,e):d.default.render(i,e)}}},{key:"appName",get:function(){return this._setting.appName}},{key:"basename",get:function(){return this._setting.basePath}},{key:"dispatch",get:function(){return B.default.getRedux(this._setting.seedName).store.dispatch}}]),e}(),u.fireCallbacks={},u.defaultApp=null,u.instances={},u.autoLoad={},c);t.default=G,e.exports=t.default},907:function(e,t,n){"use strict";function r(e){e.childRoutes&&e.childRoutes.forEach(function(e){e.component&&e.component.routeOptions&&r(Object.assign(e,e.component.routeOptions))})}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Object.assign({resolvePath:e,path:e,name:n.name,navKey:n.navKey,component:t,fpath:n.fpath},t.routeOptions);if(r(o),n.callback&&!1===n.callback(o,n.strict))return null;var a=o.indexRoute;if(a)if(a.prototype&&a.prototype.isReactComponent)o.indexRoute=Object.assign({component:a},a.routeOptions);else if("function"==typeof a)o.indexRoute=Object.assign({getComponent:a},a.routeOptions);else{a.component=n.fromLazy(a.component);var u=a.component?a.component.routeOptions:a.getComponent.routeOptions;o.indexRoute=Object.assign(a,u)}if("function"==typeof o.component.then){var c=o.component;delete o.component,o.getComponent=function(e,t){c.then(function(e){t(null,e)},t)}}else if(i.default.isValidElement(o.component)){var s=o.component;o.component=function(){return s}}else o.component.prototype.isReactComponent||"props"===o.component.toString().split(")")[0].split("(").pop()||(o.getComponent=o.component,delete o.component);return o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(a);e.exports=t.default},908:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var n=function(n){function i(t,n){r(this,i);var a=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,n));return a._childContext={store:t.store},a._unlisten=e._services.app._setting.history.listen(function(e){a._childContext.location=e}),a}return a(i,n),u(i,[{key:"componentWillUnmount",value:function(){this._unlisten&&this._unlisten()}},{key:"getChildContext",value:function(){for(var n in e._services)this._childContext[n]=e._services[n];for(var r in t._services)void 0===this._childContext[r]&&(this._childContext[r]=t._services[r]);return this._childContext}}]),i}(c.Provider);n.childContextTypes=c.Provider.childContextTypes,n.childContextTypes.location=l.default.object;for(var i in e._services)n.childContextTypes[i]=l.default.object;for(var s in t._services)void 0===n.childContextTypes[s]&&(n.childContextTypes[s]=l.default.object);return n}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=i;var c=n(313),s=n(12),l=function(e){return e&&e.__esModule?e:{default:e}}(s);e.exports=t.default},909:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)n[r]=s;return i.default.checkPropTypes(n,e,t,"Beatle")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(12),i=r(a),u=n(355),c=r(u),s=i.default.oneOfType([i.default.func,i.default.shape(c.default)]);e.exports=t.default},910:function(e,t){},912:function(e,t,n){function r(e){return n(o(e))}function o(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var a={"./complex/allot/index.jsx":913,"./complex/multi/index.jsx":914,"./core/ajax/index.jsx":915,"./core/middleware/index.jsx":979,"./core/model/index.jsx":982,"./core/route/index.jsx":985,"./core/seed/index.jsx":988,"./core/selector/index.jsx":991,"./core/service/index.jsx":994,"./index.jsx":997,"./single/defer/index.jsx":1395,"./single/model/index.jsx":1463,"./single/pure/index.jsx":1466,"./single/route/index.jsx":1469,"./single/service/index.jsx":1472,"./spa/dva/index.jsx":1475,"./spa/integrate/index.jsx":1491,"./spa/interactive/index.jsx":1494,"./spa/mobx/index.jsx":1497,"./spa/simple/index.jsx":1500,"./spa/starter/index.jsx":1503};r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=912},913:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(12),d=r(p),y=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){return f.default.createElement("div",null,"Hello World!")}}]),t}(l.Component),u.routeOptions={getIcon:function(e){return'<svg style="width: '+e+"px; height: "+e+'px;" viewBox="0 0 32 32" preserveAspectRatio="xMidYMid meet" focusable="false"><g viewBox="0 0 32 32"><polyline points="13.67 24.8 21.83 10.79 24.17 14.88 18.92 24.8 24.75 24.8 30 15.46 24.75 6.13" fill="none" stroke="#2d3033" stroke-miterlimit="10"></polyline><polyline points="18.92 6.13 10.75 20.13 7.83 15.46 13.67 6.13 7.83 6.13 2 15.46 7.25 24.8" fill="none" stroke="#2d3033" stroke-miterlimit="10"></polyline><circle cx="7" cy="24.57" r="2" fill="#ff3a49"></circle><circle cx="18.92" cy="6.13" r="2" fill="#ff3a49"></circle><circle cx="13.35" cy="6.13" r="2" fill="#00b4f0"></circle><circle cx="13.67" cy="24.57" r="2" fill="#ff3a49"></circle><circle cx="18.92" cy="24.57" r="2" fill="#00b4f0"></circle><circle cx="24.67" cy="6.13" r="2" fill="#ff3a49"></circle></g></svg>'},title:"应用权限",summary:"应用授权业务服务",layout:["consoleLayout","demoLayout"],value:2},u.propTypes={route:d.default.object},c);t.default=y,e.exports=t.default},914:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(12),d=r(p),y=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){return f.default.createElement("div",null,"Hello World!")}}]),t}(l.Component),u.routeOptions={getIcon:function(e){return'<svg style="width: '+e+"px; height: "+e+'px;" viewBox="0 0 32 32" preserveAspectRatio="xMidYMid meet" focusable="false"><g viewBox="0 0 32 32"><polygon points="4.56 9.18 4.56 22.24 15.87 28.77 27.17 22.24 27.17 9.18 15.87 2.65 4.56 9.18" fill="#fff" stroke="#2d3033" stroke-linecap="round" stroke-linejoin="round"></polygon><line x1="15.87" y1="2.65" x2="15.87" y2="28.77" fill="none" stroke="#2d3033" stroke-linecap="round" stroke-linejoin="round"></line><line x1="4.56" y1="22.24" x2="27.17" y2="9.18" fill="none" stroke="#2d3033" stroke-linecap="round" stroke-linejoin="round"></line><line x1="4.56" y1="9.18" x2="27.17" y2="22.24" fill="none" stroke="#2d3033" stroke-linecap="round" stroke-linejoin="round"></line><circle cx="27.17" cy="9.18" r="2" fill="#00b4f0"></circle><circle cx="4.83" cy="9.18" r="2" fill="#00b4f0"></circle><circle cx="15.87" cy="28.77" r="2" fill="#00b4f0"></circle><circle cx="15.86" cy="2.65" r="2" fill="#ff3a49"></circle><circle cx="27.17" cy="21.94" r="2" fill="#ff3a49"></circle><circle cx="5.08" cy="21.94" r="2" fill="#ff3a49"></circle></g></svg>'},title:"多应用组合",summary:"子应用作为父应用的路由",layout:["consoleLayout","demoLayout"],value:1},u.propTypes={route:d.default.object},c);t.default=y,e.exports=t.default},915:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=n(23),l=r(s),f=n(916),p=r(f),d=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(p.default),u.routeOptions={doc:(0,l.default)(n(978)),getIcon:function(e){return'<i style="font-size: '+e+'px;" class="anticon anticon-fork"></i>'},title:"接口调用",summary:"ajax",layout:["consoleLayout","demoLayout"],value:1},c);t.default=d,e.exports=t.default},916:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),s=r(c),l=n(101),f=r(l),p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return s.default.createElement("h1",null,"敬请期待")}}]),t}(f.default);t.default=p,e.exports=t.default},978:function(e,t){e.exports="# 接口调用`Class: Ajax`\n\nBeatle封装了fetch模块，并提供Ajax类，在使用接口调用之前，需要初始化Ajax，再通过实例方法发起请求。\n\n```javascript\n  const ajax = new Ajax();\n  ajax.get('https://api.github.com/users/baqian').then(ret => console.log(ret));\n```\n\n接口请求时需要设置`header`等信息，可以通过调用方法的参数传入，也可以设置在实例上（在new Ajax传入配置）\n\n+ 通过`new Beatle.Ajax`产生ajax实例，传入的options配置项，设置实例级的配置：\n\n| 名称 | 描述 |\n| :------ | :------ |\n| `headers` | 全局的Header配置, 默认取值`window.ajaxHeader` |\n| `beforeRequest(ajaxOption)` | 请求之前的钩子函数 |\n| `beforeResponse(response, ajaxOption, xhr)` | 请求成功后处理response对象的钩子函数 |\n| `afterResponse(result, ajaxOption, xhr)` | 请求成功后处理接口结果数据的钩子函数 |\n| `origin` | 配置请求地址前缀 |\n| `delimeter` | 请求url默认支持插值替换，`delimeter`是插值变量的语法 |\n| `normalize` | 请求url插值替换，是否都走data属性, 默认为`false` |\n\n```javascript\n  import {Ajax} from 'beatle';\n  const ajax = new Ajax({\n    origin: 'https://api.github.com',\n    headers: {\n      csrfToken: '...'\n    },\n    beforeRequest: (ajaxOption) => {\n      // 发请求之前拦截，可以return promise，则会使用promise而不在发起请求。\n    },\n    beforeResponse: (response, ajaxOption, xhr) => {\n      // 接口请求成功，接口数据未获取到，通过reponse.json等方法获取指定类型的数据\n      // 一般来说这里用来处理 Ajax未能处理的数据类型，比如blob类型等。\n      return response.json();\n    },\n    afterResponse(result, ajaxOption, xhr) => {\n      // result为数据结果，可以return新的数据结果，来取代接口数据结果\n    }\n  });\n  \n  // header为{csrfToken: '...'}，请求地址和origin拼接起来：'https://api.github.com/users/baqian'\n  ajax.get('/users/baqian')\n  // get第二位参数作为请求的query或者body，第三位参数是ajaxOption补充，比如请求路径上的变量，需要通过ajaxOption.params属性来填充。\n  // 统一上效果一致\n  ajax.get('/users/:name', {}, {params: {name: 'baqian'}})\n  // 通过设置normalize，可以通过query或者body来填充路径上的变量\n  ajax.normalize = true;\n  ajax.get('/users/:name', {name: 'baqian'})\n  // 通过delimeter可以替换变量的占位命名。\n  ajax.delimeter = /\\{([^\\}]+)\\}/g\n  ajax.get('/users/{name}', {name: 'baqian'})\n```\n\n以上例子中在`beforeRequest`中返回mock数据，起到数据模拟效果，参考以下示例\n\n```javascript\n  // 在ajaxOption设置mock数据，在beforeRequest直接返回Promise，将不再发请求\n  const ajax1 = new Ajax({\n    beforeRequest: (ajaxOption) => {\n      if (ajaxOption.mock) {\n        return Promise.resolve(ajaxOption.mock);\n      } if (ajaxOption.mockPath) {\n        return ajax1.get(ajaxOption.mockPath);\n      } \n    }\n  });\n\n  app.ajax.get('/users/baqian')\n```\n\n+ Beatle初始化会产品一个内置的ajax实例，通过设置该ajax，可以在整个应用的接口请求做统一配置管理。\n\n```javascript\n  const app = new Beatle({\n    ajax: {\n      origin: 'https://api.github.com',\n      headers: {\n        csrfToken: '...'\n      },\n      ...\n    }\n  });\n```\n\n+ ajax实例提供方法来设置实例级别的配置\n\n| 方法 | 参数类型 | 描述 |\n|:------ |:------ |:------ |\n| `setHeader(headers)` | headers `Object` | 设置`headers`配置 |\n| `beforeRequest(fn)` | fn `Function` | 请求之前`beforeRequest`的处理，此时可以更改接口配置或者更多 |\n| `beforeResponse(fn)` | fn `Function` | 接口结果预处理`beforeResponse`， |\n| `afterResponse(fn)` | fn `Function` | 接口结果后处理`afterResponse` |\n| `set(name[, value])` | name `String`, value `any` | 前4个方法都可以通过set方法来设置，简化操作 |\n\n```javascript\n  const ajax = new Ajax();\n\n  ajax.beoreResponse(\n    function(response, ajaxOption, request){\n      // 实际场景中，还需要判断reponse的status是否为200\n      return response.json();\n    }\n  );\n  // set为统一的设置方法\n  app.set('origin', 'https://api.github.com');\n  ajax.get('/users/baqian');\n```\n\n> Ajax实例的配置，其默认值来取之Ajax的静态属性，比如`Ajax.origin`，所以如果有必要，可以通过改变Ajax的静态属性，使其所有使用Ajax的实例配置都一致\n\n```javascript\n  Ajax.origin = 'https://api.github.com';\n  const ajax = new Ajax();\n  ajax.get('/users/baqian');\n```\n\n### Ajax.request(ajaxOption)\n\nAjax静态方法，其内部会初始化一个ajax实例，并调用ajax.request来执行\n\n### ajax实例方法\n\n| 名称 | 参数类型 | 描述 |\n| :------ | :------ | :------ |\n| request | options `Object` | 接口请求调用，所有其他方式的请求最终都会走request来执行 |\n| get | path `String`, data `Object/null`, options `Object/Function`, dataType `String/Function` | get请求 |\n| post | path `String`, data `Object/null`, options `Object/Function`, dataType `String/Function` | post请求 |\n| put | path `String`, data `Object/null`, options `Object/Function`, dataType `String/Function` | put请求 |\n| delete | path `String`, data `Object/null`, options `Object/Function`, dataType `String/Function` | delete请求 |\n| patch | path `String`, data `Object/null`, options `Object/Function`, dataType `String/Function` | patch请求 |\n\n### ajax.request(options)\n* options <`Object`> 接口请求配置\n* return <`Promise|null`> 配置中有callback则不会返回内容，否则会返回调用的promise\n\n+ 常用接口配置\n\n| 属性 | 参数类型 | 描述 |\n| :------ | :------ | :------ |\n| url | `String` | 请求地址 |\n| method | `String` | 请求方法 |\n| headers | `Object` | 请求头部 |\n| mode | `String` | 请求模式，参考 `cors`, `no-cors`, `same-origin`, 默认`no-cors` |\n| credentials | `String` | 请求凭证, 参考`omit`, `same-origin`, `include`, 有凭证才带cookie，否则不带cookie | \n| cache | `String` | 缓存模式，参考 `default`, `reload`, `no-cache`, 默认`default` |\n| callback | `Function` | 回调处理函数，当存在callback时不会返回promise实例 |\n| dataType | `String` | 接口返回结果对数据解析处理基于dataType类型来决定，默认为json解析 |\n\n+ 标准的dataType解析数据类型\n\n| 取值 | 描述 |\n| :------ | :------ |\n| arrayBuffer | 解析为`ArrayBuffer`的promise对象 |\n| blob | 解析为`Blob`的promise对象, `URL.createObjectURL(Blob)`转为base64 |\n| formData | 解析为`FormData`的promise对象 |\n| json | 解析为`Json`的promise对象 |\n| text | 解析为`USVString`的promise对象 |\n\n> ajax处理接口数据，是会默认判断json或者text数据，其他类型的dataType，需要自行设置`beforeResponse`来处理。\n\n### ajax.get(path[, data, options, dataType])\n* path <`String`> 请求地址\n* data <`Object|null`>  请求参数\n* options <`Object|Function`> 当为函数式，则是callback回调，否则为请求配置信息\n* dataType <`String|Function`>  请求数据进行数据解析类型，默认是json解析, 当dataType为函数时，则是callback回调，此时options必须为请求配置信息\n* return <`Promise|null`> 配置中有callback则不会返回内容，否则会返回调用的promise\n\n```javascript\n  new ajax = new Ajax();\n\n  // 第三位参数可以是回调函数，也可以是ajaxOption\n  ajax.get('https://api.github.com/users/baqian', null, (err, ret) => {\n    if (err) {\n      console.error(err);\n    } else {\n      console.log(ret);\n    }\n  })\n  // 同上效果\n  ajax.get('https://api.github.com/users/baqian', null, {\n    callback: (err, ret) => {\n      if (err) {\n        console.error(err);\n      } else {\n        console.log(ret);\n      }\n    }\n  })\n  // 第四位参数仍然可以是callback回调\n  ajax.get('https://api.github.com/users/baqian', null, {}， (err, ret) => {\n    if (err) {\n      console.error(err);\n    } else {\n      console.log(ret);\n    }\n  });\n  // 标准的，第四个参数用来指定dataType，需要处理的数据类型\n  ajax.get('https://api.github.com/users/baqian', null, (err, ret) => {\n    if (err) {\n      console.error(err);\n    } else {\n      console.log(ret);\n    }\n  }, 'json');\n```\n\n> 其他接口方法形式一致，包括`post`、 `delete`、`put` 和 `patch`\n"},979:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=n(23),l=r(s),f=n(980),p=r(f),d=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(p.default),u.routeOptions={doc:(0,l.default)(n(981)),getIcon:function(e){return'<i style="font-size: '+e+'px;" class="anticon anticon-usb"></i>'},title:"中间件",summary:"middleware",layout:["consoleLayout","demoLayout"],value:6},c);t.default=d,e.exports=t.default},980:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),s=r(c),l=n(101),f=r(l),p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return s.default.createElement("h1",null,"敬请期待")}}]),t}(f.default);t.default=p,e.exports=t.default},981:function(e,t){e.exports="# 中间件`Middleware`\n中间件作用域`Beatle`中的数据作用域`seed`实例，数据模型是通过`seed`管理起来的，数据变更一般来说通过`model.actions.func`来触发`action`，其他方式还有通过`seed.dispatch`来触发action调用。\n\n```javascript\n  const app = new Beatle();\n  app.model('test', {\n    set: v => v\n  })\n  // 等同于app.model('test').actions.set(10);\n  app.seed.dispatch({\n    name: 'test.set',\n    payload: {\n      arguments: [10]\n    }\n  });\n```\n+ `app.use(middleware)`注册中间件，`middleware`支持3个参数：`action`、`next` 和 `dispatch`\n\n中间件作用于每次action调用时数据变更的过程。`action`时数据变更发起的action，`next`是通知下个中间件继续处理，`dispatch`时action的发射器，可以发起新的action。\n\n```javascript\n  app.use((action, next, dispatch) => {\n    // 根据action的属性，重新发起对的action调用\n    if(action.operate === 'set') {\n      dispatch({\n        name: 'test.set',\n        payload: {\n          arguments: [10]\n        }\n      });\n    } else {\n      next(action);\n    }\n  });\n  // 触发一次action，实际上这个action并不存在\n  app.seed.dispatch({\n    operate: 'set'\n  });\n```\n\n中间件的应用场景，可以用作数据变更过程中的跟踪，比如收集数据变更的loading状态，展现为页面的loadingBar效果。\n\n```javascript\n  app.use((action, next) => {\n    if (action.type && !action.suppressGlobalProgress) {\n      if (action.type.match(/\\/start$/)) {\n        // loading计数+1\n        showLoading();\n      } else if (action.type.match(/\\/success$/) || action.type.match(/\\/error$/)) {\n        // loading计数-1\n        hideLoading();\n      }\n    }\n    next(action);\n  });\n```"},982:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=n(23),l=r(s),f=n(983),p=r(f),d=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(p.default),u.routeOptions={doc:(0,l.default)(n(984)),getIcon:function(e){return'<i style="font-size: '+e+'px;" class="anticon anticon-api"></i>'},title:"数据模型",summary:"model",layout:["consoleLayout","demoLayout"],value:2},c);t.default=d,e.exports=t.default},983:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),s=r(c),l=n(101),f=r(l),p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return s.default.createElement("h1",null,"敬请期待")}}]),t}(f.default);t.default=p,e.exports=t.default},984:function(e,t){e.exports="# 数据模型`Model`\n数据模型`Model`是一类数据的集合，包含有2个要素：数据状态`state` 和 数据行为`action`, 以下是一个简单的示例代码\n\n```javascript\n  const model = {\n    state: {\n      name: 'a'\n    },\n    actions: {\n      setName(name) {\n        return {\n          name: name\n        };\n      }\n    }\n  }\n  // 注册数据模型\n  app.model('test', model);\n  // 获取数据模型实例\n  const model = app.model('test');\n  // 打印a\n  console.log(model.state.name);\n  // 调用数据行为方法\n  model.actions.setName('b');\n  // 打印b\n  console.log(model.state.name);\n```\n\n描述一个完整Model对象，需要具备以下数据结构：\n\n| **属性** | **描述** | **默认值** |\n| :--- | :--- | :--- |\n| `displayName` | 实例名 | N/A |\n| `state` | 数据基础结构, 或者`store` | {} |\n| `actions` | 改变数据的行为方法 | N/A |\n| `subscriptions` | 跨数据模型的行为监听，或者`externalReducers` | N/A |\n\n```javascript\n  // 以React的propTypes概念来描述属性类型，方便我们来描述每个属性的类型\n  const propTypes = React.PropTypes;\n  const modelShape = {\n    displayName: propTypes.string,\n    state: propTypes.object,\n    actions: propTypes.object,\n    reducers: propTypes.object,\n    subscriptions: propTypes.object\n  }\n```\n\n+ `subscriptions`, 跨model监听\n\n```javascript\n  /* 跨model监听，当指定`${modelName}`的数据模型中，其`${actionName}`触发并且执行`${status}`回调时，会触发当前数据模型的监听时间\n  const subscriptions = {\n    `${modelName}.${actionName}.${status}: (nextStore, playload) => {\n    }\n  }\n  */\n  app.model({\n    displayName: 'model1',\n    actions: {\n      test: () => {\n        console.log(1);\n      }\n    }\n  });\n  app.model('model2', {\n    subscriptions: {\n      'model1.test': () => {\n        console.log(2);\n      }\n    }\n  });\n  const model1 = app.model('model1');\n  app.actions.test();\n  // 打印：1 2\n```\n\n符合以上数据结构的Model可以通过`app.model(Model)` 或者 `app.model(name, Model)`注册到应用中。\n\n### action的3个概念，也是action的3个取值类型\n1. `reducer < Function >`数据变更，返回的数据作为model最新的数据状态\n2. `actionProcessor < Function >`行为计算逻辑，此时action只做计算，不会触发数据变更，但是函数参数中包含了 数据变更的回调函数，比如`put`\n3. `actionDescriptor < Object >`行为描述对象，一般来说是`actionProcessor`和`reducer`的组合。\n\n#### `reducer < Function >`\n\n当action取值为普通函数时，会被定义为`reducer`，如下action调用，model的state值将更新为`{a: 2}`\n\n```javascript\n  app.model('test', {\n    state: {\n      a: 1\n    },\n    actions: {\n      test: () => {\n        return {\n          a: 2\n        }\n      }\n    }\n  });\n```\n\n在model.reducers中也可以进行reducer，但是不能直接通过 `model.reducers.xxx()`来触发。\n\n在reducers中定义的reducer格式为`function(state, payload){...}`，实时上`actionDescriptor`中的`reducer`也事遵从这个定义规范。\n* state表示model的最新数据状态\n* payload是action触发成功后的装载数据对象\n\n```javascript\n  app.model('test', {\n    reducers: {\n      // reducer，数据变更直接接收返回值\n      set: (state, payload) => {\n        return payload.data\n      }\n    },\n    actions: {\n      // reducer，数据变更直接接收返回值（定义在action中）\n      reset() {\n        return {a: 0}\n      },\n      // reducer，可直接改变state，从而达到更新数据状态效果\n      add: (state, payload) => {\n        state.test.a = state.test.a + 2;\n      },\n      // actionProcessor，只做计算，最后通过put发起数据变更（通过type找到reducer，从而通过reducer变更）。\n      trigger({put}) {\n        put({\n          type: 'set',\n          payload: {\n            data: {\n              a: 1\n            }\n          }\n        })\n      }\n    }\n  });\n  // state = {a: 1}\n  app.model('test').actions.trigger();\n  // state = {a: 0}\n  app.model('test').actions.reset();\n  // state = {a: 2}\n  app.model('test').actions.add();\n```\n\n#### `actionProcessor < Function >`\n\naction行为计算逻辑，不会直接变更数据状态，上一个示例中的trigger方法就是`actionProcessor`，除此之外，对于action值为`GeneratorFunction` 和 `AsyncFunction`时，都是属于`actionProcessor`\n\n```javascript\n  // 延续上一个示例\n  app.model({\n    ...\n    actions: {\n      // 可以发现，action为函数时，最后一个参数从能拿到put回调，用于变更数据，此时`reducer`也可以作为`actionProcessor`使用\n      trigger(...args, {put}) {\n        put({\n          type: 'set',\n          payload: {\n            data: {\n              a: 1\n            }\n          }\n        })\n      },\n      // GeneratorFunction，配置yield，异步转同步\n      * set(...args, {put}) {\n        yield put({\n          type: 'set',\n          payload: {\n            data: {\n              a: 1\n            }\n          }\n        })\n      },\n      // AsyncFunction，配置await，异步转同步\n      async reset(...args, {put}) {\n        await put({\n          type: 'set',\n          payload: {\n            data: {\n              a: 0\n            }\n          }\n        })\n      },\n    }\n  })\n```\n\n\n#### `actionDescriptor < Object >`\n\n有2个属性，分别是`exec`和`reducer`，分别有2种值类型\n  1. 常用类型的`actionDescriptor`\n    * exec值为`actionProcessor`类型，用于行为计算，返回的值会走到，`actionDescriptor.reducer`\n    * callback（可命名为reducer）, 同`reducer`概念，用于变更数据状态。\n  2. 特殊类型的`actionDescriptor`\n    * exec值为`ajaxOption`类型，Beatle内部会通过`ajax`来发起请求，获取的数据会走到`actionDescriptor.reducer`\n    * callback（可命名为reducer）, 有2种值类型\n      1. `Function`类型，同`reducer`概念，在ajax接口请求成功后会进入\n      2. `Object`，值类型为：`{start, success, error}`，属性值均为`reducer`概念，会分别在ajax发请求之前、请求成功 和 请求失败 时进入。\n\n```javascript\n  app.model('test', {\n    state: {\n      profile: {},\n      repos: []\n    },\n    actions: {\n      getProfile: {\n        exec: () => app.ajax.get('https://api.github.com/users/baqian'),\n        callback: (state, payload) => {\n          // exec返回的数据，总能通过payload.data获取到\n          state.profile = paylaod.data;\n        }\n      },\n      getRepos: {\n        exec: {\n          url: 'https://api.github.com/users/baqian/repos',\n          method: 'get'\n        },\n        callback: {\n            // 接口请求之前触发\n          start: (state, payload) => {\n            state.repos = [];\n          },\n          success: (state, payload) => {\n            // 接口resolve的数据，能通过payload.data获取到\n            state.profile = paylaod.data;\n          },\n          error: (state, payload) => {\n            // 接口reject\n            state.repos = [];\n          }\n        }\n      }\n    }\n  });\n```\n\n> playload的数据结构为`{data, arguments, message}`，data是`actionDescriptor`返回的数据（如果返回是promise，则为resolve的数据），arguments是`actionDescriptor`调用时传入的参数，message则是接口请求reject的错误信息\n\n### 结合resource\n\nresource是接口配置对象，用于描述一类接口的调用配置\n\n> 通过swagger-editor导出的JS接口调用，会生成多个resource\n\n```javascript\n  // 第一种形式\n  const resource = {\n    getRepos: {\n      url: 'https://api.github.com/users/baqian/repos',\n      method: 'get'\n    }\n  }\n\n  // 第二种形式\n  const resource = {\n    getRepos() {\n      return app.ajax.get('https://api.github.com/users/baqian/repos');\n    }\n  }\n```\n\n植入resource的概念，处于2个目的，第一是resource可以结合model，补充`actionDescriptor`中的`exec`属性值，第二是resource通过swagger管理，是目前接口管理的最佳方案之一，通过swagger导出的resource拿来即用。\n\n#### `Beatle.createModel(Model, resource): < Model >`结合Model和resource\n 1. 遍历resource对象，拿到每个属性和值\n 2. 在model.actions中找到对应属性的行为，把值赋给行为的exec对象，找不到行为则，则丢弃掉\n\n```javascript\n  const resource = {\n    getProfile: {\n      url: 'https://api.github.com/users/baqian',\n      method: 'get'\n    },\n    getRepos: {\n      url: 'https://api.github.com/users/baqian/repos',\n      method: 'get'\n    }\n  }\n  const semiModel = {\n    // 只要出现同名action，都会转成actionDescriptor，exec使用resource.getProfile填补\n    getProfile(state, payload) => {\n      state.profile = paylaod.data;\n    },\n    getRepos: {\n      // exec会用resource.getRepos填补\n      callback: {\n        start: (state, payload) => {\n          state.repos = [];\n        },\n        success: (state, payload) => {\n          state.profile = paylaod.data;\n        },\n        error: (state, payload) => {\n          state.repos = [];\n        }\n      }\n    }\n  }\n  const model = Beatle.createModel(semiModel, resource);\n  app.model('user', model);\n```\n\n### Model类\n\nmodel可以通过类的形式来定义，需要继承于`Beatle.BaseModel`\n* `state`定义数据状态\n* 函数属性为`actionProcessor`行为计算，数据变更通过`setState`来实现\n* `setState`有3种取值，其一是新的`state`值，其二是`reducer`，返回的值更新到最新state，其三是Map类型, key是要变更的数据状态的属性，value则是`actionDescriptor`类型值。\n\n```javascript\n  class Model extends BaseModel {\n    state = {\n      name: 'a'\n    }\n    setName(name) {\n      this.setState({\n        name: name\n      })\n    }\n    reset(name) {\n      this.setState(name: () => {\n        return '';\n      });\n    }\n  }\n  \n  // 注册数据模型\n  app.model('test', Model);\n  // 获取数据模型实例\n  const model = app.model('test');\n  // 打印a\n  console.log(model.state.name);\n  // 调用数据行为方法\n  model.setName('b');\n  // 打印b\n  console.log(model.state.name);\n```\n\n> 同样的，resource是用来补充model中`actionDescriptor.exec`值\n\n```javascript\n  const resource = {\n    getRepos: {\n      url: 'https://api.github.com/users/baqian/repos',\n      method: 'get'\n    }\n  }\n  class SemiModel extends BaseModel {\n    state = {\n      profile: {},\n      repos: []\n    }\n    getProfile() {\n      this.setState({\n        profile: {\n          exec: {\n            url: 'https://api.github.com/users/:name',\n            method: 'get'\n          },\n          callback: (state, payload) => {\n            state.profile = paylaod.data;\n          }\n        }\n      }, \n      // setState可以有3个参数，第二个参数则是要传入到actionProcessor.exec作为参数\n      {name: 'baqian'}, \n      // 第三个参数表示actionProcessor.exec执行成功后的回调\n      (err) => {\n        if (err) {\n          console.error(err);\n        } else {\n          console.log('success');\n        }\n      })\n    }\n    getRepos() {\n      this.setState({\n        repos: {\n          exec: 'getRepos',\n          callback: {\n            start: (state, payload) => {\n              // 等同于state.repos = [];\n              return [];\n            },\n            success: (state, payload) => {\n              state.profile = paylaod.data;\n            },\n            error: (state, payload) => {\n              state.repos = [];\n            }\n          }\n        }\n      })\n    }\n  }\n  const Model = Beatle.createModel(SemiModel, resource);\n```\n\n#### 接口调用crud\n\n通过Model和resource的结合，生成新的Model，极大方便了resource的统一管理（比如通过swagger导出）。同时我们发现Model中对于接口的调用，需要把数据缓存到`state`中，其更新数据到`state`的方式是可以归纳为一下5种类型reducer。\n1. get获取单个记录，单个记录保存到`state.item`\n2. query获取记录列表，记录列表保存到`state.list`\n3. create创建新记录，新建记录插入到`state.list`\n4. update更新记录，在`state.list`找到指定的记录，做merge更新\n5. delete删除记录，在`state.list`找到指定记录，从list中剔除掉\n\n大部分的数据模型都需要以上的操作，我们可以把这5种类型的`reducer`，改为通用函数，在多个model中复用。事实上，Beatle提供了一个`crud`的函数集\n\n```javascript\n  import {crud, BaseModel} from 'beatle';\n  class Model extends BaseModel {\n    state = {\n      item: crud.item,\n      list: crud.itemsEntry\n    }\n    get(id) {\n      return this.setState({\n        exec: {url: 'apiDomain/entity/:id', method: 'get'},\n        callback: crud.get\n      }, {id: id})\n    }\n    query() {\n      return this.setState({\n        exec: {url: 'apiDomain/entity/query/list', method: 'get'},\n        callback: crud.query\n      })\n    }\n    create(body) {\n      return this.setState({\n        exec: {url: 'apiDomain/entity/', method: 'post'},\n        callback: crud.create\n      }, body)\n    }\n    update(body) {\n      return this.setState({\n        exec: {url: 'apiDomain/entity/:id', method: 'put'},\n        callback: crud.update\n      }, body)\n    }\n    delete(id) {\n      return this.setState({\n        exec: {url: 'apiDomain/entity/:id', method: 'delete'},\n        callback: crud.delete\n      }, {id: id})\n    }\n  }\n```\n\n#### 装饰器\n\n通过装饰器，优化编码，以下将创建一个完整的Model。\n\n```javascript\n  import {crud, BaseModel, exec, createModel} from 'beatle';\n  const resource = {\n    get: {url: 'apiDomain/entity/:id', method: 'get'},\n    query: {url: 'apiDomain/entity/query/list', method: 'get'},\n    create: {url: 'apiDomain/entity/', method: 'post'},\n    update: {url: 'apiDomain/entity/:id', method: 'put'}\n    delete: {url: 'apiDomain/entity/:id', method: 'delete'}\n  }\n  @createModel(resource)\n  class Model extends BaseModel {\n    state = {\n      item: crud.item,\n      itemsEntry: crud.itemsEntry\n    }\n\n    /**\n    * @exec([stateName, feedback])    stateName表示要更新state的属性, feedback表示promise回调\n    * action = crud[actionProcess_temple]   actionProcess_temple是模版函数，类型为actionProccessor\n    * action为要调用的行为方法，如果通过createModel和resource合并，action来自于resource的指定接口定义\n    */\n    @exec('item')\n    get = crud.get;\n\n    @exec('itemsEntry')\n    query = crud.query;\n\n    @exec('itemsEntry', crud.message('创建成功', '创建失败'))\n    create = crud.create;\n\n    @exec('itemsEntry')\n    update = crud.update;\n\n    @exec('itemsEntry')\n    delete = crud.delete;\n  }\n```\n\n### Model和组件结合\n\nBeatle初始化成功后，会产生一个数据作用域`seed`实例，这是应用的单一数据源`store`，所有的数据模型的数据状态都会维护在`store`中，组件通过订阅方式来消费`store`中的数据状态。\n\n```javascript\n  const app = new Beatle();\n  app.model({\n    displayName: 'test',\n    state: {\n      a: 1\n    },\n    actions: {\n      set: (v) => {\n        return {\n          a: v\n        };\n      }\n    }\n  });\n  const model = app.model('test');\n  class Component extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        a: model.state.a\n      };\n    }\n    componentDidMount() {\n      // 挂载成功后，订阅store数据\n      app.seed.subscribe((state) => {\n        this.setState({\n          a: state.test.a\n        });\n      });\n      // 1秒钟后变更为10\n      setTimeout(() => {\n        model.set(10);\n      }, 1000);\n    }\n    render() {\n      return (<div>{this.state.a}</div>)\n    }\n  }\n  ReactDOM.render(<Component/>, document.body);\n  \n```\n\n以上代码可以精简下，把数据订阅的逻辑自动化掉\n\n```javascript\n  const app = new Beatle();\n  app.model(...);\n  class Component extends React.Component {\n    componentDidMount() {\n      // 1秒钟后变更为10\n      setTimeout(() => {\n        // 可以发现model的action也注入进来了\n        this.props.test.set(10);\n      }, 1000);\n    }\n    render() {\n      // 注意，这里不是props.a而是props.test.a\n      return (<div>{this.props.test.a}</div>)\n    }\n  }\n  // 这一步很关键，把名为test的数据模型，注入到组件的props种。\n  const HocComponent = app.connect('test', Component);\n  // 可以发现，我们把之前的组件拆成了2个组件，最外层组件是Hoc组件，负责订阅store，内层组件，负责数据渲染和触发数据更新，只接收传入的props。\n  ReactDOM.render(<HocComponent/>, document.body);\n```\n\n> 以上示例，如果想要把数据模型注入到组件中，并且想要直接props.a访问到数据状态，可以通过`app.connect('test', Component, true)`，第三个参数为 true，表示以平铺的方式注入到props。\n> 如果需要注入多个数据模型，建议使用非平铺方式注入\n\n```javascript\n  class Component extends React.Component {\n    render() {\n      return (<div>{this.props.a}</div>)\n    }\n  }\n  const HocComponent = app.connect('test', Component, true);\n```\n\n+ `app.connect(bindings, Component, flattern)`连接数据模型和组件\n1. `bindings` 数据绑定策略，用于声明注入到组件的数据模型\n2. `Component` React组件\n3. `flattern` 平铺方式注入\n\n`bindings`有4种取值，延续上一个示例来说明\n```javascript\n  // bindings = [mapStateToProps, mapDispatchToProps], 此时flattern只能为true\n  app.connect([\n    (state) => {\n      return {\n        a: state.test.a\n      }\n    }\n    (dispatch, props, actions) => {\n      return {\n        set: actions.test.set\n      }\n    }\n  ], Component);\n  // bindings = [stateMap, dispatchMap]\n  app.connect([\n    {\n      // 描述模型.state|actions.属性名\n      a: 'test.state.a'\n    },\n    {\n      set: 'test.actions.set'\n    }\n  ], Component)\n  // bindings = 'modelName'\n  app.connect('test', Component, true)\n  // bindings = ['modelName'], 多个model\n  app.connect(['test'], Component, true)\n```\n\n### 多应用场景\n主要包括数据模型注册到哪个应用，以及选择数据模型连接组件。\n\n```javascript\n  import {BaseModel, model, connect} from 'beatle';\n  const app = new Beatle({\n    name: 'main'\n  });\n  @model({\n    app: 'main'\n  })\n  class Model extends BaseModel{\n    static displayName = 'test';\n    ...\n  }\n  @connect({\n    app: 'main',\n    bindgins: ['test'],\n    flattern: false\n  })\n  class Component extends React.Component {\n    ...\n  }\n```\n\n### 响应式的数据模型\n\n这里指的是数据状态的响应式，获取数据状态时，实际拿到的数据状态的序列，通过改变序列，从而达到数据更新的效果\n\n+ 响应式数据\n 1. `observable`，转变数据状态为可观察序列\n 2. `computed`，转变返回的数据状态的函数为可观察序列\n 3. `action`，观察函数调用后，其可观察的数据状态是否发生了变更，变更则通知已订阅的观察者。\n+ 响应式组件\n 1. `observer` + `inject`，订阅观察序列，当接收到通知时，驱动组件重新渲染。\n\n```javascript\n  import {BaseModel, model, observable, computed, action, observer} from 'beatle';\n\n  // 注册Model到app\n  @model()\n  class Model extends BaseModel {\n    static displayName = 'user';\n\n    @observable\n    profile = {}\n\n    @observable\n    repos = []\n\n    @computed\n    get reposList() {\n      return this.repos;\n    }\n\n    @action\n    getUserInfo(name) {\n      return this.ajax.get('https://api.github.com/users/' + name).then(res => {\n        // 应为profile被observable转成可观察的序列，只要在@action中变化profile，都会更新到数据状态\n        this.profile = res;\n      });\n    }\n\n    @action\n    getRepos(name) {\n      return this.ajax.get('https://api.github.com/users/' + name + '/repos').then(res => {\n        this.repos = res;\n        this.getUserInfo(name);\n      });\n    }\n  }\n  \n  // 等同于app.connect(['user'], Component);\n  @observer({\n    inject: ['user'] // bindigns\n  })\n  class Component extends React.Component {\n    static contextTypes = {\n      app: React.PropTypes.object\n    }\n    static propTypes = {\n      user: PropTypes.object\n    }\n    componentDidMount() {\n      this.props.user.getUserInfo('baqian');\n    }\n    render() {\n      return (<div>\n        <h1>{this.props.user.profile.name}</h1>\n        <ul>\n          {\n            app.observer('user.repos').render(ret) => {\n              // app.observer可以持续观察数据状态，一旦有变化则立即更新组件\n              return ret.map((item, index) => (<li key={index}>{item.name}</li>));\n            }\n          }\n        </ul>\n      </div>);\n    }\n  }\n```\n\n### 一次配置多个数据模型\n\n```javascript\n  // models属性配置数组\n  const app1 = new Beatle({\n    models: [model1, model2]\n  });\n  // models是Map\n  const app2 = new Beatle({\n    models: {\n      a: model1, // a, b为数据模型的实例名\n      b: model2\n    }\n  });\n  // 结合webpack的require.context扫描\n  const app3 = new Beatle({\n    models: require.context(...)\n  });\n  // 动态配置\n  Beatle.autoLoad.loadModels = () => {\n    return [model1, model2]; // require.context(...)\n  }\n  // 后续的Beatle初始化都有效\n  const app4 = new Beatle({\n    autoLoadModels: true\n  });\n```"},985:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=n(23),l=r(s),f=n(986),p=r(f),d=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(p.default),u.routeOptions={doc:(0,l.default)(n(987)),getIcon:function(e){return'<i style="font-size: '+e+'px;" class="anticon anticon-bars"></i>'},title:"路由",summary:"route",layout:["consoleLayout","demoLayout"],value:3},c);t.default=d,e.exports=t.default},986:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),s=r(c),l=n(101),f=r(l),p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return s.default.createElement("h1",null,"敬请期待")}}]),t}(f.default);t.default=p,e.exports=t.default},987:function(e,t){e.exports="# 路由`Route`\n\nBeatle封装`react-router`，保留路由配置的所有特性，通过`app.route(path, routeConfig)`注册路由，Beatle会统一管理动态路由配置，在`app.run`启动应用时使用。\n\n### `app.route(path[, Component, routeConfig])`\n* `path: < String >` 路由路径, 如果只填path，则返回注册好的路由配置项\n* `Component: < ReactComponent >` 路由组件\n* `routeConfig: < Function | Object >` 路由配置项\n\n路由命中时，组件从`props`中获取3个变量\n1. `route`路由完整配置\n1. `params`路由变量值\n2. `location`路由命名中的解析信息，结构为`{pathname, hash, query, state}`\n\n```javascript\n  app.route('/a', Component, {\n    childRoutes: [...]\n  });\n  // 动态路由\n  app.route('/b', (nextState, callback) => {\n    require.ensuire(['./com'], (require) => {\n      const Com = require('./com');\n      // 动态加载路由组件\n      callback(null, Com);\n    }, 'async')\n  });\n  const routeConfig = app.route('/a');\n```\n\n### `app.route(routeConfig)`\n* `routeConfig: < Array|Object >` 填写完成的路由配置，包括路径\n 1. routeConfig为数组，填写路由配置\n 2. routeConfig为对象，可以填写`路由映射关系`\n\n```javascript\n  app.route([\n    {\n      path: 'core/model',\n      component: ModelComponent\n    },\n    {\n      path: 'core/route',\n      component: RouteComponent\n    },\n    {\n      path: 'core/seed',\n      component: SeedComponent\n    },\n  ]);\n  // 等同于上面的路由配置，前提是ModelComponent.routeOptions不能为空（可以为true或者Object）\n  app.route({\n    './core/model/index.jsx': ModelComponent,\n    './core/route/index.jsx': RouteComponent,\n    './core/seed/index.jsx': SeedComponent\n  });\n  // 更特殊的，Beatle可以结合webpack的require.context特性遍历的文件，来构建路由\n  app.route(require.context('./core', true, /index\\.jsx$/));\n```\n\n> 路由映射关系是一个特殊命名，是Beatle支持的一种特殊格式。\n\n\n### 路由路径的通配符\n路由路径通过使用通配符，达到一个组件支持动态路径的效果\n\n+ 路径变量\n:paramName，匹配URL的一个部分，直到遇到下一个/、?、#为止。这个路径参数可以通过\n\n```javascript\n  app.route('/media/:id', Component);\n  // 跳转到/media/:id的路由，在组件的props.params.id获取变量值123\n  app.push('/media/123');\n  // 这是一种特殊情况，生成的路由是/media/baqian\n  app.route('/media/:name', Component, {\n    name: 'baqian'\n  });\n```\n\n+ 路径贪婪匹配\n\n()，表示URL的这个部分是可选的。\n\n```javascript\n  app.route('/media(/:id)', Component);\n  // 以下2种调用都能匹配路由\n  app.push('/media/123');\n  app.push('/media');\n```\n\n+ 路径模糊匹配\n1. *，匹配任意字符，直到模式里面的下一个字符为止。匹配方式是非贪婪模式。\n2. **，匹配任意字符，直到下一个/、?、#为止。匹配方式是贪婪模式。\n\n```javascript\n  app.route('/media*', Component1);\n  app.route('/**/item', Component2);\n  app.push('/media1');\n  app.push('/media/item');\n```\n\n### `routeOptions`\n\n前面提到过`app.route(routeConfig)`可以一次注册多个路由，`routeConfig`可以取值为路由映射关系，路由映射关系需要满足2种数据结构，Map或者`require.context`取值，同时要满足组件必须定义静态属性`routeOptions`，否则不会注册到路由中。\n\n```javascript\n  class Component extends React.Component {\n    render() {\n      ...\n    }\n  }\n  // 因为Component.routeOptions为定义\n  app.route({\n    './index.jsx': Component\n  });\n  Component.routeOptions = true;\n  // 注册路由成功，等同于app.route('/', Component);\n  app.route({\n    './index.jsx': Component\n  });\n\n  Component.routeOptions = {\n    childRoutes: [...]\n  }\n  // 在注册路由，会把routeOptions合并到routeConfig中，所以当前路由还加入了子路有\n  app.route({\n    './index.jsx': Component\n  });\n```\n\n### routeConfig完整配置\n\n| **属性** | **描述** | **默认值** |\n| :--- | :--- | :--- |\n| `path` | 路由路径 | String |\n| `indexRoute` | 重定向路由 | `{component, getComponent}` |\n| `component` | 路由组件 | ReactComponent |\n| `getComponent` | 动态路由组件 | Function |\n| `childRoutes` | 子路有配置 | `[...routeConfig]` |\n| `onEnter` | 路由命中时钩子函数 | Function |\n| `onLeave` | 路由离开时钩子函数 | Function |\n| `aliasRoutes` | 复制路由配置项 | `routeConfig` |\n\n```javascript\n  import {Router} from 'react-router';\n  const routeConfig = [\n    { path: '/',\n      component: App,\n      indexRoute: { component: Dashboard },\n      childRoutes: [\n        { path: 'about', component: About },\n        { path: 'inbox',\n          component: Inbox,\n          childRoutes: [\n            { path: '/messages/:id', component: Message },\n            { path: 'messages/:id',\n              onEnter: function (nextState, replaceState) {\n                replaceState(null, '/messages/' + nextState.params.id)\n              }\n            }\n          ]\n        }\n      ]\n    }\n  ]\n  // 路由配置项可以在react-router中使用\n  React.render(<Router routes={routeConfig} />, document.body)\n  // 等同以上效果\n  app.route(routeConfig);\n  app.run(document.body);\n```\n\n### 初始化Beatle时批量注册路由\n\n```javascript\n  // 方式1，静态配置\n  const app1 = new Beatle({\n    routes: routeConfig\n  });\n\n  // 方式2，动态配置\n  Beatle.autoLoad.loadRoutes = () => {\n    return routeConfig\n  };\n  // 后续的Beatle初始化都有效\n  const app2 = new Beatle({\n    autoLoadRoute: true\n  });\n```"},988:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=n(23),l=r(s),f=n(989),p=r(f),d=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(p.default),u.routeOptions={doc:(0,l.default)(n(990)),getIcon:function(e){return'<i style="font-size: '+e+'px;" class="anticon anticon-codepen"></i>'},title:"数据作用域",summary:"seed",layout:["consoleLayout","demoLayout"],value:4},c);t.default=d,e.exports=t.default},989:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),s=r(c),l=n(101),f=r(l),p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return s.default.createElement("h1",null,"敬请期待")}}]),t}(f.default);t.default=p,e.exports=t.default},990:function(e,t){e.exports="# 数据作用域`Class: ReduxSeed`\n\n在Beatle初始化产生app实例时，其内部会维护一个`ReduxSeed`实例`seed`，而数据作用域的目的时，在应用级别维护一个数据共享区`store`（前面我们也称之为`单一数据源`）\n\n`store`基本上就是一个容器，它包含着你的应用中大部分的数据状态 (state)。\n1. state的状态存储是响应式的。当组件从 store 中读取状态的时候，若 store 中的状态发生变化，那么相应的组件也会相应地得到高效更新。\n2. 不能直接改变 store 中的状态。改变 store 中的状态的途径是触发`数据行为`，通过`数据行为`来更新state，组件通过订阅store，实时响应state的更新，从而更新组件。\n\n+ 抛开数据模型概念，使用最基本的seed实例来实现 数据状态管理\n\n```javascript\n  import Beatle, {connect} from 'beatle';\n  // 注册数据状态 以及 数据变更的实现逻辑\n  app.seed.register(\n    'profile',    // 数据状态属性\n    (prevStore, payload) => { // 数据变更逻辑\n      return payload.data\n    },\n    {}            // 数据状态的默认值\n  );\n  function setProfile(data) {\n    // 通过seed.dispatch发起action，通过action来描述数据变更\n    app.seed.dispatch({\n      name: 'profile',\n      payload: {\n        data: data\n      }\n    })\n  }\n\n  \n  // ！重要，用于连接组件和store，非装饰器方式为app.connect(View);\n  @connect\n  class View extends React.Component {\n    // ! 同样重要，当store每次有变更的时候，通过getState获取最新数据，注入到组件props中\n    static getState = state => {\n      return {\n        profile: state.profile\n      }\n    };\n    static propTypes = {\n      profile: React.PropTypes.object\n    }\n    componentDidMount() {\n      // 对于seed，组件内部也可以通过this.context.seed获取。\n      setProfile({\n        name: 'baqian'\n      });\n    }\n    render () {...}\n  }\n```\n\n+ 通过new ReduxSeed产生seed实例\n\n```javascript\n  import {ReduxSeed} from 'beatle';\n\n  const seed = new ReduxSeed({...});\n```\n+ new ReduxSeed传入options配置项：\n\n| 属性 | 描述 | 默认 |\n|:------ |:------ |:------ |\n| name `String` | ReduxSeed支持多实例，初始化一个seed实例需要指定实例名称 | `main` |\n| ajax `Object` | ajax实例 | N/A |\n| initialState `Object` | store的基础结构 | `{}` |\n| middlewares `Array` | 应用数据处理中间件，通过中间件可以变更数据结果 | `[]` |\n| Models `Object` | 注册多个数据模型 | `{}` |\n\n### seed实例方法\n\n| 方法 | 描述 |\n| :------ | :------ | :------ |\n| `register(name, reducer, defaultValue)` | 注册一个数据状态 |\n| `dispatch(action)` | 触发一个数据行为，用于触发指定的数据变更 |\n| `subscribe(callback)` |  订阅store，每当state发生变更时触发 |\n| `getActions(actionName)` | 获取指定数据行为的触发函数 |\n\n* `reducer`在[数据模型章节](/beatle-projects/core/model)有详细介绍\n* `action`的格式为`{type, name, payload}`,\n  1. type是完整的action所在位置，通过type来识别action的触发函数，格式为`@@modelName/actionName`\n  2. name是type的简写，最后会转成type\n  3. payload是action的装载数据\n\n```javascript\n  app.model('user', {\n    getProfile: () => {\n      return {\n        name: 'baqian';\n      }\n    },\n    get: ({put}) => {\n      // 等同于app.seed.dispatch(...)\n      // 通过put等方法，可以省去写modelName，会自动拼上当前的model\n      put({\n        name: 'getProfile'\n      });\n    }\n  });\n  app.seed.dispatch({\n    name: 'user.profile',\n    payload: {\n      data: data\n    }\n  });\n  // name转成type\n  app.seed.dispatch({\n    type: '@@user/profile',\n    payload: {\n      data: data\n    }\n  })\n```\n\n> 单独使用seed实例的场景很少，了解seed的过程，有助于我们对数据模型的理解和应用。"},991:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=n(23),l=r(s),f=n(992),p=r(f),d=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(p.default),u.routeOptions={doc:(0,l.default)(n(993)),getIcon:function(e){return'<i style="font-size: '+e+'px;" class="anticon anticon-compass"></i>'},title:"控制器",summary:"selector",layout:["consoleLayout","demoLayout"],value:5},c);t.default=d,e.exports=t.default},992:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),s=r(c),l=n(101),f=r(l),p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return s.default.createElement("h1",null,"敬请期待")}}]),t}(f.default);t.default=p,e.exports=t.default},993:function(e,t){e.exports="# VM控制器`Class: Selector`\n\n复杂的场景，页面组件会涉及到多个数据模型做数据交互，还会增加额外的业务逻辑，我们建议通过封装Selector，以和页面一对一的控制器来封装所有的组件之外的逻辑。\n\n```javascript\n  app.model('a', {\n    state: {v: 0},\n    set() {\n      return {\n        v: 1\n      }\n    }\n  });\n  app.model('b', {\n    state: {v: 0},\n    set() {\n      return {\n        v: 2\n      }\n    }\n  });\n  // 没有控制器时，我们会这么处理\n  const selector = {\n    plus() {\n      app.model('a').set();\n      app.model('b').set();\n    }\n  }\n  class Component extends React.Component{\n    componentDidMount() {\n      selector.plus();\n    }\n    render() {\n      return (<div>{this.props.a.v + this.props.b.v}</div>)\n    }\n  }\n  app.connect(['a', 'b'], Component);\n```\n\n基于Selector控制器，更改示例代码如下：\n\n```javascript\n  class Selector extends BaseSelector {\n    // bindings声明注入的数据模型\n    static bindings = ['a', 'b'];\n    // 这是钩子函数，会在组件初始化完成后触发\n    initialize(props) {\n      this.getModel('a').set();\n      this.getModel('b').set();\n    }\n  }\n  class Component extends React.Component{\n    render() {\n      return (<div>{this.props.a.v + this.props.b.v}</div>)\n    }\n  }\n  // 和app.connect不同，通过app.view可以连接控制器和组件\n  app.view(Selector, Component);\n```\n\n### Selector特性\n+ Selector是一类特殊的服务，即可以通过组件的context可以获取到selector实例，同时如果Selector依赖了其他服务，可以通过`contextTypes`声明依赖服务后，通过`context`可以获取到服务实例。\n\n```javascript\n  app.service('a', () => {\n    return {v: 1};\n  })\n  class Selector extends BaseSelector {\n    static contextTypes = {\n      selector: React.PropTypes.object\n    }\n    static bindings = (state) => {\n      return {\n        b: this.context.a.v\n      };\n    }\n  }\n  class Component extends React.Component{\n    static contextTypes = {\n      selector: React.PropTypes.object\n    }\n    render() {\n      // this.props.b === this.context.selector.context.a.v;\n      return (<div>{this.props.b}</div>);\n    }\n  }\n  const HocComponent = app.view(Selector, Component);\n  app.route('/', HocComponent);\n```\n\n+ 初始化钩子函数，在组件初始化时触发，解脱组件`componentDidMount`\n\n```javascript\n  class Selector extends BaseSelector {\n    ...\n    initialize(props) {\n      // props来自于组件\n      this.getModel('user').getProfile(props.name);\n    }\n  }\n  @view({\n    // 在view装饰器下hookActions配置也会在组件初始化时触发\n    hookActions: [\n      {model: 'user', name: 'getProfile', getParams(props) => props.name}\n    ]\n  })\n  class Component extends React.Component{\n    ...\n  }\n  // 非装饰器\n  app.view(Selector, Component);\n```\n\n> hookAction的结构为`{model, name, getParams, params}`, 其中params为静态参数，getParams可以动态返回\n\n\n### app.view([Selector, ]component, providers)\n* Selector <`Object`> 指定需要绑定的控制器\n* component <`ReactComponent`> 指定组件来绑定\n* providers <`Array<Object|Function|Array>`> 注入组件级的服务，使得组件通过this.context可以访问到。\n* return <`ReactComponent`> 返回新的React组件\n\n```javascript\n  class UserModel extends Beatle.BaseModel {\n    state = {\n      profile: {\n        name: 'Guest'\n      }\n    }\n    login(name) {\n      return this.setState({\n        profile: {\n          exec: fetch('https://api.github.com/users/' + name),\n          // 每次都需要写callback，而很多callback的处理基本都是统一的，比如接口的CRUD的处理。\n          // 以下等同于Beatlep.crud.get\n          callback: (nextProps, payload) => {\n            return payload.data;\n          }\n        }\n      })\n    }\n  }\n\n  class Selector extends Beatlep.BaseSelector{\n    // inputs相当于connect的 stateMergeToProps, 相对应的outputs等同于connect的 actionMergeToProps\n    get inputs() {\n      return (state, dispatch) => {\n        return {\n          profile: state.user.profile\n        }\n      }\n    }\n    // 这是数据选择器的钩子函数，在组件初始化完成时自动触发。\n    initialize() {\n      this.getModel('user').login('baqian');\n    }\n  }\n\n  class Root extends React.Component{\n    static propTypes = {\n      profile: React.Proptypes.object\n    }\n\n    static contextTypes = {\n      test: React.Proptypes.object\n    }\n\n    render() {\n      // 组件会先输出 Hello Guest!，接口调用成功后，更新为 Hello baqian\n      return (<div>{this.context.test.title} {this.props.profile.login}!</div>)\n    }\n  }\n  // 和Beatlep.connect不同，connect绑定数据模型，view绑定数据选择器\n  Root = Beatlep.view(Selector, Root, {\n    test: function() {\n      return {\n        title: 'Hello'\n      }\n    }\n  });\n```\n\n### Selector的静态属性\n\n定义控制器Selector，需要继承于BaseSelector\n\n| 属性 | 描述 | 默认 |\n|:------ |:------ |:------ |\n| bindings | 多种取值，请参考[数据模型章节](beatle-projects/core/model) | `[]` |\n| flattern `Boolean` | 平铺方式注入model | `false` |\n| hookActions `Array` | 钩子配置，用于组件初始化时触发的数据模型的action | 单项`{model, name, getParams, params}` |\n| contextTypes `Map` | 用于声明的依赖服务 | N/A |"},994:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(23),d=r(p),y=n(995),m=r(y),h=(c=u=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){(0,m.default)(this._dom)}},{key:"render",value:function(){var e=this;return f.default.createElement("div",{ref:function(t){return e._dom=t}})}}]),t}(l.Component),u.routeOptions={doc:(0,d.default)(n(996)),getIcon:function(e){return'<i style="font-size: '+e+'px;" class="anticon anticon-customer-service"></i>'},title:"服务",summary:"service",layout:["consoleLayout","demoLayout"],value:6},c);t.default=h,e.exports=t.default},995:function(e,t,n){"use strict";function r(e){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},996:function(e,t){e.exports="# 服务`Service`\n\n服务的概念其实就是通过的JS代码逻辑，可以是一个函数，也可以是一个类。服务通过注册形式加入到Beatle的环境中，组件通过context来获取到服务实例，从而使用服务实例的方法或者属性。\n\n1. `app.service(name, Service)`，注册服务到app中\n2. 组件通过`contextTypes`声明需要的服务，在组件内部通过`this.context`获取服务实例\n\n```javascript\n  app.service('test', () => {\n    return {\n      a: 1\n    }\n  });\n  class Component extends React.Component{\n    static contextTypes = {\n      test: React.PropTypes.object\n    }\n    render() {\n      return (<div>{this.context.test.a}</div>)\n    }\n  }\n  // 通过app来执行，或者通过app的路由注册\n  app.run(document.body, Component);\n```\n\n\n### `app.service(name[, Service, isGlobal])` 服务注册与获取\n1. `app.service(name, Service)`，注册应用级服务\n2. `app.service(name, Service, true)`，注册全局服务\n3. `app.service(name)`，获取应用级服务实例\n4. `app.service(name, true)`，获取全局服务实例\n\n+ 服务的作用域\n服务的作用域分为3层，全局服务、应用级服务 和 组件级服务，通过组件的contextTypes注入服务时，优先级是 组件级 > 应用级 > 全局\n\n1. 全局服务，跨应用可共享。\n2. 应用级，只在应用内部可用。\n3. 组件级，可以传递到组件内部或者子组件，组件外部不可用。\n\n```javascript\n  app.service('a', () => 1, true); // 第三个参数表示注册到全局服务\n  app.service('a', () => 2);\n  class Component extends React.Component {\n    static contextTypes = {\n      // app是应用级服务\n      app: React.PropTypes.object,\n      // a全局和应用级都存在，应用优先级最高。\n      a: React.PropTypes.number,\n      // 组件级服务，组件外部不可用。\n      b: React.PropTypes.object\n    }\n  }\n  class B {\n    constructor() {\n      this.b = 3;\n    }\n  }\n  // 注入组件级的服务\n  app.view(Component, {b: B});\n```\n\n```javascript\n  class A {\n    data = {a: 1}\n  }\n  const b = (a) => {\n    return {\n      getValue(v) {\n        // a.data.a为a服务中的值\n        return a.data.a + v;\n      }\n    }\n  }\n  // 声明b服务依赖于a服务\n  b.contextTypes = {\n    a: React.PropTypes.object\n  }\n  app.service('a', A);\n  app.service('b', b);\n  const bService = app.service('b');\n  // 打印 3\n  console.log(bService.getValue(2));\n```\n\n> 组件总能注入3个内置的应用级服务：app、ajax 和 seed\n\n+ 服务的依赖\n\n```javascript\n  const app = new Beatle();\n  function A() {\n    return {\n      v: 1\n    }\n  };\n  // B依赖于A，通过数组最后一位是服务定义，其他项为依赖的服务名\n  const B = ['a', function(a) {\n    return {\n      v: a.v + 1\n    }\n  }];\n  // B是其中的一种依赖方式，C是另外一种依赖方式，通过contextTypes属性声明\n  class C{\n    static contextTypes: {\n      b: React.PropTypes.object\n    }\n    get v() {\n      return this.context.b.v + 1;\n    }\n  }\n  \n  function D(c) {\n    return c.v + 1;\n  }\n  // D是另外一种依赖方式，通过$inject声明，是不是很熟悉，ng 1.x中服务依赖也是如此\n  D.$inject = ['c'];\n\n  // 注册服务A，通过displayName来指定服务名\n  A.displayName = 'a';\n  const a = app.service('a');\n  // 输出 1\n  console.log(a.v);\n  // 注册服务, 通过key来指定服务实例名称\n  app.service({\n    b: B,\n    c: C,\n    d: D\n  });\n  // 通过名称获取服务实例\n  const b = app.service('b');\n  // 输出2, 因为b依赖于a + 1, B的依赖会从全局服务中找\n  console.log(a.v);\n  const d = app.service('d');\n  // 输出4, 因为d依赖于c + 1， c依赖于b + 1， b依赖于a + 1\n  console.log(d.v);\n```\n\n### `app.service(services)` 一次性注入多个应用级服务\n\n```javascript\n  // 方式1，通过map形式\n  app.service({\n    b: B,\n    c: C,\n    d: D\n  });\n  // 方式2，结合webpack的require.contexts\n  app.service(require.context(...))\n```\n\n### `app.view(Component, services)`添加组件级服务\n\n`Component`是组件，`services`是Map，配置多个服务。\n\n```javascript\n  app.service('a', () => 1, true); // 第三个参数表示注册到全局服务\n  app.service('a', () => 2);\n  class Component extends React.Component {\n    static contextTypes = {\n      // app是应用级服务\n      app: React.PropTypes.object,\n      // a全局和应用级都存在，应用优先级最高。\n      a: React.PropTypes.number,\n      // 组件级服务，组件外部不可用。\n      b: React.PropTypes.object\n    }\n  }\n  class B {\n    constructor() {\n      this.b = 3;\n    }\n  }\n  // 注入组件级的服务\n  app.view(Component, {b: B});\n```\n\n\n### 服务注入器`Injector`\n`Injector`时管理服务依赖关系和服务注入逻辑的示例。在Beatle初始化时，会产生`injector`实例，用于管理应用级的服务。\n\n| 属性 | 描述 |\n|:------ |:------ |\n| `setService(Service)` | 注入服务，Service静态属性displayName来指定实例名 |\n| `getService(name)` | 通过服务实例名获取实例 |\n| `setServices(Services)` | 一次性注入多个服务 |\n| `instantiate(Service)` | 创建临时服务，不会保存到应用级服务中 |\n\n> `injector.getService(Services)`一次性创建多个服务，其`Services`除了Map值，还可以结合webpack的`require.context(...)`遍历结果"},997:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(12),d=r(p),y=n(29),m=r(y),h=n(998),b=r(h),v=n(1003),g=r(v),_=n(158),x=r(_),j=n(23),O=r(j),w=n(269),k=r(w),P=n(1018),E=r(P),R=n(1025),M=r(R),T=n(81),C=(c=u=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,c=Array(u),s=0;s<u;s++)c[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={subMenus:null},i=n,a(r,i)}return i(t,e),s(t,[{key:"getOverview",value:function(){var e=this.state.subMenus||{},t={beatle:{title:"启动一个Beatle项目",mods:[]},core:{title:"应用一个Beatle核心模块",mods:[]}};Object.keys(e).forEach(function(n){e[n].key=n,t[e[n].category].mods.push(e[n])});var r=(0,O.default)(n(1394).trim());return f.default.createElement("div",{style:{margin:100}},f.default.createElement("p",{className:"j-doc",dangerouslySetInnerHTML:{__html:r}}),Object.keys(t).map(function(e){var n=t[e];return f.default.createElement("div",{key:e},f.default.createElement("h1",{style:{marginTop:50}},n.title),n.mods.map(function(e){return f.default.createElement(x.default,{key:e.key,title:e.title},f.default.createElement(b.default,null,e.children.map(function(e,t){return f.default.createElement(g.default,{key:t,span:4},f.default.createElement("div",{className:"elem-icon"},f.default.createElement(m.default.Link,{to:e.resolvePath},f.default.createElement("div",{dangerouslySetInnerHTML:{__html:e.getIcon(50)}}),f.default.createElement("h3",null,e.title),f.default.createElement("p",null,e.summary))))})))}))}))}},{key:"render",value:function(){var e=this.props.children||this.getOverview(),t=this.props.children&&this.props.children.props.route,n=(0,T.getLayout)({layoutOption:this.layoutOption,layout:"ConsoleLayout",route:t},e,{demoLayout:M.default});return f.default.createElement(E.default,{title:(t?t.component&&t.component.routeOptions.title+" - ":"")+"示例"},f.default.createElement("div",{className:"j-scene-all"},f.default.createElement("div",{className:"j-scene-root"},n,f.default.createElement(T.GModal,{width:600,component:k.default}))))}},{key:"layoutOption",get:function(){var e=this,t={routes:this.context.app.getRoutes()[0].childRoutes,Link:m.default.Link};return Object.assign(t,{subRoutes:[],Sider:!1,BreadCrumb:!1,Header:!1,Footer:!1,components:{Header:[T.Sider,Object.assign(t,{header:{style:{position:"fixed",zIndex:1e5,width:"100%"}},orderKeys:["single","spa","complex","core"],subMenus:{single:{title:"单组件应用",category:"beatle"},spa:{title:"SPA应用",category:"beatle"},complex:{title:"复杂应用",category:"beatle"},core:{title:"Beatle核心模块",category:"core"}},ref:function(t){return t&&!e.state.subMenus&&e.setState({subMenus:t.state.subMenus})},menu:{mode:"horizontal"},getResolvePath:m.default.getResolvePath,brand:{title:"Beatle项目示例",logo:"//img.alicdn.com/tfs/TB14dINRpXXXXcyXXXXXXXXXXXX-64-64.png?t=1517212583908"}})]}})}}]),t}(f.default.PureComponent),u.contextTypes={app:d.default.object},u.routeOptions=!0,u.propTypes={children:d.default.element},c);t.default=C,e.exports=t.default}},[538]);